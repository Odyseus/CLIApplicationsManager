

<!DOCTYPE html>
<html class="no-js" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>python_modules.python_utils.svgelements.svgelements &mdash; Python CLI Applications Documentations  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/python-logo.svg"/>
  
  
  

  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: False" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> Python CLI Applications Documentations
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/1-general-notes.html">General development notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/CLIApplicationsManager/index.html"><abbr title="Command Line Interface">CLI</abbr> applications manager's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/BackupUtils/index.html">Backup Utils' documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/BootstrapThemesGenerator/index.html">Bootstrap Themes Generator' documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/ChrootHelper/index.html">Chroot Helpers's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/FilesCleaner/index.html">Files Cleaner's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/HostsManager/index.html">Hosts Manager's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/JSONSchemaValidator/index.html">JSON Schema Validator's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/KnowledgeBase/index.html">Knowledge Base's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/MakeCinnamonXletPOT/index.html">Make Cinnamon Xlet POT's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/MoviesDB/index.html">Movies DB's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/PackageManager/index.html">Package Manager's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/UserApplicationsManager/index.html">User Applications Manager's documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/0-thirdparty_docs.d/docopt.html">docopt's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/0-thirdparty_docs.d/polib/index.html">polib's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/0-thirdparty_docs.d/pyperclip/index.html">pyperclip's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/0-thirdparty_docs.d/titlecase.html">titlecase's documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../includes/0-thirdparty_docs.d/tqdm.html">tqdm</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Python CLI Applications Documentations</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>python_modules.python_utils.svgelements.svgelements</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for python_modules.python_utils.svgelements.svgelements</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: ISO-8859-1 -*-</span>

<span class="kn">import</span> <span class="nn">re</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">MutableSequence</span>  <span class="c1"># noqa</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">MutableSequence</span>  <span class="c1"># noqa</span>

<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="p">(</span><span class="n">acos</span><span class="p">,</span> <span class="n">atan</span><span class="p">,</span> <span class="n">atan2</span><span class="p">,</span> <span class="n">ceil</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">degrees</span><span class="p">,</span> <span class="n">hypot</span><span class="p">,</span> <span class="n">log</span><span class="p">,</span> <span class="n">radians</span><span class="p">,</span>
                  <span class="n">sin</span><span class="p">,</span> <span class="n">sqrt</span><span class="p">,</span> <span class="n">tan</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">xml.etree.ElementTree</span> <span class="kn">import</span> <span class="n">iterparse</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">tau</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>

    <span class="n">tau</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">*</span> <span class="mi">2</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">The path elements are derived from regebro&#39;s svg.path project ( https://github.com/regebro/svg.path ) with</span>
<span class="sd">some of the math from mathandy&#39;s svgpathtools project ( https://github.com/mathandy/svgpathtools ).</span>

<span class="sd">The goal is to provide svg like path objects and structures. The svg standard 1.1 and elements of 2.0 will</span>
<span class="sd">be used to provide much of the decisions within path objects. Such that if there is a question on</span>
<span class="sd">implementation if the SVG documentation has a methodology it should be used.</span>

<span class="sd">Though not required the Image class acquires new functionality if provided with PIL/Pillow as an import</span>
<span class="sd">and the Arc can do exact arc calculations if scipy is installed.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">SVGELEMENTS_VERSION</span> <span class="o">=</span> <span class="s2">&quot;1.6.3&quot;</span>

<span class="n">MIN_DEPTH</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">ERROR</span> <span class="o">=</span> <span class="mf">1e-12</span>

<span class="n">max_depth</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># SVG STATIC VALUES</span>
<span class="n">DEFAULT_PPI</span> <span class="o">=</span> <span class="mf">96.0</span>
<span class="n">SVG_NAME_TAG</span> <span class="o">=</span> <span class="s2">&quot;svg&quot;</span>
<span class="n">SVG_ATTR_VERSION</span> <span class="o">=</span> <span class="s2">&quot;version&quot;</span>
<span class="n">SVG_VALUE_VERSION</span> <span class="o">=</span> <span class="s2">&quot;1.1&quot;</span>
<span class="n">SVG_ATTR_XMLNS</span> <span class="o">=</span> <span class="s2">&quot;xmlns&quot;</span>
<span class="n">SVG_VALUE_XMLNS</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span>
<span class="n">SVG_ATTR_XMLNS_LINK</span> <span class="o">=</span> <span class="s2">&quot;xmlns:xlink&quot;</span>
<span class="n">SVG_VALUE_XLINK</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/1999/xlink&quot;</span>
<span class="n">SVG_ATTR_XMLNS_EV</span> <span class="o">=</span> <span class="s2">&quot;xmlns:ev&quot;</span>
<span class="n">SVG_VALUE_XMLNS_EV</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2001/xml-events&quot;</span>

<span class="n">XLINK_HREF</span> <span class="o">=</span> <span class="s2">&quot;{http://www.w3.org/1999/xlink}href&quot;</span>
<span class="n">SVG_HREF</span> <span class="o">=</span> <span class="s2">&quot;href&quot;</span>
<span class="n">SVG_ATTR_WIDTH</span> <span class="o">=</span> <span class="s2">&quot;width&quot;</span>
<span class="n">SVG_ATTR_HEIGHT</span> <span class="o">=</span> <span class="s2">&quot;height&quot;</span>
<span class="n">SVG_ATTR_VIEWBOX</span> <span class="o">=</span> <span class="s2">&quot;viewBox&quot;</span>
<span class="n">SVG_VIEWBOX_TRANSFORM</span> <span class="o">=</span> <span class="s2">&quot;viewbox_transform&quot;</span>
<span class="n">SVG_TAG_PATH</span> <span class="o">=</span> <span class="s2">&quot;path&quot;</span>
<span class="n">SVG_TAG_GROUP</span> <span class="o">=</span> <span class="s2">&quot;g&quot;</span>
<span class="n">SVG_TAG_RECT</span> <span class="o">=</span> <span class="s2">&quot;rect&quot;</span>
<span class="n">SVG_TAG_CIRCLE</span> <span class="o">=</span> <span class="s2">&quot;circle&quot;</span>
<span class="n">SVG_TAG_ELLIPSE</span> <span class="o">=</span> <span class="s2">&quot;ellipse&quot;</span>
<span class="n">SVG_TAG_LINE</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span>
<span class="n">SVG_TAG_POLYLINE</span> <span class="o">=</span> <span class="s2">&quot;polyline&quot;</span>
<span class="n">SVG_TAG_POLYGON</span> <span class="o">=</span> <span class="s2">&quot;polygon&quot;</span>
<span class="n">SVG_TAG_TEXT</span> <span class="o">=</span> <span class="s2">&quot;text&quot;</span>
<span class="n">SVG_TAG_TSPAN</span> <span class="o">=</span> <span class="s2">&quot;tspan&quot;</span>
<span class="n">SVG_TAG_IMAGE</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span>
<span class="n">SVG_TAG_DESC</span> <span class="o">=</span> <span class="s2">&quot;desc&quot;</span>
<span class="n">SVG_TAG_TITLE</span> <span class="o">=</span> <span class="s2">&quot;title&quot;</span>
<span class="n">SVG_TAG_METADATA</span> <span class="o">=</span> <span class="s2">&quot;metadata&quot;</span>
<span class="n">SVG_TAG_STYLE</span> <span class="o">=</span> <span class="s2">&quot;style&quot;</span>
<span class="n">SVG_TAG_DEFS</span> <span class="o">=</span> <span class="s2">&quot;defs&quot;</span>
<span class="n">SVG_TAG_USE</span> <span class="o">=</span> <span class="s2">&quot;use&quot;</span>
<span class="n">SVG_TAG_CLIPPATH</span> <span class="o">=</span> <span class="s2">&quot;clipPath&quot;</span>
<span class="n">SVG_TAG_PATTERN</span> <span class="o">=</span> <span class="s2">&quot;pattern&quot;</span>

<span class="n">SVG_STRUCT_ATTRIB</span> <span class="o">=</span> <span class="s2">&quot;attributes&quot;</span>
<span class="n">SVG_ATTR_ID</span> <span class="o">=</span> <span class="s2">&quot;id&quot;</span>
<span class="n">SVG_ATTR_DATA</span> <span class="o">=</span> <span class="s2">&quot;d&quot;</span>
<span class="n">SVG_ATTR_DISPLAY</span> <span class="o">=</span> <span class="s2">&quot;display&quot;</span>
<span class="n">SVG_ATTR_COLOR</span> <span class="o">=</span> <span class="s2">&quot;color&quot;</span>
<span class="n">SVG_ATTR_FILL</span> <span class="o">=</span> <span class="s2">&quot;fill&quot;</span>
<span class="n">SVG_ATTR_FILL_OPACITY</span> <span class="o">=</span> <span class="s2">&quot;fill-opacity&quot;</span>
<span class="n">SVG_ATTR_STROKE</span> <span class="o">=</span> <span class="s2">&quot;stroke&quot;</span>
<span class="n">SVG_ATTR_STROKE_OPACITY</span> <span class="o">=</span> <span class="s2">&quot;stroke-opacity&quot;</span>
<span class="n">SVG_ATTR_STROKE_WIDTH</span> <span class="o">=</span> <span class="s2">&quot;stroke-width&quot;</span>
<span class="n">SVG_ATTR_TRANSFORM</span> <span class="o">=</span> <span class="s2">&quot;transform&quot;</span>
<span class="n">SVG_ATTR_STYLE</span> <span class="o">=</span> <span class="s2">&quot;style&quot;</span>
<span class="n">SVG_ATTR_CLASS</span> <span class="o">=</span> <span class="s2">&quot;class&quot;</span>
<span class="n">SVG_ATTR_CLIP_PATH</span> <span class="o">=</span> <span class="s2">&quot;clip-path&quot;</span>
<span class="n">SVG_ATTR_CLIP_RULE</span> <span class="o">=</span> <span class="s2">&quot;clip-rule&quot;</span>
<span class="n">SVG_ATTR_CLIP_UNIT_TYPE</span> <span class="o">=</span> <span class="s2">&quot;clipPathUnits&quot;</span>
<span class="n">SVG_ATTR_CENTER_X</span> <span class="o">=</span> <span class="s2">&quot;cx&quot;</span>
<span class="n">SVG_ATTR_CENTER_Y</span> <span class="o">=</span> <span class="s2">&quot;cy&quot;</span>
<span class="n">SVG_ATTR_RADIUS_X</span> <span class="o">=</span> <span class="s2">&quot;rx&quot;</span>
<span class="n">SVG_ATTR_RADIUS_Y</span> <span class="o">=</span> <span class="s2">&quot;ry&quot;</span>
<span class="n">SVG_ATTR_RADIUS</span> <span class="o">=</span> <span class="s2">&quot;r&quot;</span>
<span class="n">SVG_ATTR_POINTS</span> <span class="o">=</span> <span class="s2">&quot;points&quot;</span>
<span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span> <span class="o">=</span> <span class="s2">&quot;preserveAspectRatio&quot;</span>
<span class="n">SVG_ATTR_X</span> <span class="o">=</span> <span class="s2">&quot;x&quot;</span>
<span class="n">SVG_ATTR_Y</span> <span class="o">=</span> <span class="s2">&quot;y&quot;</span>
<span class="n">SVG_ATTR_X0</span> <span class="o">=</span> <span class="s2">&quot;x0&quot;</span>
<span class="n">SVG_ATTR_Y0</span> <span class="o">=</span> <span class="s2">&quot;y0&quot;</span>
<span class="n">SVG_ATTR_X1</span> <span class="o">=</span> <span class="s2">&quot;x1&quot;</span>
<span class="n">SVG_ATTR_Y1</span> <span class="o">=</span> <span class="s2">&quot;y1&quot;</span>
<span class="n">SVG_ATTR_X2</span> <span class="o">=</span> <span class="s2">&quot;x2&quot;</span>
<span class="n">SVG_ATTR_Y2</span> <span class="o">=</span> <span class="s2">&quot;y2&quot;</span>
<span class="n">SVG_ATTR_DX</span> <span class="o">=</span> <span class="s2">&quot;dx&quot;</span>
<span class="n">SVG_ATTR_DY</span> <span class="o">=</span> <span class="s2">&quot;dy&quot;</span>
<span class="n">SVG_ATTR_TAG</span> <span class="o">=</span> <span class="s2">&quot;tag&quot;</span>
<span class="n">SVG_ATTR_FONT</span> <span class="o">=</span> <span class="s2">&quot;font&quot;</span>
<span class="n">SVG_ATTR_FONT_FAMILY</span> <span class="o">=</span> <span class="s2">&quot;font-family&quot;</span>  <span class="c1"># Serif, sans-serif, cursive, fantasy, monospace</span>
<span class="n">SVG_ATTR_FONT_FACE</span> <span class="o">=</span> <span class="s2">&quot;font-face&quot;</span>
<span class="n">SVG_ATTR_FONT_SIZE</span> <span class="o">=</span> <span class="s2">&quot;font-size&quot;</span>
<span class="n">SVG_ATTR_FONT_WEIGHT</span> <span class="o">=</span> <span class="s2">&quot;font-weight&quot;</span>  <span class="c1"># normal, bold, bolder, lighter, 100-900</span>
<span class="n">SVG_ATTR_TEXT_ANCHOR</span> <span class="o">=</span> <span class="s2">&quot;text-anchor&quot;</span>
<span class="n">SVG_ATTR_PATTERN_CONTENT_UNITS</span> <span class="o">=</span> <span class="s2">&quot;patternContentUnits&quot;</span>
<span class="n">SVG_ATTR_PATTERN_TRANSFORM</span> <span class="o">=</span> <span class="s2">&quot;patternTransform&quot;</span>
<span class="n">SVG_ATTR_PATTERN_UNITS</span> <span class="o">=</span> <span class="s2">&quot;patternUnits&quot;</span>

<span class="n">SVG_ATTR_VECTOR_EFFECT</span> <span class="o">=</span> <span class="s2">&quot;vector-effect&quot;</span>

<span class="n">SVG_UNIT_TYPE_USERSPACEONUSE</span> <span class="o">=</span> <span class="s2">&quot;userSpaceOnUse&quot;</span>
<span class="n">SVG_UNIT_TYPE_OBJECTBOUNDINGBOX</span> <span class="o">=</span> <span class="s2">&quot;objectBoundingBox&quot;</span>

<span class="n">SVG_RULE_NONZERO</span> <span class="o">=</span> <span class="s2">&quot;nonzero&quot;</span>
<span class="n">SVG_RULE_EVENODD</span> <span class="o">=</span> <span class="s2">&quot;evenodd&quot;</span>

<span class="n">SVG_TRANSFORM_MATRIX</span> <span class="o">=</span> <span class="s2">&quot;matrix&quot;</span>
<span class="n">SVG_TRANSFORM_TRANSLATE</span> <span class="o">=</span> <span class="s2">&quot;translate&quot;</span>
<span class="n">SVG_TRANSFORM_SCALE</span> <span class="o">=</span> <span class="s2">&quot;scale&quot;</span>
<span class="n">SVG_TRANSFORM_ROTATE</span> <span class="o">=</span> <span class="s2">&quot;rotate&quot;</span>
<span class="n">SVG_TRANSFORM_SKEW_X</span> <span class="o">=</span> <span class="s2">&quot;skewx&quot;</span>
<span class="n">SVG_TRANSFORM_SKEW_Y</span> <span class="o">=</span> <span class="s2">&quot;skewy&quot;</span>
<span class="n">SVG_TRANSFORM_SKEW</span> <span class="o">=</span> <span class="s2">&quot;skew&quot;</span>
<span class="n">SVG_TRANSFORM_TRANSLATE_X</span> <span class="o">=</span> <span class="s2">&quot;translatex&quot;</span>
<span class="n">SVG_TRANSFORM_TRANSLATE_Y</span> <span class="o">=</span> <span class="s2">&quot;translatey&quot;</span>
<span class="n">SVG_TRANSFORM_SCALE_X</span> <span class="o">=</span> <span class="s2">&quot;scalex&quot;</span>
<span class="n">SVG_TRANSFORM_SCALE_Y</span> <span class="o">=</span> <span class="s2">&quot;scaley&quot;</span>

<span class="n">SVG_VALUE_NONE</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
<span class="n">SVG_VALUE_CURRENT_COLOR</span> <span class="o">=</span> <span class="s2">&quot;currentColor&quot;</span>

<span class="n">SVG_VALUE_NON_SCALING_STROKE</span> <span class="o">=</span> <span class="s2">&quot;non-scaling-stroke&quot;</span>

<span class="n">PATTERN_WS</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;[\s\t\n]*&quot;</span>
<span class="n">PATTERN_COMMA</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;(?:\s*,\s*|\s+|(?=-))&quot;</span>
<span class="n">PATTERN_COMMAWSP</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;[ ,\t\n\x09\x0A\x0C\x0D]+&quot;</span>
<span class="n">PATTERN_FLOAT</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?&quot;</span>
<span class="n">PATTERN_LENGTH_UNITS</span> <span class="o">=</span> <span class="s2">&quot;cm|mm|Q|in|pt|pc|px|em|cx|ch|rem|vw|vh|vmin|vmax&quot;</span>
<span class="n">PATTERN_ANGLE_UNITS</span> <span class="o">=</span> <span class="s2">&quot;deg|grad|rad|turn&quot;</span>
<span class="n">PATTERN_TIME_UNITS</span> <span class="o">=</span> <span class="s2">&quot;s|ms&quot;</span>
<span class="n">PATTERN_FREQUENCY_UNITS</span> <span class="o">=</span> <span class="s2">&quot;Hz|kHz&quot;</span>
<span class="n">PATTERN_RESOLUTION_UNITS</span> <span class="o">=</span> <span class="s2">&quot;dpi|dpcm|dppx&quot;</span>
<span class="n">PATTERN_PERCENT</span> <span class="o">=</span> <span class="s2">&quot;%&quot;</span>
<span class="n">PATTERN_TRANSFORM</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">SVG_TRANSFORM_MATRIX</span>
    <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
    <span class="o">+</span> <span class="n">SVG_TRANSFORM_TRANSLATE</span>
    <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
    <span class="o">+</span> <span class="n">SVG_TRANSFORM_TRANSLATE_X</span>
    <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
    <span class="o">+</span> <span class="n">SVG_TRANSFORM_TRANSLATE_Y</span>
    <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
    <span class="o">+</span> <span class="n">SVG_TRANSFORM_SCALE</span>
    <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
    <span class="o">+</span> <span class="n">SVG_TRANSFORM_SCALE_X</span>
    <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
    <span class="o">+</span> <span class="n">SVG_TRANSFORM_SCALE_Y</span>
    <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
    <span class="o">+</span> <span class="n">SVG_TRANSFORM_ROTATE</span>
    <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
    <span class="o">+</span> <span class="n">SVG_TRANSFORM_SKEW</span>
    <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
    <span class="o">+</span> <span class="n">SVG_TRANSFORM_SKEW_X</span>
    <span class="o">+</span> <span class="s2">&quot;|&quot;</span>
    <span class="o">+</span> <span class="n">SVG_TRANSFORM_SKEW_Y</span>
<span class="p">)</span>
<span class="n">PATTERN_TRANSFORM_UNITS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">PATTERN_LENGTH_UNITS</span> <span class="o">+</span> <span class="s2">&quot;|&quot;</span> <span class="o">+</span> <span class="n">PATTERN_ANGLE_UNITS</span> <span class="o">+</span> <span class="s2">&quot;|&quot;</span> <span class="o">+</span> <span class="n">PATTERN_PERCENT</span>
<span class="p">)</span>

<span class="n">REGEX_IRI</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;url\(#?(.*)\)&quot;</span><span class="p">)</span>
<span class="n">REGEX_FLOAT</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">PATTERN_FLOAT</span><span class="p">)</span>
<span class="n">REGEX_COORD_PAIR</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="s2">&quot;(</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">PATTERN_FLOAT</span><span class="p">,</span> <span class="n">PATTERN_COMMA</span><span class="p">,</span> <span class="n">PATTERN_FLOAT</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">REGEX_TRANSFORM_TEMPLATE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="sa">r</span><span class="s2">&quot;(?u)(</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">\(([^)]+)\)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">PATTERN_TRANSFORM</span><span class="p">,</span> <span class="n">PATTERN_WS</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">REGEX_TRANSFORM_PARAMETER</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="s2">&quot;(</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)?&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">PATTERN_FLOAT</span><span class="p">,</span> <span class="n">PATTERN_WS</span><span class="p">,</span> <span class="n">PATTERN_TRANSFORM_UNITS</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">REGEX_COLOR_HEX</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^#?([0-9A-Fa-f]{3,8})$&quot;</span><span class="p">)</span>
<span class="n">REGEX_COLOR_RGB</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="sa">r</span><span class="s2">&quot;rgba?\(\s*(</span><span class="si">%s</span><span class="s2">)\s*,\s*(</span><span class="si">%s</span><span class="s2">)\s*,\s*(</span><span class="si">%s</span><span class="s2">)\s*(?:,\s*(</span><span class="si">%s</span><span class="s2">)\s*)?\)&quot;</span>
    <span class="o">%</span> <span class="p">(</span><span class="n">PATTERN_FLOAT</span><span class="p">,</span> <span class="n">PATTERN_FLOAT</span><span class="p">,</span> <span class="n">PATTERN_FLOAT</span><span class="p">,</span> <span class="n">PATTERN_FLOAT</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">REGEX_COLOR_RGB_PERCENT</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="sa">r</span><span class="s2">&quot;rgba?\(\s*(</span><span class="si">%s</span><span class="s2">)</span><span class="si">%%</span><span class="s2">\s*,\s*(</span><span class="si">%s</span><span class="s2">)</span><span class="si">%%</span><span class="s2">\s*,\s*(</span><span class="si">%s</span><span class="s2">)</span><span class="si">%%</span><span class="s2">\s*(?:,\s*(</span><span class="si">%s</span><span class="s2">)\s*)?\)&quot;</span>
    <span class="o">%</span> <span class="p">(</span><span class="n">PATTERN_FLOAT</span><span class="p">,</span> <span class="n">PATTERN_FLOAT</span><span class="p">,</span> <span class="n">PATTERN_FLOAT</span><span class="p">,</span> <span class="n">PATTERN_FLOAT</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">REGEX_COLOR_HSL</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="sa">r</span><span class="s2">&quot;hsla?\(\s*(</span><span class="si">%s</span><span class="s2">)\s*,\s*(</span><span class="si">%s</span><span class="s2">)</span><span class="si">%%</span><span class="s2">\s*,\s*(</span><span class="si">%s</span><span class="s2">)</span><span class="si">%%</span><span class="s2">\s*(?:,\s*(</span><span class="si">%s</span><span class="s2">)\s*)?\)&quot;</span>
    <span class="o">%</span> <span class="p">(</span><span class="n">PATTERN_FLOAT</span><span class="p">,</span> <span class="n">PATTERN_FLOAT</span><span class="p">,</span> <span class="n">PATTERN_FLOAT</span><span class="p">,</span> <span class="n">PATTERN_FLOAT</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">REGEX_LENGTH</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(</span><span class="si">%s</span><span class="s2">)([A-Za-z</span><span class="si">%%</span><span class="s2">]*)&quot;</span> <span class="o">%</span> <span class="n">PATTERN_FLOAT</span><span class="p">)</span>
<span class="n">REGEX_CSS_STYLE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;([^{]+)\s*\{\s*([^}]+)\s*\}&quot;</span><span class="p">)</span>
<span class="n">REGEX_CSS_FONT</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="sa">r</span><span class="s2">&quot;(?:(normal|italic|oblique)\s|(normal|small-caps)\s|(normal|bold|bolder|lighter|\d</span><span class="si">{3}</span><span class="s2">)\s|(normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded)\s)*\s*(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|\d+(?:em|pt|pc|px|%))(?:/(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|\d+(?:em|pt|pc|px|%)))?\s*(.*),?\s+(serif|sans-serif|cursive|fantasy|monospace);?&quot;</span>
<span class="p">)</span>

<span class="n">svg_parse</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;COMMAND&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;[MmZzLlHhVvCcSsQqTtAa]&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;SKIP&quot;</span><span class="p">,</span> <span class="n">PATTERN_COMMAWSP</span><span class="p">)]</span>
<span class="n">svg_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">pair</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">svg_parse</span><span class="p">))</span>
<span class="n">num_parse</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;FLOAT&quot;</span><span class="p">,</span> <span class="n">PATTERN_FLOAT</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;CLOSE&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;[Zz]&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;SKIP&quot;</span><span class="p">,</span> <span class="n">PATTERN_COMMAWSP</span><span class="p">)]</span>
<span class="n">num_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">pair</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">num_parse</span><span class="p">))</span>
<span class="n">flag_parse</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;FLAG&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;[01]&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;SKIP&quot;</span><span class="p">,</span> <span class="n">PATTERN_COMMAWSP</span><span class="p">)]</span>
<span class="n">flag_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">pair</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">flag_parse</span><span class="p">))</span>


<div class="viewcode-block" id="SVGLexicalParser"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGLexicalParser">[docs]</a><span class="k">class</span> <span class="nc">SVGLexicalParser</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pathd</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="SVGLexicalParser._command"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGLexicalParser._command">[docs]</a>    <span class="k">def</span> <span class="nf">_command</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">svg_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pathd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Did not match at command sequence.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
            <span class="n">kind</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">lastgroup</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;SKIP&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">return</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="SVGLexicalParser._more"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGLexicalParser._more">[docs]</a>    <span class="k">def</span> <span class="nf">_more</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">num_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pathd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">kind</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">lastgroup</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;CLOSE&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;SKIP&quot;</span><span class="p">:</span>
                <span class="c1"># move skipped elements forward.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
                <span class="k">continue</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="SVGLexicalParser._number"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGLexicalParser._number">[docs]</a>    <span class="k">def</span> <span class="nf">_number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">num_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pathd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>  <span class="c1"># No more matches.</span>
            <span class="n">kind</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">lastgroup</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;CLOSE&quot;</span><span class="p">:</span>
                <span class="c1"># Inline Close</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;SKIP&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">())</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="SVGLexicalParser._flag"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGLexicalParser._flag">[docs]</a>    <span class="k">def</span> <span class="nf">_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">flag_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pathd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>  <span class="c1"># No more matches.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
            <span class="n">kind</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">lastgroup</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;SKIP&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">()))</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="SVGLexicalParser._coord"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGLexicalParser._coord">[docs]</a>    <span class="k">def</span> <span class="nf">_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span></div>

<div class="viewcode-block" id="SVGLexicalParser._rcoord"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGLexicalParser._rcoord">[docs]</a>    <span class="k">def</span> <span class="nf">_rcoord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">current_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">current_point</span>
        <span class="k">if</span> <span class="n">current_pos</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">position</span>
        <span class="k">return</span> <span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">current_pos</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">current_pos</span><span class="o">.</span><span class="n">y</span></div>

<div class="viewcode-block" id="SVGLexicalParser.parse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGLexicalParser.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="n">pathd</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">parser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pathd</span> <span class="o">=</span> <span class="n">pathd</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pathd</span><span class="p">)</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">cmd</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;z&quot;</span> <span class="ow">or</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;Z&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">closed</span><span class="p">(</span><span class="n">relative</span><span class="o">=</span><span class="n">cmd</span><span class="o">.</span><span class="n">islower</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">continue</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;m&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span>
                <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rcoord</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                    <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rcoord</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;M&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span>
                <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                    <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rcoord</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;L&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;t&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rcoord</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">smooth_quad</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;T&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">smooth_quad</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;h&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">horizontal</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;H&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">horizontal</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;v&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">vertical</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;V&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">vertical</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span><span class="p">,</span> <span class="n">coord3</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_rcoord</span><span class="p">(),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_rcoord</span><span class="p">(),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_rcoord</span><span class="p">(),</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">coord1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="k">if</span> <span class="n">coord2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="k">if</span> <span class="n">coord3</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord3</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">cubic</span><span class="p">(</span><span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span><span class="p">,</span> <span class="n">coord3</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span><span class="p">,</span> <span class="n">coord3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">coord1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="k">if</span> <span class="n">coord2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="k">if</span> <span class="n">coord3</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord3</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">cubic</span><span class="p">(</span><span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span><span class="p">,</span> <span class="n">coord3</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;q&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rcoord</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rcoord</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">coord1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="k">if</span> <span class="n">coord2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">quad</span><span class="p">(</span><span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;Q&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">coord1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="k">if</span> <span class="n">coord2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">quad</span><span class="p">(</span><span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;s&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rcoord</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rcoord</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">coord1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="k">if</span> <span class="n">coord2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">smooth_cubic</span><span class="p">(</span><span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;S&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">coord1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="k">if</span> <span class="n">coord2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">smooth_cubic</span><span class="p">(</span><span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                        <span class="k">break</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                    <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">arc</span><span class="p">,</span> <span class="n">sweep</span><span class="p">,</span> <span class="n">coord</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">(),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">(),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">(),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_flag</span><span class="p">(),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_flag</span><span class="p">(),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_rcoord</span><span class="p">(),</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">sweep</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span><span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">arc</span><span class="p">,</span> <span class="n">sweep</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s2">&quot;A&quot;</span><span class="p">:</span>
                <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_more</span><span class="p">():</span>
                    <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">arc</span><span class="p">,</span> <span class="n">sweep</span><span class="p">,</span> <span class="n">coord</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">(),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">(),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">(),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_flag</span><span class="p">(),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_flag</span><span class="p">(),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_coord</span><span class="p">(),</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_close</span>
                        <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span><span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">arc</span><span class="p">,</span> <span class="n">sweep</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">end</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Length"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Length">[docs]</a><span class="k">class</span> <span class="nc">Length</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SVGLength as used in SVG</span>

<span class="sd">    Length class is lazy when solving values. Several conversion values are unknown by default and length simply</span>
<span class="sd">    stores that ambiguity. So we can have a length of 50% and without calling .value(relative_length=3000) it will</span>
<span class="sd">    simply store as 50%. Likewise you can have absolute values like 30cm or 20in which are not knowable in pixels</span>
<span class="sd">    unless a PPI value is supplied. We can say .value(relative_length=30cm, PPI=96) and solve this for a value like</span>
<span class="sd">    12%. We can also convert values between knowable lengths. So 30cm is 300mm regardless whether we know how to</span>
<span class="sd">    convert this to pixels. 0% is 0 in any units or relative values. We can convert pixels to pc and pt without issue.</span>
<span class="sd">    We can convert vh, vw, vmax, vmin values if we know viewbox values. We can convert em values if we know the font_size.</span>
<span class="sd">    We can add values together if they are convertible units e.g. Length(&quot;20in&quot;) + Length(&quot;3cm&quot;).</span>

<span class="sd">    If .value() cannot solve for the value with the given information then it will return a Length value. If it can</span>
<span class="sd">    be solved it will return a float.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">return</span>
            <span class="n">s</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">REGEX_LENGTH</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__float__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pt&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">1.3333</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pc&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">16.0</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;%&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">100.0</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;%&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">100.0</span>
                <span class="k">return</span> <span class="bp">self</span>
        <span class="k">raise</span> <span class="ne">ValueError</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;px&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;px&quot;</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pt&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">1.3333</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pc&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">16.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pt&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;px&quot;</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">1.3333</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pc&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">12.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pc&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;px&quot;</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">16.0</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pt&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">12.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;cm&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;mm&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">10.0</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">0.393701</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;mm&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;cm&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">10.0</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">0.0393701</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;cm&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">0.393701</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;mm&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">0.0393701</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> units were not determined.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__copy__</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">amount</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">c</span>

    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__copy__</span><span class="p">()</span>
            <span class="n">c</span><span class="o">.</span><span class="n">amount</span> <span class="o">/=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="n">c</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
                <span class="n">q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span>
                <span class="k">return</span> <span class="n">q</span>  <span class="c1"># no units</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;px&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;px&quot;</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pt&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">1.3333</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pc&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">16.0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pt&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;px&quot;</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">1.3333</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pc&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">12.0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pc&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;px&quot;</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">16.0</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pt&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">12.0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;cm&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;mm&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">10.0</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">0.393701</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;mm&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;cm&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">10.0</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">0.0393701</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;cm&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">0.393701</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;mm&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">0.0393701</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="k">raise</span> <span class="ne">ValueError</span>

    <span class="fm">__floordiv__</span> <span class="o">=</span> <span class="fm">__truediv__</span>
    <span class="n">__div__</span> <span class="o">=</span> <span class="fm">__truediv__</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">amount</span> <span class="o">&lt;</span> <span class="mf">0.0</span>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">amount</span> <span class="o">&lt;=</span> <span class="mf">0.0</span>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">amount</span> <span class="o">&gt;</span> <span class="mf">0.0</span>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">amount</span> <span class="o">&gt;=</span> <span class="mf">0.0</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__copy__</span><span class="p">()</span>
        <span class="n">c</span> <span class="o">+=</span> <span class="n">other</span>
        <span class="k">return</span> <span class="n">c</span>

    <span class="fm">__radd__</span> <span class="o">=</span> <span class="fm">__add__</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">*=</span> <span class="n">other</span>
        <span class="k">return</span> <span class="n">c</span>

    <span class="k">def</span> <span class="nf">__rdiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">*=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span>
        <span class="k">return</span> <span class="n">c</span>

    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__copy__</span><span class="p">()</span>
        <span class="n">s</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="o">-</span><span class="n">s</span><span class="o">.</span><span class="n">amount</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="bp">self</span> <span class="o">+=</span> <span class="o">-</span><span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__copy__</span><span class="p">()</span>
        <span class="n">s</span> <span class="o">-=</span> <span class="n">other</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="n">other</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Length</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>

    <span class="fm">__rmul__</span> <span class="o">=</span> <span class="fm">__mul__</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Length(&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">SVG_VALUE_NONE</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_pixels</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">s</span> <span class="o">-</span> <span class="n">other</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">ERROR</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">other</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">o</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_pixels</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">s</span> <span class="o">-</span> <span class="n">o</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">ERROR</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_inches</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">o</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_inches</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">s</span> <span class="o">-</span> <span class="n">o</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">ERROR</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value_in_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span>

<div class="viewcode-block" id="Length.in_pixels"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Length.in_pixels">[docs]</a>    <span class="k">def</span> <span class="nf">in_pixels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;px&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pt&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">1.3333</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pc&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">16.0</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Length.in_inches"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Length.in_inches">[docs]</a>    <span class="k">def</span> <span class="nf">in_inches</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;mm&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">0.0393701</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;cm&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">0.393701</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Length.to_mm"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Length.to_mm">[docs]</a>    <span class="k">def</span> <span class="nf">to_mm</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ppi</span><span class="o">=</span><span class="n">DEFAULT_PPI</span><span class="p">,</span>
        <span class="n">relative_length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">font_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">font_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">viewbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
            <span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span>
            <span class="n">relative_length</span><span class="o">=</span><span class="n">relative_length</span><span class="p">,</span>
            <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
            <span class="n">font_height</span><span class="o">=</span><span class="n">font_height</span><span class="p">,</span>
            <span class="n">viewbox</span><span class="o">=</span><span class="n">viewbox</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">value</span> <span class="o">/</span> <span class="p">(</span><span class="n">ppi</span> <span class="o">*</span> <span class="mf">0.0393701</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Length</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">mm&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Length.to_cm"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Length.to_cm">[docs]</a>    <span class="k">def</span> <span class="nf">to_cm</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ppi</span><span class="o">=</span><span class="n">DEFAULT_PPI</span><span class="p">,</span>
        <span class="n">relative_length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">font_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">font_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">viewbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
            <span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span>
            <span class="n">relative_length</span><span class="o">=</span><span class="n">relative_length</span><span class="p">,</span>
            <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
            <span class="n">font_height</span><span class="o">=</span><span class="n">font_height</span><span class="p">,</span>
            <span class="n">viewbox</span><span class="o">=</span><span class="n">viewbox</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">value</span> <span class="o">/</span> <span class="p">(</span><span class="n">ppi</span> <span class="o">*</span> <span class="mf">0.393701</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Length</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">cm&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Length.to_inch"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Length.to_inch">[docs]</a>    <span class="k">def</span> <span class="nf">to_inch</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ppi</span><span class="o">=</span><span class="n">DEFAULT_PPI</span><span class="p">,</span>
        <span class="n">relative_length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">font_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">font_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">viewbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
            <span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span>
            <span class="n">relative_length</span><span class="o">=</span><span class="n">relative_length</span><span class="p">,</span>
            <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
            <span class="n">font_height</span><span class="o">=</span><span class="n">font_height</span><span class="p">,</span>
            <span class="n">viewbox</span><span class="o">=</span><span class="n">viewbox</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">value</span> <span class="o">/</span> <span class="n">ppi</span>
        <span class="k">return</span> <span class="n">Length</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">in&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Length.value"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Length.value">[docs]</a>    <span class="k">def</span> <span class="nf">value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ppi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">relative_length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">font_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">font_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">viewbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;%&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">relative_length</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="n">fraction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mf">100.0</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">relative_length</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
                <span class="k">return</span> <span class="n">fraction</span> <span class="o">*</span> <span class="n">relative_length</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">relative_length</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Length</span><span class="p">)):</span>
                <span class="n">length</span> <span class="o">=</span> <span class="n">relative_length</span> <span class="o">*</span> <span class="bp">self</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">length</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                        <span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span>
                        <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
                        <span class="n">font_height</span><span class="o">=</span><span class="n">font_height</span><span class="p">,</span>
                        <span class="n">viewbox</span><span class="o">=</span><span class="n">viewbox</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">return</span> <span class="n">length</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;mm&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ppi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="n">ppi</span> <span class="o">*</span> <span class="mf">0.0393701</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;cm&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ppi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="n">ppi</span> <span class="o">*</span> <span class="mf">0.393701</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ppi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="n">ppi</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;px&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pt&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">1.3333</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;pc&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="mf">16.0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;em&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">font_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">font_size</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;ex&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">font_height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">font_height</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;vw&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">viewbox</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">Viewbox</span><span class="p">(</span><span class="n">viewbox</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mf">100.0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;vh&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">viewbox</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">Viewbox</span><span class="p">(</span><span class="n">viewbox</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mf">100.0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;vmin&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">viewbox</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">Viewbox</span><span class="p">(</span><span class="n">viewbox</span><span class="p">)</span>
            <span class="n">m</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="n">m</span> <span class="o">/</span> <span class="mf">100.0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;vmax&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">viewbox</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">Viewbox</span><span class="p">(</span><span class="n">viewbox</span><span class="p">)</span>
            <span class="n">m</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="n">m</span> <span class="o">/</span> <span class="mf">100.0</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Length.str"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Length.str">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">str</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;n/a&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">units</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">amount</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%.12f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">s</span><span class="o">.</span><span class="n">amount</span>
                <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
                    <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="s2">&quot;&#39;</span><span class="si">%s%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%.12f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">s</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span></div></div>


<div class="viewcode-block" id="Color"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color">[docs]</a><span class="k">class</span> <span class="nc">Color</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SVG Color Parsing</span>
<span class="sd">    Parses different forms of defining colors.</span>

<span class="sd">    Including keyword: https://www.w3.org/TR/SVG11/types.html#ColorKeywords</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">arglen</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">arglen</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Color</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">value</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">v</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">arglen</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Color</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">value</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">v</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">arglen</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">arglen</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">/</span> <span class="mf">255.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;red&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">red</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;green&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">green</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;green&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;blue&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blue</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;blue&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;alpha&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;opacity&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;r&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">red</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;r&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;g&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">green</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;g&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;b&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blue</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;rgb&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;argb&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">argb</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;argb&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;rgba&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rgba</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;rgba&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;h&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hue</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;h&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;s&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">saturation</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;s&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;l&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lightness</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;l&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;hue&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hue</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;hue&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;saturation&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">saturation</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;saturation&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;lightness&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lightness</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;lightness&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__int__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hex</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Color(&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span> <span class="ow">is</span> <span class="n">other</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="n">first</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="n">second</span> <span class="o">=</span> <span class="n">other</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">second</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">second</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">second</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">second</span><span class="p">,</span> <span class="n">Color</span><span class="p">):</span>
            <span class="n">second</span> <span class="o">=</span> <span class="n">second</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="n">first</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">second</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">second</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">first</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">first</span> <span class="o">&amp;</span> <span class="mh">0xFFFFFFFF</span> <span class="o">==</span> <span class="n">second</span> <span class="o">&amp;</span> <span class="mh">0xFFFFFFFF</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Return opaque color.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">red</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">green</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>

<div class="viewcode-block" id="Color.rgb_to_int"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.rgb_to_int">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">rgb_to_int</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">opacity</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">opacity</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">crimp</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">crimp</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">crimp</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">opacity</span> <span class="o">*</span> <span class="mf">255.0</span><span class="p">))</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">crimp</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">&lt;&lt;=</span> <span class="mi">24</span>
        <span class="n">g</span> <span class="o">&lt;&lt;=</span> <span class="mi">16</span>
        <span class="n">b</span> <span class="o">&lt;&lt;=</span> <span class="mi">8</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">r</span> <span class="o">|</span> <span class="n">g</span> <span class="o">|</span> <span class="n">b</span> <span class="o">|</span> <span class="n">a</span>
        <span class="k">return</span> <span class="n">c</span></div>

<div class="viewcode-block" id="Color.hsl_to_int"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.hsl_to_int">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">hsl_to_int</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">hue_2_rgb</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">vh</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">vh</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">vh</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">vh</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">vh</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="mf">6.0</span> <span class="o">*</span> <span class="n">vh</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">v1</span> <span class="o">+</span> <span class="p">(</span><span class="n">v2</span> <span class="o">-</span> <span class="n">v1</span><span class="p">)</span> <span class="o">*</span> <span class="mf">6.0</span> <span class="o">*</span> <span class="n">vh</span>
            <span class="k">if</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">vh</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">v2</span>
            <span class="k">if</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">vh</span> <span class="o">&lt;</span> <span class="mf">2.0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">v1</span> <span class="o">+</span> <span class="p">(</span><span class="n">v2</span> <span class="o">-</span> <span class="n">v1</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="mf">2.0</span> <span class="o">/</span> <span class="mf">3.0</span><span class="p">)</span> <span class="o">-</span> <span class="n">vh</span><span class="p">)</span> <span class="o">*</span> <span class="mf">6.0</span>
            <span class="k">return</span> <span class="n">v1</span>

        <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="mf">255.0</span> <span class="o">*</span> <span class="n">l</span>
            <span class="n">g</span> <span class="o">=</span> <span class="mf">255.0</span> <span class="o">*</span> <span class="n">l</span>
            <span class="n">b</span> <span class="o">=</span> <span class="mf">255.0</span> <span class="o">*</span> <span class="n">l</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">:</span>
                <span class="n">v2</span> <span class="o">=</span> <span class="n">l</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">v2</span> <span class="o">=</span> <span class="p">(</span><span class="n">l</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">s</span> <span class="o">*</span> <span class="n">l</span><span class="p">)</span>
            <span class="n">v1</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">l</span> <span class="o">-</span> <span class="n">v2</span>
            <span class="n">r</span> <span class="o">=</span> <span class="mf">255.0</span> <span class="o">*</span> <span class="n">hue_2_rgb</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">h</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mf">3.0</span><span class="p">))</span>
            <span class="n">g</span> <span class="o">=</span> <span class="mf">255.0</span> <span class="o">*</span> <span class="n">hue_2_rgb</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="mf">255.0</span> <span class="o">*</span> <span class="n">hue_2_rgb</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">h</span> <span class="o">-</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mf">3.0</span><span class="p">))</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span></div>

<div class="viewcode-block" id="Color.parse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.parse">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="n">color_string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse SVG color, will return a set value.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">color_string</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">color_string</span> <span class="o">==</span> <span class="n">SVG_VALUE_NONE</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">REGEX_COLOR_HEX</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">color_string</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">parse_color_hex</span><span class="p">(</span><span class="n">color_string</span><span class="p">)</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">REGEX_COLOR_RGB</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">color_string</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">parse_color_rgb</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">groups</span><span class="p">())</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">REGEX_COLOR_RGB_PERCENT</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">color_string</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">parse_color_rgbp</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">groups</span><span class="p">())</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">REGEX_COLOR_HSL</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">color_string</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">parse_color_hsl</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">groups</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">parse_color_lookup</span><span class="p">(</span><span class="n">color_string</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color.parse_color_lookup"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.parse_color_lookup">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parse_color_lookup</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse SVG Color by Keyword on dictionary lookup&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;transparent&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;aliceblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">248</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;aliceblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">248</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;antiquewhite&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">235</span><span class="p">,</span> <span class="mi">215</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;aqua&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;aquamarine&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">127</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">212</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;azure&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;beige&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">245</span><span class="p">,</span> <span class="mi">245</span><span class="p">,</span> <span class="mi">220</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;bisque&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">228</span><span class="p">,</span> <span class="mi">196</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;black&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;blanchedalmond&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">235</span><span class="p">,</span> <span class="mi">205</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;blue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;blueviolet&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">138</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">226</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;brown&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">165</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;burlywood&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">222</span><span class="p">,</span> <span class="mi">184</span><span class="p">,</span> <span class="mi">135</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;cadetblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">95</span><span class="p">,</span> <span class="mi">158</span><span class="p">,</span> <span class="mi">160</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;chartreuse&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">127</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;chocolate&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">210</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;coral&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;cornflowerblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">149</span><span class="p">,</span> <span class="mi">237</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;cornsilk&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">248</span><span class="p">,</span> <span class="mi">220</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;crimson&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;cyan&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">139</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkcyan&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">139</span><span class="p">,</span> <span class="mi">139</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkgoldenrod&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">184</span><span class="p">,</span> <span class="mi">134</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkgray&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">169</span><span class="p">,</span> <span class="mi">169</span><span class="p">,</span> <span class="mi">169</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkgreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkgrey&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">169</span><span class="p">,</span> <span class="mi">169</span><span class="p">,</span> <span class="mi">169</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkkhaki&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">189</span><span class="p">,</span> <span class="mi">183</span><span class="p">,</span> <span class="mi">107</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkmagenta&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">139</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">139</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkolivegreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">85</span><span class="p">,</span> <span class="mi">107</span><span class="p">,</span> <span class="mi">47</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkorange&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkorchid&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">153</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">204</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkred&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">139</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darksalmon&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">233</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">122</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkseagreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">143</span><span class="p">,</span> <span class="mi">188</span><span class="p">,</span> <span class="mi">143</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkslateblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">72</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">139</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkslategray&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">47</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">79</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkslategrey&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">47</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">79</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkturquoise&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">206</span><span class="p">,</span> <span class="mi">209</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;darkviolet&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">148</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">211</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;deeppink&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">147</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;deepskyblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">191</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;dimgray&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">105</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">105</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;dimgrey&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">105</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">105</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;dodgerblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;firebrick&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">178</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">34</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;floralwhite&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">240</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;forestgreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">139</span><span class="p">,</span> <span class="mi">34</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;fuchsia&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;gainsboro&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">220</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;ghostwhite&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">248</span><span class="p">,</span> <span class="mi">248</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;gold&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">215</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;goldenrod&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">218</span><span class="p">,</span> <span class="mi">165</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;gray&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;grey&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;green&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;greenyellow&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">173</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">47</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;honeydew&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">240</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;hotpink&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;indianred&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">205</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="mi">92</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;indigo&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">130</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;ivory&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">240</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;khaki&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">230</span><span class="p">,</span> <span class="mi">140</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lavender&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">230</span><span class="p">,</span> <span class="mi">230</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lavenderblush&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">245</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lawngreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">124</span><span class="p">,</span> <span class="mi">252</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lemonchiffon&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">205</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">173</span><span class="p">,</span> <span class="mi">216</span><span class="p">,</span> <span class="mi">230</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightcoral&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightcyan&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">224</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightgoldenrodyellow&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">210</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightgray&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">211</span><span class="p">,</span> <span class="mi">211</span><span class="p">,</span> <span class="mi">211</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightgreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">144</span><span class="p">,</span> <span class="mi">238</span><span class="p">,</span> <span class="mi">144</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightgrey&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">211</span><span class="p">,</span> <span class="mi">211</span><span class="p">,</span> <span class="mi">211</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightpink&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">182</span><span class="p">,</span> <span class="mi">193</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightsalmon&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">122</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightseagreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">178</span><span class="p">,</span> <span class="mi">170</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightskyblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">135</span><span class="p">,</span> <span class="mi">206</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightslategray&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">119</span><span class="p">,</span> <span class="mi">136</span><span class="p">,</span> <span class="mi">153</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightslategrey&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">119</span><span class="p">,</span> <span class="mi">136</span><span class="p">,</span> <span class="mi">153</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightsteelblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">176</span><span class="p">,</span> <span class="mi">196</span><span class="p">,</span> <span class="mi">222</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lightyellow&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">224</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;lime&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;limegreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">205</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;linen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">230</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;magenta&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;maroon&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;mediumaquamarine&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="mi">205</span><span class="p">,</span> <span class="mi">170</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;mediumblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">205</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;mediumorchid&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">186</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">211</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;mediumpurple&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">147</span><span class="p">,</span> <span class="mi">112</span><span class="p">,</span> <span class="mi">219</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;mediumseagreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">179</span><span class="p">,</span> <span class="mi">113</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;mediumslateblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">104</span><span class="p">,</span> <span class="mi">238</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;mediumspringgreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">154</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;mediumturquoise&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">72</span><span class="p">,</span> <span class="mi">209</span><span class="p">,</span> <span class="mi">204</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;mediumvioletred&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">199</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">133</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;midnightblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">112</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;mintcream&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">245</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;mistyrose&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">228</span><span class="p">,</span> <span class="mi">225</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;moccasin&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">228</span><span class="p">,</span> <span class="mi">181</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;navajowhite&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">222</span><span class="p">,</span> <span class="mi">173</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;navy&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;oldlace&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">253</span><span class="p">,</span> <span class="mi">245</span><span class="p">,</span> <span class="mi">230</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;olive&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;olivedrab&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">107</span><span class="p">,</span> <span class="mi">142</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;orange&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">165</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;orangered&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">69</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;orchid&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">218</span><span class="p">,</span> <span class="mi">112</span><span class="p">,</span> <span class="mi">214</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;palegoldenrod&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">238</span><span class="p">,</span> <span class="mi">232</span><span class="p">,</span> <span class="mi">170</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;palegreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">152</span><span class="p">,</span> <span class="mi">251</span><span class="p">,</span> <span class="mi">152</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;paleturquoise&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">175</span><span class="p">,</span> <span class="mi">238</span><span class="p">,</span> <span class="mi">238</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;palevioletred&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">219</span><span class="p">,</span> <span class="mi">112</span><span class="p">,</span> <span class="mi">147</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;papayawhip&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">239</span><span class="p">,</span> <span class="mi">213</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;peachpuff&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">218</span><span class="p">,</span> <span class="mi">185</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;peru&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">205</span><span class="p">,</span> <span class="mi">133</span><span class="p">,</span> <span class="mi">63</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;pink&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">192</span><span class="p">,</span> <span class="mi">203</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;plum&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">221</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">221</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;powderblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">176</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">230</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;purple&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;red&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;rosybrown&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">188</span><span class="p">,</span> <span class="mi">143</span><span class="p">,</span> <span class="mi">143</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;royalblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">225</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;saddlebrown&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">139</span><span class="p">,</span> <span class="mi">69</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;salmon&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">114</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;sandybrown&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">244</span><span class="p">,</span> <span class="mi">164</span><span class="p">,</span> <span class="mi">96</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;seagreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">46</span><span class="p">,</span> <span class="mi">139</span><span class="p">,</span> <span class="mi">87</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;seashell&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">245</span><span class="p">,</span> <span class="mi">238</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;sienna&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;silver&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">192</span><span class="p">,</span> <span class="mi">192</span><span class="p">,</span> <span class="mi">192</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;skyblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">135</span><span class="p">,</span> <span class="mi">206</span><span class="p">,</span> <span class="mi">235</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;slateblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">106</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">205</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;slategray&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">112</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">144</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;slategrey&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">112</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">144</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;snow&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;springgreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">127</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;steelblue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;tan&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">210</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">140</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;teal&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;thistle&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">216</span><span class="p">,</span> <span class="mi">191</span><span class="p">,</span> <span class="mi">216</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;tomato&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">71</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;turquoise&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">208</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;violet&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">238</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">238</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;wheat&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">245</span><span class="p">,</span> <span class="mi">222</span><span class="p">,</span> <span class="mi">179</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;white&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;whitesmoke&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">245</span><span class="p">,</span> <span class="mi">245</span><span class="p">,</span> <span class="mi">245</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;yellow&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;yellowgreen&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">154</span><span class="p">,</span> <span class="mi">205</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color.parse_color_hex"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.parse_color_hex">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parse_color_hex</span><span class="p">(</span><span class="n">hex_string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse SVG Color by Hex String&quot;&quot;&quot;</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">hex_string</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">h</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">FF&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">h</span><span class="p">[:</span><span class="mi">6</span><span class="p">])</span>
            <span class="n">v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">v</span>
        <span class="k">elif</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">h</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">h</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">h</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">h</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">h</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">h</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">h</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">h</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}{0}{1}{1}{2}{2}</span><span class="s2">FF&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">h</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">h</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">h</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">v</span>
        <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color.parse_color_rgb"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.parse_color_rgb">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parse_color_rgb</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse SVG Color, RGB value declarations &quot;&quot;&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color.parse_color_rgbp"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.parse_color_rgbp">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parse_color_rgbp</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse SVG color, RGB percent value declarations&quot;&quot;&quot;</span>
        <span class="n">ratio</span> <span class="o">=</span> <span class="mf">255.0</span> <span class="o">/</span> <span class="mf">100.0</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="n">ratio</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="n">ratio</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span> <span class="n">ratio</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color.parse_color_hsl"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.parse_color_hsl">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parse_color_hsl</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse SVG color, HSL value declarations&quot;&quot;&quot;</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">as_turns</span>
        <span class="n">s</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mf">100.0</span>
        <span class="k">if</span> <span class="n">s</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">s</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">l</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mf">100.0</span>
        <span class="k">if</span> <span class="n">l</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">l</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">l</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">hsl_to_int</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color.distinct"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.distinct">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">distinct</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Produces a deterministic distinct color for the given index.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_pattern</span><span class="p">(</span><span class="n">pattern</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">pattern</span> <span class="o">**</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mf">3.0</span><span class="p">))</span>
            <span class="n">pattern</span> <span class="o">-=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span>
            <span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span>
            <span class="k">if</span> <span class="n">pattern</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">p</span>
            <span class="n">pattern</span> <span class="o">-=</span> <span class="mi">1</span>

            <span class="n">v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">pattern</span> <span class="o">%</span> <span class="mi">3</span><span class="p">)</span>
            <span class="n">pattern</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">pattern</span> <span class="o">//</span> <span class="mi">3</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pattern</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
                <span class="n">p</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">pattern</span> <span class="o">%</span> <span class="n">n</span>
                <span class="k">return</span> <span class="n">p</span>
            <span class="n">pattern</span> <span class="o">-=</span> <span class="n">n</span>

            <span class="n">p</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">pattern</span> <span class="o">//</span> <span class="n">n</span>
            <span class="n">v</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">p</span><span class="p">[</span><span class="n">v</span> <span class="o">%</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">pattern</span> <span class="o">%</span> <span class="n">n</span>
            <span class="k">return</span> <span class="n">p</span>

        <span class="k">def</span> <span class="nf">_8bit_reverse</span><span class="p">(</span><span class="n">r</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">r</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">v</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">):</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">v</span> <span class="o">|</span> <span class="p">(</span><span class="n">value</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">v</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span>
                <span class="n">value</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span>
            <span class="n">v</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">v</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">_pattern</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Color</span><span class="p">(</span>
            <span class="n">_8bit_reverse</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="n">_8bit_reverse</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
            <span class="n">_8bit_reverse</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
        <span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span>

    <span class="nd">@rgb</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rgb</span><span class="p">):</span>
        <span class="n">rgb</span> <span class="o">&lt;&lt;=</span> <span class="mi">8</span>
        <span class="n">rgb</span> <span class="o">|=</span> <span class="mh">0xFF</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">rgb</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rgba</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

    <span class="nd">@rgba</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">rgba</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rgba</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">rgba</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">argb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFFFFFF</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="p">)</span>

    <span class="nd">@argb</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">argb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">((</span><span class="n">argb</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFFFFFF00</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">argb</span> <span class="o">&gt;&gt;</span> <span class="mi">24</span> <span class="o">&amp;</span> <span class="mh">0xFF</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">/</span> <span class="mf">255.0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@opacity</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">opacity</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">opacity</span> <span class="o">*</span> <span class="mf">255.0</span><span class="p">))</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">crimp</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">a</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&amp;</span> <span class="mh">0xFF</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@alpha</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">crimp</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mh">0xFF</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">|=</span> <span class="n">a</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">red</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">24</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@red</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">red</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">crimp</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mh">0xFF000000</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">|=</span> <span class="n">r</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">green</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@green</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">green</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">g</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">crimp</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mh">0xFF0000</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">|=</span> <span class="n">g</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">blue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@blue</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">blue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">crimp</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mh">0xFF00</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">|=</span> <span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hexa</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="s2">&quot;#</span><span class="si">%02x%02x%02x%02x</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">red</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">green</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">blue</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hexrgb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="s2">&quot;#</span><span class="si">%02x%02x%02x</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">red</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">green</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">==</span> <span class="mh">0xFF</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hexrgb</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hexa</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">red</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">green</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">blue</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">var_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">var_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">delta_max</span> <span class="o">=</span> <span class="n">var_max</span> <span class="o">-</span> <span class="n">var_min</span>
        <span class="k">if</span> <span class="n">delta_max</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="n">dr</span> <span class="o">=</span> <span class="p">(((</span><span class="n">var_max</span> <span class="o">-</span> <span class="n">r</span><span class="p">)</span> <span class="o">/</span> <span class="mf">6.0</span><span class="p">)</span> <span class="o">+</span> <span class="n">delta_max</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">/</span> <span class="n">delta_max</span>
        <span class="n">dg</span> <span class="o">=</span> <span class="p">(((</span><span class="n">var_max</span> <span class="o">-</span> <span class="n">g</span><span class="p">)</span> <span class="o">/</span> <span class="mf">6.0</span><span class="p">)</span> <span class="o">+</span> <span class="n">delta_max</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">/</span> <span class="n">delta_max</span>
        <span class="n">db</span> <span class="o">=</span> <span class="p">(((</span><span class="n">var_max</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="mf">6.0</span><span class="p">)</span> <span class="o">+</span> <span class="n">delta_max</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">/</span> <span class="n">delta_max</span>
        <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="n">var_max</span><span class="p">:</span>
            <span class="n">h</span> <span class="o">=</span> <span class="n">db</span> <span class="o">-</span> <span class="n">dg</span>
        <span class="k">elif</span> <span class="n">g</span> <span class="o">==</span> <span class="n">var_max</span><span class="p">:</span>
            <span class="n">h</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mf">3.0</span><span class="p">)</span> <span class="o">+</span> <span class="n">dr</span> <span class="o">-</span> <span class="n">db</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># db == max_v</span>
            <span class="n">h</span> <span class="o">=</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">/</span> <span class="mf">3.0</span><span class="p">)</span> <span class="o">+</span> <span class="n">dg</span> <span class="o">-</span> <span class="n">dr</span>
        <span class="k">if</span> <span class="n">h</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">h</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">h</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">h</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="o">.</span><span class="n">turns</span><span class="p">(</span><span class="n">h</span><span class="p">)</span><span class="o">.</span><span class="n">as_degrees</span>

    <span class="nd">@hue</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">hue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hsl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hsl</span> <span class="o">=</span> <span class="n">v</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">l</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">saturation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">red</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">green</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">blue</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">min_v</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">max_v</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">max_v</span> <span class="o">-</span> <span class="n">min_v</span>
        <span class="k">if</span> <span class="n">max_v</span> <span class="o">==</span> <span class="n">min_v</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">max_v</span> <span class="o">+</span> <span class="n">min_v</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">delta</span> <span class="o">/</span> <span class="p">(</span><span class="n">max_v</span> <span class="o">+</span> <span class="n">min_v</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">delta</span> <span class="o">/</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">-</span> <span class="n">max_v</span> <span class="o">-</span> <span class="n">min_v</span><span class="p">)</span>

    <span class="nd">@saturation</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">saturation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hsl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hsl</span> <span class="o">=</span> <span class="n">h</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">l</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lightness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">red</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">green</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">blue</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">min_v</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">max_v</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">max_v</span> <span class="o">+</span> <span class="n">min_v</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>

    <span class="nd">@lightness</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">lightness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hsl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hsl</span> <span class="o">=</span> <span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">intensity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">red</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">green</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">blue</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">g</span><span class="p">)</span> <span class="o">/</span> <span class="mf">768.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">brightness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">red</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">green</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">blue</span>
        <span class="n">cmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cmax</span> <span class="o">/</span> <span class="mf">255.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">blackness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">brightness</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">luminance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">red</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">green</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">blue</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="k">return</span> <span class="n">r</span> <span class="o">*</span> <span class="mf">0.3</span> <span class="o">+</span> <span class="n">g</span> <span class="o">*</span> <span class="mf">0.59</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="mf">0.11</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">luma</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">red</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">green</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">blue</span> <span class="o">/</span> <span class="mf">255.0</span>
        <span class="k">return</span> <span class="n">r</span> <span class="o">*</span> <span class="mf">0.2126</span> <span class="o">+</span> <span class="n">g</span> <span class="o">*</span> <span class="mf">0.7152</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="mf">0.0722</span>

<div class="viewcode-block" id="Color.over"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.over">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">over</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Porter Duff Alpha compositing operation over.</span>
<span class="sd">        Returns c1 over c2. This is the standard painter algorithm.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">c1</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">c1</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">c2</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">c2</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">red</span>
        <span class="n">g1</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">green</span>
        <span class="n">b1</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">blue</span>
        <span class="n">a1</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">alpha</span>
        <span class="k">if</span> <span class="n">a1</span> <span class="o">==</span> <span class="mi">255</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">c1</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="n">a1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">c2</span><span class="o">.</span><span class="n">value</span>
        <span class="n">r2</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="n">red</span>
        <span class="n">g2</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="n">green</span>
        <span class="n">b2</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="n">blue</span>
        <span class="n">a2</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="n">alpha</span>

        <span class="n">q</span> <span class="o">=</span> <span class="mf">255.0</span> <span class="o">-</span> <span class="n">a1</span>

        <span class="n">sr</span> <span class="o">=</span> <span class="n">r1</span> <span class="o">*</span> <span class="n">a1</span> <span class="o">*</span> <span class="mf">255.0</span> <span class="o">+</span> <span class="n">r2</span> <span class="o">*</span> <span class="n">a2</span> <span class="o">*</span> <span class="n">q</span>
        <span class="n">sg</span> <span class="o">=</span> <span class="n">g1</span> <span class="o">*</span> <span class="n">a1</span> <span class="o">*</span> <span class="mf">255.0</span> <span class="o">+</span> <span class="n">g2</span> <span class="o">*</span> <span class="n">a2</span> <span class="o">*</span> <span class="n">q</span>
        <span class="n">sb</span> <span class="o">=</span> <span class="n">b1</span> <span class="o">*</span> <span class="n">a1</span> <span class="o">*</span> <span class="mf">255.0</span> <span class="o">+</span> <span class="n">b2</span> <span class="o">*</span> <span class="n">a2</span> <span class="o">*</span> <span class="n">q</span>
        <span class="n">sa</span> <span class="o">=</span> <span class="n">a1</span> <span class="o">*</span> <span class="mf">255.0</span> <span class="o">+</span> <span class="n">a2</span> <span class="o">*</span> <span class="n">q</span>
        <span class="n">sr</span> <span class="o">/=</span> <span class="n">sa</span>
        <span class="n">sg</span> <span class="o">/=</span> <span class="n">sa</span>
        <span class="n">sb</span> <span class="o">/=</span> <span class="n">sa</span>
        <span class="n">sa</span> <span class="o">/=</span> <span class="mf">255.0</span> <span class="o">*</span> <span class="mf">255.0</span>
        <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">rgb_to_int</span><span class="p">(</span><span class="n">sr</span><span class="p">,</span> <span class="n">sg</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">sa</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color.distance"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.distance">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">distance</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">distance_sq</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">))</span></div>

<div class="viewcode-block" id="Color.distance_sq"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.distance_sq">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">distance_sq</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function returns the square of colordistance. The square of the color distance will always be closer than the</span>
<span class="sd">        square of another color distance.</span>

<span class="sd">        Rather than naive Euclidean distance we use Compuphase&#39;s Redmean color distance.</span>
<span class="sd">        https://www.compuphase.com/cmetric.htm</span>

<span class="sd">        It&#39;s computationally simple, and empirical tests finds it to be on par with LabDE2000.</span>

<span class="sd">        :param c1: first color</span>
<span class="sd">        :param c2: second color</span>
<span class="sd">        :return: square of color distance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">c1</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">c1</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">c2</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">c2</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>
        <span class="n">red_mean</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">c1</span><span class="o">.</span><span class="n">red</span> <span class="o">+</span> <span class="n">c2</span><span class="o">.</span><span class="n">red</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">red</span> <span class="o">-</span> <span class="n">c2</span><span class="o">.</span><span class="n">red</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">green</span> <span class="o">-</span> <span class="n">c2</span><span class="o">.</span><span class="n">green</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">blue</span> <span class="o">-</span> <span class="n">c2</span><span class="o">.</span><span class="n">blue</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(((</span><span class="mi">512</span> <span class="o">+</span> <span class="n">red_mean</span><span class="p">)</span> <span class="o">*</span> <span class="n">r</span> <span class="o">*</span> <span class="n">r</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">g</span> <span class="o">*</span> <span class="n">g</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(((</span><span class="mi">767</span> <span class="o">-</span> <span class="n">red_mean</span><span class="p">)</span> <span class="o">*</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Color.crimp"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.crimp">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">crimp</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">255</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">255</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hsl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hue</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">saturation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lightness</span>

    <span class="nd">@hsl</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">hsl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="k">return</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">l</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">hsl_to_int</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

<div class="viewcode-block" id="Color.distance_to"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.distance_to">[docs]</a>    <span class="k">def</span> <span class="nf">distance_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Color</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color.blend"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Color.blend">[docs]</a>    <span class="k">def</span> <span class="nf">blend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Blends the given color with the current color.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">opacity</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="n">color</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="n">opacity</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Point"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point">[docs]</a><span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Point is a general subscriptable point class with .x and .y as well as [0] and [1]</span>

<span class="sd">    For compatibility with regebro svg.path we accept complex numbers as points x + yj,</span>
<span class="sd">    and provide .real and .imag as properties. As well as float and integer values as (v,0) elements.</span>

<span class="sd">    With regard to SVG 7.15.1 defining SVGPoint this class provides for matrix transformations.</span>

<span class="sd">    Points are only positions in real Euclidean space. This class is not intended to interact with</span>
<span class="sd">    the Length class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">string_x</span><span class="p">,</span> <span class="n">string_y</span> <span class="o">=</span> <span class="n">REGEX_COORD_PAIR</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">string_x</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">string_y</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">try</span><span class="p">:</span>  <span class="c1"># Try .x .y</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">y</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">x</span>
                <span class="k">return</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>  <span class="c1"># try subscription.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">return</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>  <span class="c1"># try .imag .real complex values.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">imag</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">real</span>
                <span class="k">return</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="c1"># Unknown.</span>
                <span class="k">raise</span> <span class="ne">TypeError</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">__key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Point</span><span class="p">):</span>
                <span class="n">other</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">ERROR</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">ERROR</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x_str</span> <span class="o">=</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">y_str</span> <span class="o">=</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Point(</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x_str</span><span class="p">,</span> <span class="n">y_str</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">x_str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%.12G</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">x_str</span><span class="p">:</span>
            <span class="n">x_str</span> <span class="o">=</span> <span class="n">x_str</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">y_str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%.12G</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">y_str</span><span class="p">:</span>
            <span class="n">y_str</span> <span class="o">=</span> <span class="n">y_str</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x_str</span><span class="p">,</span> <span class="n">y_str</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">point_in_matrix_space</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="nb">complex</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">imag</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="nb">complex</span><span class="p">(</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">imag</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="nb">complex</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">imag</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">point_in_matrix_space</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="nb">complex</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="nb">complex</span><span class="p">(</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="nb">complex</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">imag</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="fm">__rmul__</span> <span class="o">=</span> <span class="fm">__mul__</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">imag</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">real</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">imag</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="fm">__radd__</span> <span class="o">=</span> <span class="fm">__add__</span>

    <span class="k">def</span> <span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="n">other</span><span class="o">.</span><span class="n">real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">other</span><span class="o">.</span><span class="n">imag</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">real</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">imag</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">real</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">imag</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">other</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__complex__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="mi">1</span><span class="n">j</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">hypot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">r_raised</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">**</span> <span class="n">other</span>
        <span class="n">argz_multiplied</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argz</span><span class="p">()</span> <span class="o">*</span> <span class="n">other</span>

        <span class="n">real_part</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">r_raised</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">argz_multiplied</span><span class="p">))</span>
        <span class="n">imag_part</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">r_raised</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">argz_multiplied</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">real_part</span><span class="p">,</span> <span class="n">imag_part</span><span class="p">)</span>

<div class="viewcode-block" id="Point.conjugate"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.conjugate">[docs]</a>    <span class="k">def</span> <span class="nf">conjugate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Point.argz"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.argz">[docs]</a>    <span class="k">def</span> <span class="nf">argz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">atan</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imag</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">real</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">real</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Emulate svg.path use of complex numbers&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">imag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Emulate svg.path use of complex numbers&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>

<div class="viewcode-block" id="Point.matrix_transform"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.matrix_transform">[docs]</a>    <span class="k">def</span> <span class="nf">matrix_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="p">):</span>
        <span class="bp">self</span> <span class="o">*=</span> <span class="n">matrix</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Point.move_towards"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.move_towards">[docs]</a>    <span class="k">def</span> <span class="nf">move_towards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">Point</span><span class="p">):</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
        <span class="bp">self</span> <span class="o">+=</span> <span class="n">amount</span> <span class="o">*</span> <span class="p">(</span><span class="n">p2</span> <span class="o">-</span> <span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Point.distance_to"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.distance_to">[docs]</a>    <span class="k">def</span> <span class="nf">distance_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">p2</span><span class="p">)</span></div>

<div class="viewcode-block" id="Point.angle_to"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.angle_to">[docs]</a>    <span class="k">def</span> <span class="nf">angle_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">p2</span> <span class="o">-</span> <span class="bp">self</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">atan2</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">))</span></div>

<div class="viewcode-block" id="Point.polar_to"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.polar_to">[docs]</a>    <span class="k">def</span> <span class="nf">polar_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">Point</span><span class="o">.</span><span class="n">polar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Point.reflected_across"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.reflected_across">[docs]</a>    <span class="k">def</span> <span class="nf">reflected_across</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">p</span> <span class="o">+</span> <span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Point.orientation"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.orientation">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">orientation</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Determine the clockwise, linear, or counterclockwise orientation of the given points&quot;&quot;&quot;</span>
        <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">-</span> <span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">2</span></div>

<div class="viewcode-block" id="Point.convex_hull"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.convex_hull">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">convex_hull</span><span class="p">(</span><span class="n">pts</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">points</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">pts</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">first_point_on_hull</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">point_on_hull</span> <span class="o">=</span> <span class="n">first_point_on_hull</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">point_on_hull</span>
            <span class="n">endpoint</span> <span class="o">=</span> <span class="n">point_on_hull</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">point_on_hull</span> <span class="ow">is</span> <span class="n">endpoint</span>
                    <span class="ow">or</span> <span class="n">Point</span><span class="o">.</span><span class="n">orientation</span><span class="p">(</span><span class="n">point_on_hull</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="p">):</span>
                    <span class="n">endpoint</span> <span class="o">=</span> <span class="n">t</span>
            <span class="n">point_on_hull</span> <span class="o">=</span> <span class="n">endpoint</span>
            <span class="k">if</span> <span class="n">first_point_on_hull</span> <span class="ow">is</span> <span class="n">point_on_hull</span><span class="p">:</span>
                <span class="k">break</span></div>

<div class="viewcode-block" id="Point.distance"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.distance">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">distance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">dx</span> <span class="o">*=</span> <span class="n">dx</span>
        <span class="n">dy</span> <span class="o">*=</span> <span class="n">dy</span>
        <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span></div>

<div class="viewcode-block" id="Point.polar"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.polar">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">polar</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">*</span> <span class="n">r</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">*</span> <span class="n">r</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span></div>

<div class="viewcode-block" id="Point.angle"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.angle">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">angle</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">atan2</span><span class="p">(</span><span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span></div>

<div class="viewcode-block" id="Point.towards"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Point.towards">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">towards</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="n">tx</span> <span class="o">=</span> <span class="n">amount</span> <span class="o">*</span> <span class="p">(</span><span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">ty</span> <span class="o">=</span> <span class="n">amount</span> <span class="o">*</span> <span class="p">(</span><span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Angle"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Angle">[docs]</a><span class="k">class</span> <span class="nc">Angle</span><span class="p">(</span><span class="nb">float</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;CSS Angle defines as used in SVG/CSS&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Angle(</span><span class="si">%.12f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="c1"># Python 2</span>
        <span class="n">c1</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">((</span><span class="bp">self</span> <span class="o">%</span> <span class="n">tau</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">other</span> <span class="o">%</span> <span class="n">tau</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="mf">1e-11</span>
        <span class="k">return</span> <span class="n">c1</span>

<div class="viewcode-block" id="Angle.normalized"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Angle.normalized">[docs]</a>    <span class="k">def</span> <span class="nf">normalized</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span><span class="bp">self</span> <span class="o">%</span> <span class="n">tau</span><span class="p">)</span></div>

<div class="viewcode-block" id="Angle.parse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Angle.parse">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">angle_string</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">angle_string</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="n">angle_string</span> <span class="o">=</span> <span class="n">angle_string</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">angle_string</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;deg&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">angle_string</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">angle_string</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;grad&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="o">.</span><span class="n">gradians</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">angle_string</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">angle_string</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span>
            <span class="s2">&quot;rad&quot;</span>
        <span class="p">):</span>  <span class="c1"># Must be after &#39;grad&#39; since &#39;grad&#39; ends with &#39;rad&#39; too.</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">angle_string</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">angle_string</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;turn&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="o">.</span><span class="n">turns</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">angle_string</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">angle_string</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="o">.</span><span class="n">turns</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">angle_string</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">angle_string</span><span class="p">))</span></div>

<div class="viewcode-block" id="Angle.radians"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Angle.radians">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">radians</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">radians</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">radians</span><span class="p">)</span></div>

<div class="viewcode-block" id="Angle.degrees"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Angle.degrees">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">degrees</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">degrees</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">tau</span> <span class="o">*</span> <span class="n">degrees</span> <span class="o">/</span> <span class="mf">360.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Angle.gradians"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Angle.gradians">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">gradians</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">gradians</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">tau</span> <span class="o">*</span> <span class="n">gradians</span> <span class="o">/</span> <span class="mf">400.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Angle.turns"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Angle.turns">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">turns</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">turns</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">tau</span> <span class="o">*</span> <span class="n">turns</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">as_radians</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">as_degrees</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">*</span> <span class="mf">360.0</span> <span class="o">/</span> <span class="n">tau</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">as_positive_degrees</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_degrees</span>
        <span class="k">while</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">+=</span> <span class="mf">360.0</span>
        <span class="k">return</span> <span class="n">v</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">as_gradians</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">*</span> <span class="mf">400.0</span> <span class="o">/</span> <span class="n">tau</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">as_turns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">/</span> <span class="n">tau</span>

<div class="viewcode-block" id="Angle.is_orthogonal"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Angle.is_orthogonal">[docs]</a>    <span class="k">def</span> <span class="nf">is_orthogonal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span> <span class="o">%</span> <span class="p">(</span><span class="n">tau</span> <span class="o">/</span> <span class="mf">4.0</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span></div></div>


<div class="viewcode-block" id="Matrix"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix">[docs]</a><span class="k">class</span> <span class="nc">Matrix</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; &quot;</span>
<span class="sd">    Provides svg matrix interfacing.</span>

<span class="sd">    SVG 7.15.3 defines the matrix form as:</span>
<span class="sd">    [a c  e]</span>
<span class="sd">    [b d  f]</span>

<span class="sd">    While e and f are defined as floats, they can be for limited periods defined as a Length.</span>
<span class="sd">    With regard to CSS, it&#39;s reasonable to perform operations like &#39;transform(20cm, 20cm)&#39; and</span>
<span class="sd">    expect these to be treated consistently. Performing other matrix operations in a consistent</span>
<span class="sd">    way. However, render must be called to change these parameters into float locations prior to</span>
<span class="sd">    any operation which might be used to transform a point or polyline or path object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">components</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">len_args</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">components</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">len_args</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">len_args</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">a</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-12</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">b</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-12</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-12</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-12</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">e</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">e</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-12</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">f</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">f</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-12</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">6</span>

    <span class="k">def</span> <span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__copy__</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">inverse</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__matmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="fm">__imatmul__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="k">def</span> <span class="fm">__rmatmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="fm">__imatmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="k">def</span> <span class="fm">__imatmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">matrix_multiply</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">other</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="fm">__mul__</span> <span class="o">=</span> <span class="fm">__matmul__</span>
    <span class="fm">__rmul__</span> <span class="o">=</span> <span class="fm">__rmatmul__</span>
    <span class="fm">__imul__</span> <span class="o">=</span> <span class="fm">__imatmul__</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Matrix(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">),</span>
            <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">),</span>
            <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">),</span>
            <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">),</span>
            <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">e</span><span class="p">),</span>
            <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Matrix</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">)</span>

<div class="viewcode-block" id="Matrix.__str__"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Many of SVG&#39;s graphics operations utilize 2x3:</span>

<span class="sd">        :returns string representation of matrix.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">%3f</span><span class="s2">, </span><span class="si">%3f</span><span class="s2">,</span><span class="se">\n</span><span class="s2"> </span><span class="si">%3f</span><span class="s2">, </span><span class="si">%3f</span><span class="s2">,   </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">e</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.parse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transform_str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parses the svg transform string.</span>

<span class="sd">        Transforms from SVG 1.1 have a smaller complete set of operations. Whereas in SVG 2.0 they gain</span>
<span class="sd">        the CSS transforms and the additional functions and parsing that go with that. This parse is</span>
<span class="sd">        compatible with SVG 1.1 and the SVG 2.0 which includes the CSS 2d superset.</span>

<span class="sd">        CSS transforms have scalex() scaley() translatex(), translatey(), and skew() (deprecated).</span>
<span class="sd">        2D CSS angles haves units: &quot;deg&quot; tau / 360, &quot;rad&quot; tau/tau, &quot;grad&quot; tau/400, &quot;turn&quot; tau.</span>
<span class="sd">        2D CSS distances have length/percentages: &quot;px&quot;, &quot;cm&quot;, &quot;mm&quot;, &quot;in&quot;, &quot;pt&quot;, etc. (+|-)?d+%</span>

<span class="sd">        In the case of percentages there must be a known height and width to properly create a matrix out of that.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">transform_str</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">transform_str</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Must provide a string to parse&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">sub_element</span> <span class="ow">in</span> <span class="n">REGEX_TRANSFORM_TEMPLATE</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">transform_str</span><span class="o">.</span><span class="n">lower</span><span class="p">()):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">sub_element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">params</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">REGEX_TRANSFORM_PARAMETER</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">sub_element</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="n">mag</span> <span class="o">+</span> <span class="n">units</span> <span class="k">for</span> <span class="n">mag</span><span class="p">,</span> <span class="n">units</span> <span class="ow">in</span> <span class="n">params</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">SVG_TRANSFORM_MATRIX</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">params</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pre_cat</span><span class="p">(</span><span class="o">*</span><span class="n">params</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">SVG_TRANSFORM_TRANSLATE</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">x_param</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">y_param</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_translate</span><span class="p">(</span><span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_translate</span><span class="p">(</span><span class="n">x_param</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">SVG_TRANSFORM_TRANSLATE_X</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pre_translate</span><span class="p">(</span><span class="n">Length</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">SVG_TRANSFORM_TRANSLATE_Y</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pre_translate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Length</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>
            <span class="k">elif</span> <span class="n">SVG_TRANSFORM_SCALE</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">params</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pre_scale</span><span class="p">(</span><span class="o">*</span><span class="n">params</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">SVG_TRANSFORM_SCALE_X</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pre_scale</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">SVG_TRANSFORM_SCALE_Y</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pre_scale</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="k">elif</span> <span class="n">SVG_TRANSFORM_ROTATE</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">angle</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">x_param</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
                    <span class="k">continue</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">y_param</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">x_param</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">SVG_TRANSFORM_SKEW</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">angle_a</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">angle_b</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>  <span class="c1"># this isn&#39;t valid.</span>
                    <span class="k">continue</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">x_param</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_skew</span><span class="p">(</span><span class="n">angle_a</span><span class="p">,</span> <span class="n">angle_b</span><span class="p">)</span>
                    <span class="k">continue</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">y_param</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_skew</span><span class="p">(</span><span class="n">angle_a</span><span class="p">,</span> <span class="n">angle_b</span><span class="p">,</span> <span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_skew</span><span class="p">(</span><span class="n">angle_a</span><span class="p">,</span> <span class="n">angle_b</span><span class="p">,</span> <span class="n">x_param</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">SVG_TRANSFORM_SKEW_X</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">angle_a</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">x_param</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_skew_x</span><span class="p">(</span><span class="n">angle_a</span><span class="p">)</span>
                    <span class="k">continue</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">y_param</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_skew_x</span><span class="p">(</span><span class="n">angle_a</span><span class="p">,</span> <span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_skew_x</span><span class="p">(</span><span class="n">angle_a</span><span class="p">,</span> <span class="n">x_param</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">SVG_TRANSFORM_SKEW_Y</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">angle_b</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">x_param</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_skew_y</span><span class="p">(</span><span class="n">angle_b</span><span class="p">)</span>
                    <span class="k">continue</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">y_param</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_skew_y</span><span class="p">(</span><span class="n">angle_b</span><span class="p">,</span> <span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pre_skew_y</span><span class="p">(</span><span class="n">angle_b</span><span class="p">,</span> <span class="n">x_param</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Matrix.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ppi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">relative_length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">font_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">font_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">viewbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Provides values to turn trans_x and trans_y values into user units floats rather</span>
<span class="sd">        than Lengths by giving the required information to perform the conversions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">e</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">width</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">relative_length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">width</span> <span class="o">=</span> <span class="n">relative_length</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                <span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span>
                <span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
                <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
                <span class="n">font_height</span><span class="o">=</span><span class="n">font_height</span><span class="p">,</span>
                <span class="n">viewbox</span><span class="o">=</span><span class="n">viewbox</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">height</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">relative_length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">height</span> <span class="o">=</span> <span class="n">relative_length</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                <span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span>
                <span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
                <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
                <span class="n">font_height</span><span class="o">=</span><span class="n">font_height</span><span class="p">,</span>
                <span class="n">viewbox</span><span class="o">=</span><span class="n">viewbox</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">determinant</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>

<div class="viewcode-block" id="Matrix.value_trans_x"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.value_trans_x">[docs]</a>    <span class="k">def</span> <span class="nf">value_trans_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span></div>

<div class="viewcode-block" id="Matrix.value_trans_y"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.value_trans_y">[docs]</a>    <span class="k">def</span> <span class="nf">value_trans_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span></div>

<div class="viewcode-block" id="Matrix.value_scale_x"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.value_scale_x">[docs]</a>    <span class="k">def</span> <span class="nf">value_scale_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.value_scale_y"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.value_scale_y">[docs]</a>    <span class="k">def</span> <span class="nf">value_scale_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.value_skew_x"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.value_skew_x">[docs]</a>    <span class="k">def</span> <span class="nf">value_skew_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.value_skew_y"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.value_skew_y">[docs]</a>    <span class="k">def</span> <span class="nf">value_skew_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.reset"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Resets matrix to identity.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="mf">0.0</span></div>

<div class="viewcode-block" id="Matrix.inverse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.inverse">[docs]</a>    <span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        SVG Matrix:</span>
<span class="sd">        [a c e]</span>
<span class="sd">        [b d f]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m00</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>
        <span class="n">m01</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="n">m02</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span>
        <span class="n">m10</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>
        <span class="n">m11</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span>
        <span class="n">m12</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span>
        <span class="n">determinant</span> <span class="o">=</span> <span class="n">m00</span> <span class="o">*</span> <span class="n">m11</span> <span class="o">-</span> <span class="n">m01</span> <span class="o">*</span> <span class="n">m10</span>
        <span class="n">inverse_determinant</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">determinant</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">m11</span> <span class="o">*</span> <span class="n">inverse_determinant</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="n">m01</span> <span class="o">*</span> <span class="n">inverse_determinant</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="o">-</span><span class="n">m10</span> <span class="o">*</span> <span class="n">inverse_determinant</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="n">m00</span> <span class="o">*</span> <span class="n">inverse_determinant</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">=</span> <span class="p">(</span><span class="n">m01</span> <span class="o">*</span> <span class="n">m12</span> <span class="o">-</span> <span class="n">m02</span> <span class="o">*</span> <span class="n">m11</span><span class="p">)</span> <span class="o">*</span> <span class="n">inverse_determinant</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">m10</span> <span class="o">*</span> <span class="n">m02</span> <span class="o">-</span> <span class="n">m00</span> <span class="o">*</span> <span class="n">m12</span><span class="p">)</span> <span class="o">*</span> <span class="n">inverse_determinant</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Matrix.vector"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.vector">[docs]</a>    <span class="k">def</span> <span class="nf">vector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        provide the matrix suitable for multiplying vectors. This will be the matrix with the same rotation and scale</span>
<span class="sd">        aspects but with no translation. This matrix is for multiplying vector elements where the position doesn&#39;t</span>
<span class="sd">        matter but the scaling and rotation do.</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Matrix</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.is_identity"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.is_identity">[docs]</a>    <span class="k">def</span> <span class="nf">is_identity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">==</span> <span class="mi">1</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.post_cat"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.post_cat">[docs]</a>    <span class="k">def</span> <span class="nf">post_cat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">components</span><span class="p">):</span>
        <span class="n">mx</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="o">*</span><span class="n">components</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__imatmul__</span><span class="p">(</span><span class="n">mx</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.post_scale"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.post_scale">[docs]</a>    <span class="k">def</span> <span class="nf">post_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sx</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">sy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sy</span> <span class="o">=</span> <span class="n">sx</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">post_cat</span><span class="p">(</span><span class="n">Matrix</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">post_translate</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">post_scale</span><span class="p">(</span><span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">post_translate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.post_scale_x"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.post_scale_x">[docs]</a>    <span class="k">def</span> <span class="nf">post_scale_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sx</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">post_scale</span><span class="p">(</span><span class="n">sx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.post_scale_y"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.post_scale_y">[docs]</a>    <span class="k">def</span> <span class="nf">post_scale_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sy</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">post_scale</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.post_translate"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.post_translate">[docs]</a>    <span class="k">def</span> <span class="nf">post_translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tx</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ty</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">post_cat</span><span class="p">(</span><span class="n">Matrix</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">))</span></div>

<div class="viewcode-block" id="Matrix.post_translate_x"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.post_translate_x">[docs]</a>    <span class="k">def</span> <span class="nf">post_translate_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tx</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">post_translate</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.post_translate_y"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.post_translate_y">[docs]</a>    <span class="k">def</span> <span class="nf">post_translate_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ty</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">post_translate</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.post_rotate"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.post_rotate">[docs]</a>    <span class="k">def</span> <span class="nf">post_rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">post_cat</span><span class="p">(</span><span class="n">Matrix</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>  <span class="c1"># self %= self.get_rotate(theta)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">matrix</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">()</span>
            <span class="n">matrix</span><span class="o">.</span><span class="n">post_translate</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">)</span>
            <span class="n">matrix</span><span class="o">.</span><span class="n">post_cat</span><span class="p">(</span><span class="n">Matrix</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
            <span class="n">matrix</span><span class="o">.</span><span class="n">post_translate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">post_cat</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.post_skew"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.post_skew">[docs]</a>    <span class="k">def</span> <span class="nf">post_skew</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle_a</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">angle_b</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">post_cat</span><span class="p">(</span><span class="n">Matrix</span><span class="o">.</span><span class="n">skew</span><span class="p">(</span><span class="n">angle_a</span><span class="p">,</span> <span class="n">angle_b</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">post_translate</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">post_skew</span><span class="p">(</span><span class="n">angle_a</span><span class="p">,</span> <span class="n">angle_b</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">post_translate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.post_skew_x"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.post_skew_x">[docs]</a>    <span class="k">def</span> <span class="nf">post_skew_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle_a</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">post_skew</span><span class="p">(</span><span class="n">angle_a</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.post_skew_y"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.post_skew_y">[docs]</a>    <span class="k">def</span> <span class="nf">post_skew_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle_b</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">post_skew</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">angle_b</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.pre_cat"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.pre_cat">[docs]</a>    <span class="k">def</span> <span class="nf">pre_cat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">components</span><span class="p">):</span>
        <span class="n">mx</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="o">*</span><span class="n">components</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">matrix_multiply</span><span class="p">(</span>
            <span class="n">mx</span><span class="p">,</span> <span class="bp">self</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.pre_scale"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.pre_scale">[docs]</a>    <span class="k">def</span> <span class="nf">pre_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sx</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">sy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sy</span> <span class="o">=</span> <span class="n">sx</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_cat</span><span class="p">(</span><span class="n">Matrix</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_translate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_scale</span><span class="p">(</span><span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_translate</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.pre_scale_x"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.pre_scale_x">[docs]</a>    <span class="k">def</span> <span class="nf">pre_scale_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sx</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_scale</span><span class="p">(</span><span class="n">sx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.pre_scale_y"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.pre_scale_y">[docs]</a>    <span class="k">def</span> <span class="nf">pre_scale_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sy</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_scale</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.pre_translate"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.pre_translate">[docs]</a>    <span class="k">def</span> <span class="nf">pre_translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tx</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ty</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_cat</span><span class="p">(</span><span class="n">Matrix</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">))</span></div>

<div class="viewcode-block" id="Matrix.pre_translate_x"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.pre_translate_x">[docs]</a>    <span class="k">def</span> <span class="nf">pre_translate_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tx</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_translate</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.pre_translate_y"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.pre_translate_y">[docs]</a>    <span class="k">def</span> <span class="nf">pre_translate_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ty</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_translate</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.pre_rotate"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.pre_rotate">[docs]</a>    <span class="k">def</span> <span class="nf">pre_rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_cat</span><span class="p">(</span><span class="n">Matrix</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_translate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_translate</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.pre_skew"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.pre_skew">[docs]</a>    <span class="k">def</span> <span class="nf">pre_skew</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle_a</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">angle_b</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_cat</span><span class="p">(</span><span class="n">Matrix</span><span class="o">.</span><span class="n">skew</span><span class="p">(</span><span class="n">angle_a</span><span class="p">,</span> <span class="n">angle_b</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_translate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_skew</span><span class="p">(</span><span class="n">angle_a</span><span class="p">,</span> <span class="n">angle_b</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_translate</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.pre_skew_x"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.pre_skew_x">[docs]</a>    <span class="k">def</span> <span class="nf">pre_skew_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle_a</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_skew</span><span class="p">(</span><span class="n">angle_a</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.pre_skew_y"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.pre_skew_y">[docs]</a>    <span class="k">def</span> <span class="nf">pre_skew_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle_b</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_skew</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">angle_b</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.point_in_inverse_space"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.point_in_inverse_space">[docs]</a>    <span class="k">def</span> <span class="nf">point_in_inverse_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v0</span><span class="p">):</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">inverse</span><span class="o">.</span><span class="n">inverse</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">inverse</span><span class="o">.</span><span class="n">point_in_matrix_space</span><span class="p">(</span><span class="n">v0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.point_in_matrix_space"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.point_in_matrix_space">[docs]</a>    <span class="k">def</span> <span class="nf">point_in_matrix_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v0</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span>
            <span class="n">v0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">v0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span><span class="p">,</span>
            <span class="n">v0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">+</span> <span class="n">v0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.transform_point"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.transform_point">[docs]</a>    <span class="k">def</span> <span class="nf">transform_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="n">nx</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span>
        <span class="n">ny</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">+</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span>
        <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">nx</span>
        <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">ny</span>
        <span class="k">return</span> <span class="n">v</span></div>

<div class="viewcode-block" id="Matrix.transform_vector"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.transform_vector">[docs]</a>    <span class="k">def</span> <span class="nf">transform_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Applies the transformation without the translation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nx</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="n">ny</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">+</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span>
        <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">nx</span>
        <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">ny</span>
        <span class="k">return</span> <span class="n">v</span></div>

<div class="viewcode-block" id="Matrix.scale"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.scale">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">sx</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">sy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sy</span> <span class="o">=</span> <span class="n">sx</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">sx</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.scale_x"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.scale_x">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">scale_x</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">sx</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">sx</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.scale_y"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.scale_y">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">scale_y</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">sy</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">sy</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.translate"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.translate">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tx</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ty</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;SVG Matrix:</span>
<span class="sd">        [a c e]</span>
<span class="sd">        [b d f]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.translate_x"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.translate_x">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">translate_x</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tx</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.translate_y"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.translate_y">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">translate_y</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">ty</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.rotate"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.rotate">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="n">st</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">st</span><span class="p">,</span> <span class="o">-</span><span class="n">st</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.skew"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.skew">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">skew</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">angle_a</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">angle_b</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="n">aa</span> <span class="o">=</span> <span class="n">tan</span><span class="p">(</span><span class="n">angle_a</span><span class="p">)</span>
        <span class="n">bb</span> <span class="o">=</span> <span class="n">tan</span><span class="p">(</span><span class="n">angle_b</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">bb</span><span class="p">,</span> <span class="n">aa</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.skew_x"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.skew_x">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">skew_x</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">skew</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.skew_y"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.skew_y">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">skew_y</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">skew</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">angle</span><span class="p">)</span></div>

<div class="viewcode-block" id="Matrix.identity"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.identity">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">identity</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        1, 0, 0,</span>
<span class="sd">        0, 1, 0,</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">()</span></div>

<div class="viewcode-block" id="Matrix.matrix_multiply"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Matrix.matrix_multiply">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">matrix_multiply</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        [a c e]      [a c e]   [a b 0]</span>
<span class="sd">        [b d f]   %  [b d f] = [c d 0]</span>
<span class="sd">        [0 0 1]      [0 0 1]   [e f 1]</span>

<span class="sd">        :param m: matrix operand</span>
<span class="sd">        :param s: matrix operand</span>
<span class="sd">        :return: multiplied matrix.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r0</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">s</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">c</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">b</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">e</span> <span class="o">*</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">s</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">c</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">c</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">d</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">e</span> <span class="o">*</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">s</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">e</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">c</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">f</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">e</span> <span class="o">*</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">r1</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">s</span><span class="o">.</span><span class="n">b</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">b</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">f</span> <span class="o">*</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">s</span><span class="o">.</span><span class="n">b</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">c</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">d</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">f</span> <span class="o">*</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">s</span><span class="o">.</span><span class="n">b</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">e</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">f</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">f</span> <span class="o">*</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">r0</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">r1</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">r0</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">r1</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">r0</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">r1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span></div></div>


<div class="viewcode-block" id="Viewbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Viewbox">[docs]</a><span class="k">class</span> <span class="nc">Viewbox</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Viewbox controls the scaling between the drawing size view that is observing that drawing.</span>

<span class="sd">        :param viewbox: either values or viewbox attribute or a Viewbox object</span>
<span class="sd">        :param preserveAspectRatio or preserve_aspect_ratio: preserveAspectRatio</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">viewbox</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">viewbox</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="n">viewbox</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">viewbox</span><span class="p">,</span> <span class="n">Viewbox</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="n">viewbox</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_viewbox</span><span class="p">(</span><span class="n">viewbox</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Viewbox</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">width</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">height</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">),</span>
            <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">),</span>
            <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">),</span>
            <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_X</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_Y</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_WIDTH</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_HEIGHT</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Viewbox(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">params</span>

<div class="viewcode-block" id="Viewbox.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Viewbox.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span></div>

<div class="viewcode-block" id="Viewbox.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Viewbox.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">SVG_ATTR_VIEWBOX</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_viewbox</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_VIEWBOX</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">SVG_ATTR_X</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_X</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">SVG_ATTR_Y</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_Y</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">SVG_ATTR_WIDTH</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_WIDTH</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">SVG_ATTR_HEIGHT</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_HEIGHT</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;preserve_aspect_ratio&quot;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;preserve_aspect_ratio&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span><span class="p">]</span></div>

<div class="viewcode-block" id="Viewbox.set_viewbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Viewbox.set_viewbox">[docs]</a>    <span class="k">def</span> <span class="nf">set_viewbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">viewbox</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">viewbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dims</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">REGEX_FLOAT</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">viewbox</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">pass</span></div>

<div class="viewcode-block" id="Viewbox.transform"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Viewbox.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Viewbox</span><span class="o">.</span><span class="n">viewbox_transform</span><span class="p">(</span>
            <span class="n">element</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
            <span class="n">element</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
            <span class="n">element</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
            <span class="n">element</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Viewbox.viewbox_transform"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Viewbox.viewbox_transform">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">viewbox_transform</span><span class="p">(</span>
        <span class="n">e_x</span><span class="p">,</span> <span class="n">e_y</span><span class="p">,</span> <span class="n">e_width</span><span class="p">,</span> <span class="n">e_height</span><span class="p">,</span> <span class="n">vb_x</span><span class="p">,</span> <span class="n">vb_y</span><span class="p">,</span> <span class="n">vb_width</span><span class="p">,</span> <span class="n">vb_height</span><span class="p">,</span> <span class="n">aspect</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        SVG 1.1 7.2, SVG 2.0 8.2 equivalent transform of an SVG viewport.</span>
<span class="sd">        With regards to https://github.com/w3c/svgwg/issues/215 use 8.2 version.</span>

<span class="sd">        It creates transform commands equal to that viewport expected.</span>

<span class="sd">        Let e-x, e-y, e-width, e-height be the position and size of the element respectively.</span>
<span class="sd">        Let vb-x, vb-y, vb-width, vb-height be the min-x, min-y, width and height values of the viewBox attribute</span>
<span class="sd">        respectively.</span>

<span class="sd">        Let align be the align value of preserveAspectRatio, or &#39;xMidYMid&#39; if preserveAspectRatio is not defined.</span>
<span class="sd">        Let meetOrSlice be the meetOrSlice value of preserveAspectRatio, or &#39;meet&#39; if preserveAspectRatio is not defined</span>
<span class="sd">        or if meetOrSlice is missing from this value.</span>

<span class="sd">        :param e_x: element_x value</span>
<span class="sd">        :param e_y: element_y value</span>
<span class="sd">        :param e_width: element_width value</span>
<span class="sd">        :param e_height: element_height value</span>
<span class="sd">        :param vb_x: viewbox_x value</span>
<span class="sd">        :param vb_y: viewbox_y value</span>
<span class="sd">        :param vb_width: viewbox_width value</span>
<span class="sd">        :param vb_height: viewbox_height value</span>
<span class="sd">        :param aspect: preserve aspect ratio value</span>
<span class="sd">        :return: string of the SVG transform commands to account for the viewbox.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">e_x</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="n">e_y</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="n">e_width</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="n">e_height</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="n">vb_x</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="n">vb_y</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="n">vb_width</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="n">vb_height</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">aspect</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">aspect_slice</span> <span class="o">=</span> <span class="n">aspect</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">align</span> <span class="o">=</span> <span class="n">aspect_slice</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="n">align</span> <span class="o">=</span> <span class="s2">&quot;xMidyMid&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">meet_or_slice</span> <span class="o">=</span> <span class="n">aspect_slice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="n">meet_or_slice</span> <span class="o">=</span> <span class="s2">&quot;meet&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">align</span> <span class="o">=</span> <span class="s2">&quot;xMidyMid&quot;</span>
            <span class="n">meet_or_slice</span> <span class="o">=</span> <span class="s2">&quot;meet&quot;</span>
        <span class="c1"># Initialize scale-x to e-width/vb-width.</span>
        <span class="n">scale_x</span> <span class="o">=</span> <span class="n">e_width</span> <span class="o">/</span> <span class="n">vb_width</span>
        <span class="c1"># Initialize scale-y to e-height/vb-height.</span>
        <span class="n">scale_y</span> <span class="o">=</span> <span class="n">e_height</span> <span class="o">/</span> <span class="n">vb_height</span>

        <span class="c1"># If align is not &#39;none&#39; and meetOrSlice is &#39;meet&#39;, set the larger of</span>
        <span class="c1"># scale-x and scale-y to the smaller.</span>
        <span class="k">if</span> <span class="n">align</span> <span class="o">!=</span> <span class="n">SVG_VALUE_NONE</span> <span class="ow">and</span> <span class="n">meet_or_slice</span> <span class="o">==</span> <span class="s2">&quot;meet&quot;</span><span class="p">:</span>
            <span class="n">scale_x</span> <span class="o">=</span> <span class="n">scale_y</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">scale_x</span><span class="p">,</span> <span class="n">scale_y</span><span class="p">)</span>
        <span class="c1"># Otherwise, if align is not &#39;none&#39; and meetOrSlice is &#39;slice&#39;, set the</span>
        <span class="c1"># smaller of scale-x and scale-y to the larger</span>
        <span class="k">elif</span> <span class="n">align</span> <span class="o">!=</span> <span class="n">SVG_VALUE_NONE</span> <span class="ow">and</span> <span class="n">meet_or_slice</span> <span class="o">==</span> <span class="s2">&quot;slice&quot;</span><span class="p">:</span>
            <span class="n">scale_x</span> <span class="o">=</span> <span class="n">scale_y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">scale_x</span><span class="p">,</span> <span class="n">scale_y</span><span class="p">)</span>
        <span class="c1"># Initialize translate-x to e-x - (vb-x * scale-x).</span>
        <span class="n">translate_x</span> <span class="o">=</span> <span class="n">e_x</span> <span class="o">-</span> <span class="p">(</span><span class="n">vb_x</span> <span class="o">*</span> <span class="n">scale_x</span><span class="p">)</span>
        <span class="c1"># Initialize translate-y to e-y - (vb-y * scale-y)</span>
        <span class="n">translate_y</span> <span class="o">=</span> <span class="n">e_y</span> <span class="o">-</span> <span class="p">(</span><span class="n">vb_y</span> <span class="o">*</span> <span class="n">scale_y</span><span class="p">)</span>
        <span class="c1"># If align contains &#39;xMid&#39;, add (e-width - vb-width * scale-x) / 2 to translate-x.</span>
        <span class="n">align</span> <span class="o">=</span> <span class="n">align</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;xmid&quot;</span> <span class="ow">in</span> <span class="n">align</span><span class="p">:</span>
            <span class="n">translate_x</span> <span class="o">+=</span> <span class="p">(</span><span class="n">e_width</span> <span class="o">-</span> <span class="n">vb_width</span> <span class="o">*</span> <span class="n">scale_x</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="c1"># If align contains &#39;xMax&#39;, add (e-width - vb-width * scale-x) to translate-x.</span>
        <span class="k">if</span> <span class="s2">&quot;xmax&quot;</span> <span class="ow">in</span> <span class="n">align</span><span class="p">:</span>
            <span class="n">translate_x</span> <span class="o">+=</span> <span class="n">e_width</span> <span class="o">-</span> <span class="n">vb_width</span> <span class="o">*</span> <span class="n">scale_x</span>
        <span class="c1"># If align contains &#39;yMid&#39;, add (e-height - vb-height * scale-y) / 2 to translate-y.</span>
        <span class="k">if</span> <span class="s2">&quot;ymid&quot;</span> <span class="ow">in</span> <span class="n">align</span><span class="p">:</span>
            <span class="n">translate_y</span> <span class="o">+=</span> <span class="p">(</span><span class="n">e_height</span> <span class="o">-</span> <span class="n">vb_height</span> <span class="o">*</span> <span class="n">scale_y</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="c1"># If align contains &#39;yMax&#39;, add (e-height - vb-height * scale-y) to translate-y.</span>
        <span class="k">if</span> <span class="s2">&quot;ymax&quot;</span> <span class="ow">in</span> <span class="n">align</span><span class="p">:</span>
            <span class="n">translate_y</span> <span class="o">+=</span> <span class="n">e_height</span> <span class="o">-</span> <span class="n">vb_height</span> <span class="o">*</span> <span class="n">scale_y</span>
        <span class="c1"># The transform applied to content contained by the element is given by:</span>
        <span class="c1"># translate(translate-x, translate-y) scale(scale-x, scale-y)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scale_x</span><span class="p">,</span> <span class="n">Length</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scale_y</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="k">if</span> <span class="n">translate_x</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">translate_y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">scale_x</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">scale_y</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># Nothing happens.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;scale(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">scale_x</span><span class="p">),</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">scale_y</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">scale_x</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">scale_y</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;translate(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">translate_x</span><span class="p">),</span>
                    <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">translate_y</span><span class="p">),</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;translate(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">) scale(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">translate_x</span><span class="p">),</span>
                    <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">translate_y</span><span class="p">),</span>
                    <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">scale_x</span><span class="p">),</span>
                    <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">scale_y</span><span class="p">),</span>
                <span class="p">)</span></div></div>


<div class="viewcode-block" id="SVGElement"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGElement">[docs]</a><span class="k">class</span> <span class="nc">SVGElement</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Any element within the SVG namespace.</span>

<span class="sd">    if args[0] is a dict or SVGElement class the value is used to seed the values.</span>
<span class="sd">    Else, the values consist of the kwargs used. The priority is such that kwargs</span>
<span class="sd">    will overwrite any previously set value.</span>

<span class="sd">    If additional args exist these will be passed to property_by_args</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">SVGElement</span><span class="p">):</span>
                <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">property_by_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">property_by_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>

<div class="viewcode-block" id="SVGElement.property_by_args"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGElement.property_by_args">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="SVGElement.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGElement.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">values</span><span class="p">)</span></div>

<div class="viewcode-block" id="SVGElement.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGElement.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_ID</span><span class="p">)</span></div>

<div class="viewcode-block" id="SVGElement.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGElement.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Render changes any length/percent values or attributes into real usable limits if</span>
<span class="sd">        given the information required to change such parameters.</span>

<span class="sd">        :param kwargs: various other properties to be rendered with.</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="SVGElement.set"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVGElement.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="bp">self</span></div></div>


<div class="viewcode-block" id="Transformable"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Transformable">[docs]</a><span class="k">class</span> <span class="nc">Transformable</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Any element that is transformable and has a transform property.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lengths</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="Transformable.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Transformable.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">transform</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">apply</span></div>

<div class="viewcode-block" id="Transformable.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Transformable.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;apply&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">Matrix</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="n">n</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="fm">__rmul__</span> <span class="o">=</span> <span class="fm">__mul__</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">*=</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span>

<div class="viewcode-block" id="Transformable.__abs__"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Transformable.__abs__">[docs]</a>    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The absolute value is taken to be the actual shape transformed.</span>
<span class="sd">        :return: transformed version of the given shape.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">reify</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">m</span></div>

<div class="viewcode-block" id="Transformable.reify"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Transformable.reify">[docs]</a>    <span class="k">def</span> <span class="nf">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Realizes the transform to the attributes. Such that the attributes become actualized and the transform</span>
<span class="sd">        simplifies towards the identity matrix. In many cases it will become the identity matrix. In other cases the</span>
<span class="sd">        transformed shape cannot be represented through the properties alone. And shall keep those parts of the</span>
<span class="sd">        transform required preserve equivalency.</span>

<span class="sd">        The default method will be called by submethods but will only scale properties like stroke_width which should</span>
<span class="sd">        scale with the transform.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lengths</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Transformable.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Transformable.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the transformable by performing any required length conversion operations into pixels. The element</span>
<span class="sd">        will be the pixel-length form.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Transformable.bbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Transformable.bbox">[docs]</a>    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_stroke</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the bounding box of the given object.</span>

<span class="sd">        :param transformed: whether this is the transformed bounds or default.</span>
<span class="sd">        :param with_stroke: should the stroke-width be included in the bounds.</span>
<span class="sd">        :return: bounding box of the given element</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">prx</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">prx</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">origin</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">origin</span><span class="o">.</span><span class="n">angle_to</span><span class="p">(</span><span class="n">prx</span><span class="p">)</span></div>


<div class="viewcode-block" id="GraphicObject"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.GraphicObject">[docs]</a><span class="k">class</span> <span class="nc">GraphicObject</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Any drawn element.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="GraphicObject.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.GraphicObject.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">fill</span><span class="p">)</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">fill</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">stroke</span><span class="p">)</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">stroke</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">Length</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">stroke_width</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">stroke_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="GraphicObject.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.GraphicObject.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">stroke</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_STROKE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">stroke</span><span class="p">)</span> <span class="k">if</span> <span class="n">stroke</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">stroke_opacity</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;stroke_opacity&quot;</span><span class="p">)</span>
        <span class="n">stroke_opacity</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_STROKE_OPACITY</span><span class="p">,</span> <span class="n">stroke_opacity</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">stroke_opacity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">stroke_opacity</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="n">fill</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_FILL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">fill</span><span class="p">)</span> <span class="k">if</span> <span class="n">fill</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">fill_opacity</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;fill_opacity&quot;</span><span class="p">)</span>
        <span class="n">fill_opacity</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_FILL_OPACITY</span><span class="p">,</span> <span class="n">fill_opacity</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">fill_opacity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">fill_opacity</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;stroke_width&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span>
            <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_STROKE_WIDTH</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span></div>

<div class="viewcode-block" id="GraphicObject.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.GraphicObject.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative_length&quot;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                <span class="n">relative_length</span><span class="o">=</span><span class="n">sqrt</span><span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="n">width</span> <span class="o">+</span> <span class="n">height</span> <span class="o">*</span> <span class="n">height</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span></div>
            <span class="c1"># A percentage stroke_width is always computed as a percentage of the</span>
            <span class="c1"># normalized viewBox diagonal length.</span>

<div class="viewcode-block" id="GraphicObject.reify"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.GraphicObject.reify">[docs]</a>    <span class="k">def</span> <span class="nf">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Realizes the transform to the attributes. Such that the attributes become actualized and the transform</span>
<span class="sd">        simplifies towards the identity matrix. In many cases it will become the identity matrix. In other cases the</span>
<span class="sd">        transformed shape cannot be represented through the properties alone. And shall keep those parts of the</span>
<span class="sd">        transform required preserve equivalency.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_stroke_width</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_stroke_width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">SVG_ATTR_VECTOR_EFFECT</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span>
                    <span class="ow">and</span> <span class="n">SVG_VALUE_NON_SCALING_STROKE</span>
                    <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_VECTOR_EFFECT</span><span class="p">]</span>
                <span class="p">):</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span>  <span class="c1"># we are not to scale the stroke.</span>
                <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span>
                <span class="n">det</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">determinant</span>
                <span class="k">return</span> <span class="n">width</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">det</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span>

<div class="viewcode-block" id="GraphicObject.is_degenerate"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.GraphicObject.is_degenerate">[docs]</a>    <span class="k">def</span> <span class="nf">is_degenerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span></div></div>


<div class="viewcode-block" id="Shape"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape">[docs]</a><span class="k">class</span> <span class="nc">Shape</span><span class="p">(</span><span class="n">SVGElement</span><span class="p">,</span> <span class="n">GraphicObject</span><span class="p">,</span> <span class="n">Transformable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SVG Shapes are several SVG items defined in SVG 1.1 9.1</span>
<span class="sd">    https://www.w3.org/TR/SVG11/shapes.html</span>

<span class="sd">    These shapes are circle, ellipse, line, polyline, polygon, and path.</span>

<span class="sd">    All shapes have methods:</span>
<span class="sd">    d(relative, transform): provides path_d string for the shape.</span>
<span class="sd">    reify(): Applies transform of the shape to modify the shape attributes.</span>
<span class="sd">    render(): Ensure that the shape properties have real space values.</span>
<span class="sd">    bbox(transformed): Provides the bounding box for the given shape.</span>

<span class="sd">    All shapes must implement:</span>
<span class="sd">    __repr__(), with a call to _repr_shape()</span>
<span class="sd">    __copy__()</span>

<span class="sd">    All shapes have attributes:</span>
<span class="sd">    id: SVG ID attributes. (SVGElement)</span>
<span class="sd">    transform: SVG Matrix to apply to this shape. (Transformable)</span>
<span class="sd">    apply: Determine whether transform should be applied. (Transformable)</span>
<span class="sd">    fill: SVG color of the shape fill. (GraphicObject)</span>
<span class="sd">    stroke: SVG color of the shape stroke. (GraphicObject)</span>
<span class="sd">    stroke_width: Stroke width of the stroke. (GraphicObject)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strict</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>  <span class="c1"># Must go last, triggers, by_object, by_value, by_arg functions.</span>

<div class="viewcode-block" id="Shape.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span></div>

<div class="viewcode-block" id="Shape.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span></div>

<div class="viewcode-block" id="Shape.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Shape</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">fill</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">stroke</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">first</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
            <span class="n">first</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>
        <span class="n">second</span> <span class="o">=</span> <span class="n">other</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">second</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
            <span class="n">second</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">second</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">first</span> <span class="o">==</span> <span class="n">second</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Shape</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Shape</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="n">Path</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="fm">__add__</span> <span class="o">=</span> <span class="fm">__iadd__</span>

    <span class="k">def</span> <span class="fm">__matmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="fm">__imatmul__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="k">def</span> <span class="fm">__rmatmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="fm">__imatmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>

<div class="viewcode-block" id="Shape.__imatmul__"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape.__imatmul__">[docs]</a>    <span class="k">def</span> <span class="fm">__imatmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The % operation with a matrix works much like multiplication except that it automatically reifies the shape.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">*=</span> <span class="n">other</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reify</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Shape._calc_lengths"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape._calc_lengths">[docs]</a>    <span class="k">def</span> <span class="nf">_calc_lengths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="n">MIN_DEPTH</span><span class="p">,</span> <span class="n">segments</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the length values for the segments of the Shape.</span>

<span class="sd">        :param error: error permitted for length calculations.</span>
<span class="sd">        :param min_depth: minimum depth for the length calculation.</span>
<span class="sd">        :param segments: optional segments to use.</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">segments</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">segments</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">each</span><span class="o">.</span><span class="n">length</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="n">min_depth</span><span class="p">)</span> <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">lengths</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lengths</span> <span class="o">=</span> <span class="n">lengths</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">each</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">lengths</span><span class="p">]</span></div>

<div class="viewcode-block" id="Shape.npoint"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape.npoint">[docs]</a>    <span class="k">def</span> <span class="nf">npoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">positions</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">ERROR</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find a points between 0 and 1 within the shape. Numpy acceleration allows points to be an array of floats.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">positions</span><span class="p">]</span>

        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">segments</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="c1"># Shortcuts</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_calc_lengths</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">segments</span><span class="o">=</span><span class="n">segments</span><span class="p">)</span>
        <span class="n">xy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">positions</span><span class="p">),</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">positions</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>
            <span class="n">point</span> <span class="o">=</span> <span class="n">segments</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
            <span class="n">xy</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">point</span>
            <span class="k">return</span> <span class="n">xy</span>

        <span class="c1"># Find which segment the point we search for is located on:</span>
        <span class="n">segment_start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">segment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">segments</span><span class="p">):</span>
            <span class="n">segment_end</span> <span class="o">=</span> <span class="n">segment_start</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lengths</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="n">position_subset</span> <span class="o">=</span> <span class="p">(</span><span class="n">segment_start</span> <span class="o">&lt;=</span> <span class="n">positions</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">positions</span> <span class="o">&lt;</span> <span class="n">segment_end</span><span class="p">)</span>
            <span class="n">v0</span> <span class="o">=</span> <span class="n">positions</span><span class="p">[</span><span class="n">position_subset</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">v0</span><span class="p">):</span>
                <span class="k">continue</span>  <span class="c1"># Nothing matched.</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">segment_end</span> <span class="o">-</span> <span class="n">segment_start</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># This segment is 0 length.</span>
                <span class="n">segment_pos</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">segment_pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">v0</span> <span class="o">-</span> <span class="n">segment_start</span><span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">npoint</span><span class="p">(</span><span class="n">segment_pos</span><span class="p">)</span>
            <span class="n">xy</span><span class="p">[</span><span class="n">position_subset</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">[:]</span>
            <span class="n">segment_start</span> <span class="o">=</span> <span class="n">segment_end</span>

        <span class="c1"># the loop above will miss position == 1</span>
        <span class="n">xy</span><span class="p">[</span><span class="n">positions</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">segments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">xy</span></div>

<div class="viewcode-block" id="Shape.point"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape.point">[docs]</a>    <span class="k">def</span> <span class="nf">point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">ERROR</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find a point between 0 and 1 within the Shape, going through the shape with regard to position.</span>

<span class="sd">        :param position: value between 0 and 1 within the shape.</span>
<span class="sd">        :param error: Length error permitted.</span>
<span class="sd">        :return: Point at the given location.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">segments</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="c1"># Shortcuts</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">position</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">position</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">segments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">npoint</span><span class="p">([</span><span class="n">position</span><span class="p">],</span> <span class="n">error</span><span class="o">=</span><span class="n">error</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_calc_lengths</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">segments</span><span class="o">=</span><span class="n">segments</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">position</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>
            <span class="k">return</span> <span class="n">segments</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="c1"># Find which segment the point we search for is located on:</span>
        <span class="n">segment_start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">segment_pos</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">segment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">segments</span><span class="p">):</span>
            <span class="n">segment_end</span> <span class="o">=</span> <span class="n">segment_start</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lengths</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">segment_end</span> <span class="o">&gt;=</span> <span class="n">position</span><span class="p">:</span>
                <span class="c1"># This is the segment! How far in on the segment is the point?</span>
                <span class="n">segment_pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span> <span class="o">-</span> <span class="n">segment_start</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">segment_end</span> <span class="o">-</span> <span class="n">segment_start</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="n">segment_start</span> <span class="o">=</span> <span class="n">segment_end</span>
        <span class="k">return</span> <span class="n">segment</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">segment_pos</span><span class="p">)</span></div>

<div class="viewcode-block" id="Shape.length"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="n">MIN_DEPTH</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_calc_lengths</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">min_depth</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span></div>

<div class="viewcode-block" id="Shape.segments"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape.segments">[docs]</a>    <span class="k">def</span> <span class="nf">segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns PathSegments which correctly produce this shape.</span>

<span class="sd">        This should be implemented by subclasses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Shape.d"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape.d">[docs]</a>    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the path_d string of the shape.</span>

<span class="sd">        :param relative: Returns path_d in relative form.</span>
<span class="sd">        :param transformed: Return path_d, with applied transform.</span>
<span class="sd">        :return: path_d string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">segments</span><span class="p">(</span><span class="n">transformed</span><span class="o">=</span><span class="n">transformed</span><span class="p">))</span><span class="o">.</span><span class="n">d</span><span class="p">(</span><span class="n">relative</span><span class="o">=</span><span class="n">relative</span><span class="p">)</span></div>

<div class="viewcode-block" id="Shape.bbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape.bbox">[docs]</a>    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_stroke</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the bounding box for the given shape.</span>

<span class="sd">        :param transformed: whether this is the transformed bounds or default.</span>
<span class="sd">        :param with_stroke: should the stroke-width be included in the bounds.</span>
<span class="sd">        :return: bounding box of the given element</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bbs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">seg</span><span class="o">.</span><span class="n">bbox</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">segments</span><span class="p">(</span><span class="n">transformed</span><span class="o">=</span><span class="n">transformed</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">Close</span><span class="p">,</span> <span class="n">Move</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">xmins</span><span class="p">,</span> <span class="n">ymins</span><span class="p">,</span> <span class="n">xmaxs</span><span class="p">,</span> <span class="n">ymaxs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">bbs</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># No bounding box items existed. So no bounding box.</span>

        <span class="k">if</span> <span class="n">with_stroke</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">transformed</span><span class="p">:</span>
                <span class="n">delta</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">implicit_stroke_width</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">delta</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="nb">min</span><span class="p">(</span><span class="n">xmins</span><span class="p">)</span> <span class="o">-</span> <span class="n">delta</span><span class="p">,</span>
            <span class="nb">min</span><span class="p">(</span><span class="n">ymins</span><span class="p">)</span> <span class="o">-</span> <span class="n">delta</span><span class="p">,</span>
            <span class="nb">max</span><span class="p">(</span><span class="n">xmaxs</span><span class="p">)</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span>
            <span class="nb">max</span><span class="p">(</span><span class="n">ymaxs</span><span class="p">)</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Shape._init_shape"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape._init_shape">[docs]</a>    <span class="k">def</span> <span class="nf">_init_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generic SVG parsing of args. In those cases where the shape accepts finite elements we can process the last</span>
<span class="sd">        four elements of the shape with this code. This will happen in simpleline, roundshape, and rect. It will not</span>
<span class="sd">        happen in polyshape or paths since these can accept infinite arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">arg_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">apply</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span></div>

<div class="viewcode-block" id="Shape._repr_shape"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape._repr_shape">[docs]</a>    <span class="k">def</span> <span class="nf">_repr_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generic pieces of repr shape.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Cannot use SVG_ATTR_* for some attributes in repr because they contain hyphens</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="o">.</span><span class="n">rgb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_STROKE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="o">.</span><span class="n">hexrgb</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="o">.</span><span class="n">opacity</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;stroke_opacity&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="o">.</span><span class="n">opacity</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="o">.</span><span class="n">rgb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_FILL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="o">.</span><span class="n">hexrgb</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="o">.</span><span class="n">opacity</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;fill_opacity&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="o">.</span><span class="n">opacity</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;stroke_width=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">is_identity</span><span class="p">():</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;apply=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_ID</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">))</span></div>

<div class="viewcode-block" id="Shape._str_shape"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape._str_shape">[docs]</a>    <span class="k">def</span> <span class="nf">_str_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generic pieces of str shape.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="o">.</span><span class="n">rgb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_STROKE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="o">.</span><span class="n">hexrgb</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="o">.</span><span class="n">opacity</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_STROKE_OPACITY</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="o">.</span><span class="n">opacity</span><span class="p">))</span>
                <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="o">.</span><span class="n">rgb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_FILL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="o">.</span><span class="n">hexrgb</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="o">.</span><span class="n">opacity</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_FILL_OPACITY</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="o">.</span><span class="n">opacity</span><span class="p">))</span>
                <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_STROKE_WIDTH</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span><span class="p">))</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">is_identity</span><span class="p">():</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;apply=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_ID</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">))</span></div>

<div class="viewcode-block" id="Shape._name"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Shape._name">[docs]</a>    <span class="k">def</span> <span class="nf">_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span></div></div>


<div class="viewcode-block" id="PathSegment"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.PathSegment">[docs]</a><span class="k">class</span> <span class="nc">PathSegment</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Path Segments are the base class for all the segment within a Path.</span>
<span class="sd">    These are defined in SVG 1.1 8.3 and SVG 2.0 9.3</span>
<span class="sd">    https://www.w3.org/TR/SVG11/paths.html#PathData</span>
<span class="sd">    https://www.w3.org/TR/SVG2/paths.html#PathElement</span>

<span class="sd">    These segments define a 1:1 relationship with the path_d or path data attribute, denoted in</span>
<span class="sd">    SVG by the &#39;d&#39; attribute. These are moveto, closepath, lineto, and the curves which are cubic</span>
<span class="sd">    bezier curves, quadratic bezier curves, and elliptical arc. These are classed as Move, Close,</span>
<span class="sd">    Line, CubicBezier, QuadraticBezier, and Arc. And in path_d are denoted as M, Z, L, C, Q, A.</span>

<span class="sd">    There are lowercase versions of these commands. And for C, and Q there are S and T which are</span>
<span class="sd">    smooth versions. For lines there are also V and H commands which denote vertical and horizontal</span>
<span class="sd">    versions of the line command.</span>

<span class="sd">    The major difference between paths in 1.1 and 2.0 is the use of Z to truncate a command to close.</span>
<span class="sd">    &quot;M0,0C 0,100 100,0 z is valid in 2.0 since the last z replaces the 0,0. These are read by</span>
<span class="sd">    svg.elements but they are not written.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative&quot;</span><span class="p">])</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">smooth</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;smooth&quot;</span><span class="p">])</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">smooth</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;start=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="k">if</span> <span class="n">e</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;end=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">Matrix</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="n">n</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="fm">__rmul__</span> <span class="o">=</span> <span class="fm">__mul__</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PathSegment</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">path</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="n">other</span>
            <span class="k">return</span> <span class="n">path</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="fm">__add__</span> <span class="o">=</span> <span class="fm">__iadd__</span>

<div class="viewcode-block" id="PathSegment.__str__"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.PathSegment.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This defines an individual path segment string. Since this isn&#39;t part of a Path it appends a pseudo-Move</span>
<span class="sd">        command to correctly provide the starting position.</span>
<span class="sd">        :return: string representation of the object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;m </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;M </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">d</span></div>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">val</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span>

    <span class="nb">next</span> <span class="o">=</span> <span class="fm">__next__</span>

<div class="viewcode-block" id="PathSegment.segment_length"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.PathSegment.segment_length">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">segment_length</span><span class="p">(</span>
        <span class="n">curve</span><span class="p">,</span>
        <span class="n">start</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">end</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">start_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">end_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">error</span><span class="o">=</span><span class="n">ERROR</span><span class="p">,</span>
        <span class="n">min_depth</span><span class="o">=</span><span class="n">MIN_DEPTH</span><span class="p">,</span>
        <span class="n">depth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Recursively approximates the length by straight lines&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">start_point</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start_point</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">end_point</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">end_point</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
        <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">end</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">mid_point</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">mid</span><span class="p">)</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">end_point</span> <span class="o">-</span> <span class="n">start_point</span><span class="p">)</span>
        <span class="n">first_half</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">mid_point</span> <span class="o">-</span> <span class="n">start_point</span><span class="p">)</span>
        <span class="n">second_half</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">end_point</span> <span class="o">-</span> <span class="n">mid_point</span><span class="p">)</span>

        <span class="n">length2</span> <span class="o">=</span> <span class="n">first_half</span> <span class="o">+</span> <span class="n">second_half</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">length2</span> <span class="o">-</span> <span class="n">length</span> <span class="o">&gt;</span> <span class="n">error</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">depth</span> <span class="o">&lt;</span> <span class="n">min_depth</span><span class="p">):</span>
            <span class="c1"># Calculate the length of each segment:</span>
            <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">PathSegment</span><span class="o">.</span><span class="n">segment_length</span><span class="p">(</span>
                <span class="n">curve</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">start_point</span><span class="p">,</span> <span class="n">mid_point</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">min_depth</span><span class="p">,</span> <span class="n">depth</span>
            <span class="p">)</span> <span class="o">+</span> <span class="n">PathSegment</span><span class="o">.</span><span class="n">segment_length</span><span class="p">(</span>
                <span class="n">curve</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">mid_point</span><span class="p">,</span> <span class="n">end_point</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">min_depth</span><span class="p">,</span> <span class="n">depth</span>
            <span class="p">)</span>
        <span class="c1"># This is accurate enough.</span>
        <span class="k">return</span> <span class="n">length2</span></div>

<div class="viewcode-block" id="PathSegment._line_length"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.PathSegment._line_length">[docs]</a>    <span class="k">def</span> <span class="nf">_line_length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="n">MIN_DEPTH</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">PathSegment</span><span class="o">.</span><span class="n">segment_length</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="n">min_depth</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PathSegment.bbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.PathSegment.bbox">[docs]</a>    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the bounding box for the segment.</span>
<span class="sd">        xmin, ymin, xmax, ymax</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xs</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">x</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="n">ys</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">y</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="n">xmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
        <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span></div>

<div class="viewcode-block" id="PathSegment.reverse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.PathSegment.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reverses the current path segment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">end</span></div>

<div class="viewcode-block" id="PathSegment.point"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.PathSegment.point">[docs]</a>    <span class="k">def</span> <span class="nf">point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the point at a given amount through the path segment.</span>
<span class="sd">        :param position:  t value between 0 and 1</span>
<span class="sd">        :return: Point instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">npoint</span><span class="p">([</span><span class="n">position</span><span class="p">])[</span><span class="mi">0</span><span class="p">])</span></div>

<div class="viewcode-block" id="PathSegment.npoint"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.PathSegment.npoint">[docs]</a>    <span class="k">def</span> <span class="nf">npoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">positions</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the points at given positions along the path segment</span>
<span class="sd">        :param positions: N-sized sequence of t value between 0 and 1</span>
<span class="sd">        :return: N-sized sequence of 2-sized sequence of float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">positions</span><span class="p">)</span></div>

<div class="viewcode-block" id="PathSegment.length"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.PathSegment.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="n">MIN_DEPTH</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the length of this path segment.</span>

<span class="sd">        :param error:</span>
<span class="sd">        :param min_depth:</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="PathSegment.d"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.PathSegment.d">[docs]</a>    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the fragment path_d value for the current path segment.</span>

<span class="sd">        For a relative segment the current_point must be provided. If it is omitted then only an absolute segment</span>
<span class="sd">        can be returned.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>


<div class="viewcode-block" id="Move"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Move">[docs]</a><span class="k">class</span> <span class="nc">Move</span><span class="p">(</span><span class="n">PathSegment</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents move commands. Moves to a new location without any path distance.</span>
<span class="sd">    Paths that consist of only move commands, are valid.</span>

<span class="sd">    Move serve to make discontinuous paths into continuous linked paths segments</span>
<span class="sd">    with non-drawn sections.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Move commands most importantly go to a place. So if one location is given, that&#39;s the end point.</span>
<span class="sd">        If two locations are given then first is the start location.</span>

<span class="sd">        For many Move commands it is not necessary to have an original start location. The start point provides a</span>
<span class="sd">        linked locations for some elements that may require it. If known it can be provided.</span>

<span class="sd">        Move(p) where p is the End point.</span>
<span class="sd">        Move(s,e) where s is the Start point, e is the End point.</span>
<span class="sd">        Move(p, start=s) where p is End point, s is the Start point.</span>
<span class="sd">        Move(p, end=e) where p is the Start point, e is the End point.</span>
<span class="sd">        Move(start=s, end=e) where s is the Start point, e is the End point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">PathSegment</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;end&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;start&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;end&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]</span>
                <span class="k">elif</span> <span class="s2">&quot;start&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">*=</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Move</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span>

<div class="viewcode-block" id="Move.d"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Move.d">[docs]</a>    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">current_point</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">relative</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;M </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="k">return</span> <span class="s2">&quot;m </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">current_point</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Curve"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Curve">[docs]</a><span class="k">class</span> <span class="nc">Curve</span><span class="p">(</span><span class="n">PathSegment</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents curve commands&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">PathSegment</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">start</span><span class="p">)</span> <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">end</span><span class="p">)</span> <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Linear"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Linear">[docs]</a><span class="k">class</span> <span class="nc">Linear</span><span class="p">(</span><span class="n">PathSegment</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents line commands.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">PathSegment</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">start</span><span class="p">)</span> <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">end</span><span class="p">)</span> <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">*=</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span>

<div class="viewcode-block" id="Linear.npoint"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Linear.npoint">[docs]</a>    <span class="k">def</span> <span class="nf">npoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">positions</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

            <span class="n">xy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">positions</span><span class="p">),</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
            <span class="n">xy</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">positions</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">])</span>
            <span class="n">xy</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">positions</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">xy</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">Point</span><span class="o">.</span><span class="n">towards</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span> <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">positions</span><span class="p">]</span></div>

<div class="viewcode-block" id="Linear.length"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Linear.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Point</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Linear.closest_segment_point"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Linear.closest_segment_point">[docs]</a>    <span class="k">def</span> <span class="nf">closest_segment_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">respect_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Gives the point on the line closest to the given point. &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="n">v_ap_x</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">a</span><span class="o">.</span><span class="n">x</span>
        <span class="n">v_ap_y</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">a</span><span class="o">.</span><span class="n">y</span>
        <span class="n">v_ab_x</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span><span class="o">.</span><span class="n">x</span>
        <span class="n">v_ab_y</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="o">.</span><span class="n">y</span>
        <span class="n">sq_distance_ab</span> <span class="o">=</span> <span class="n">v_ab_x</span> <span class="o">*</span> <span class="n">v_ab_x</span> <span class="o">+</span> <span class="n">v_ab_y</span> <span class="o">*</span> <span class="n">v_ab_y</span>
        <span class="n">ab_ap_product</span> <span class="o">=</span> <span class="n">v_ab_x</span> <span class="o">*</span> <span class="n">v_ap_x</span> <span class="o">+</span> <span class="n">v_ab_y</span> <span class="o">*</span> <span class="n">v_ap_y</span>
        <span class="k">if</span> <span class="n">sq_distance_ab</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>  <span class="c1"># Line is point.</span>
        <span class="n">amount</span> <span class="o">=</span> <span class="n">ab_ap_product</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">sq_distance_ab</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">respect_bounds</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">amount</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">amount</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span></div>

<div class="viewcode-block" id="Linear.d"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Linear.d">[docs]</a>    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>


<div class="viewcode-block" id="Close"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Close">[docs]</a><span class="k">class</span> <span class="nc">Close</span><span class="p">(</span><span class="n">Linear</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents close commands. If this exists at the end of the shape then the shape is closed.</span>
<span class="sd">    the methodology of a single flag close fails in a couple ways. You can have multi-part shapes</span>
<span class="sd">    which can close or not close several times.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Close.d"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Close.d">[docs]</a>    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">current_point</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">relative</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;Z&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;z&quot;</span></div></div>


<div class="viewcode-block" id="Line"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Line">[docs]</a><span class="k">class</span> <span class="nc">Line</span><span class="p">(</span><span class="n">Linear</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents line commands.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="Line.d"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Line.d">[docs]</a>    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">current_point</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">relative</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;L </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;l </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">current_point</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="QuadraticBezier"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.QuadraticBezier">[docs]</a><span class="k">class</span> <span class="nc">QuadraticBezier</span><span class="p">(</span><span class="n">Curve</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents Quadratic Bezier commands.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Curve</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">control</span><span class="p">)</span> <span class="k">if</span> <span class="n">control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;QuadraticBezier(start=</span><span class="si">%s</span><span class="s2">, control=</span><span class="si">%s</span><span class="s2">, end=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control</span><span class="p">),</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">QuadraticBezier</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">control</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
            <span class="n">relative</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">,</span>
            <span class="n">smooth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">smooth</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">QuadraticBezier</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">control</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">QuadraticBezier</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">*=</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">3</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="k">raise</span> <span class="ne">IndexError</span>

<div class="viewcode-block" id="QuadraticBezier.npoint"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.QuadraticBezier.npoint">[docs]</a>    <span class="k">def</span> <span class="nf">npoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">positions</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculate the x,y position at a certain position of the path. `pos` may be a</span>
<span class="sd">        float or a NumPy array.&quot;&quot;&quot;</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span>
        <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>

        <span class="k">def</span> <span class="nf">_compute_point</span><span class="p">(</span><span class="n">position</span><span class="p">):</span>
            <span class="c1"># compute factors</span>
            <span class="n">n_pos</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">position</span>
            <span class="n">pos_2</span> <span class="o">=</span> <span class="n">position</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="n">n_pos_2</span> <span class="o">=</span> <span class="n">n_pos</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="n">n_pos_pos</span> <span class="o">=</span> <span class="n">n_pos</span> <span class="o">*</span> <span class="n">position</span>

            <span class="k">return</span> <span class="p">(</span>
                <span class="n">n_pos_2</span> <span class="o">*</span> <span class="n">x0</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">n_pos_pos</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">pos_2</span> <span class="o">*</span> <span class="n">x2</span><span class="p">,</span>
                <span class="n">n_pos_2</span> <span class="o">*</span> <span class="n">y0</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">n_pos_pos</span> <span class="o">*</span> <span class="n">y1</span> <span class="o">+</span> <span class="n">pos_2</span> <span class="o">*</span> <span class="n">y2</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

            <span class="n">xy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">positions</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>
            <span class="n">xy</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">xy</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">_compute_point</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">positions</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">xy</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="o">*</span><span class="n">_compute_point</span><span class="p">(</span><span class="n">position</span><span class="p">))</span> <span class="k">for</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">positions</span><span class="p">]</span></div>

<div class="viewcode-block" id="QuadraticBezier.bbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.QuadraticBezier.bbox">[docs]</a>    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the bounding box for the quadratic bezier curve.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">x</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">x</span>
        <span class="k">if</span> <span class="n">d</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x_values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x_values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">y</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">y</span>
        <span class="k">if</span> <span class="n">d</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">y_values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">y_values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">x_values</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_values</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">x_values</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span></div>

<div class="viewcode-block" id="QuadraticBezier.length"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.QuadraticBezier.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculate the length of the path up to a certain position&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># For an explanation of this case, see</span>
            <span class="c1"># http://www.malczak.info/blog/quadratic-bezier-curve-length/</span>
            <span class="n">A</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">real</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">a</span><span class="o">.</span><span class="n">imag</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">B</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">real</span> <span class="o">*</span> <span class="n">b</span><span class="o">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">a</span><span class="o">.</span><span class="n">imag</span> <span class="o">*</span> <span class="n">b</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
            <span class="n">C</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">real</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">b</span><span class="o">.</span><span class="n">imag</span> <span class="o">**</span> <span class="mi">2</span>

            <span class="n">Sabc</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">A</span> <span class="o">+</span> <span class="n">B</span> <span class="o">+</span> <span class="n">C</span><span class="p">)</span>
            <span class="n">A2</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
            <span class="n">A32</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">A</span> <span class="o">*</span> <span class="n">A2</span>
            <span class="n">C2</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
            <span class="n">BA</span> <span class="o">=</span> <span class="n">B</span> <span class="o">/</span> <span class="n">A2</span>

            <span class="n">s</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">A32</span> <span class="o">*</span> <span class="n">Sabc</span>
                <span class="o">+</span> <span class="n">A2</span> <span class="o">*</span> <span class="n">B</span> <span class="o">*</span> <span class="p">(</span><span class="n">Sabc</span> <span class="o">-</span> <span class="n">C2</span><span class="p">)</span>
                <span class="o">+</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">C</span> <span class="o">*</span> <span class="n">A</span> <span class="o">-</span> <span class="n">B</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">log</span><span class="p">((</span><span class="mi">2</span> <span class="o">*</span> <span class="n">A2</span> <span class="o">+</span> <span class="n">BA</span> <span class="o">+</span> <span class="n">Sabc</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">BA</span> <span class="o">+</span> <span class="n">C2</span><span class="p">))</span>
            <span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">A32</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="c1"># a_dot_b = a.real * b.real + a.imag * b.imag</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-10</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">k</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">k</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">k</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span></div>

<div class="viewcode-block" id="QuadraticBezier.is_smooth_from"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.QuadraticBezier.is_smooth_from">[docs]</a>    <span class="k">def</span> <span class="nf">is_smooth_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">previous</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if this segment would be a smooth segment following the previous&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">previous</span><span class="p">,</span> <span class="n">QuadraticBezier</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">previous</span><span class="o">.</span><span class="n">end</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span>
                <span class="n">previous</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">previous</span><span class="o">.</span><span class="n">control</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span></div>

<div class="viewcode-block" id="QuadraticBezier.d"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.QuadraticBezier.d">[docs]</a>    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">smooth</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">smooth</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">smooth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">smooth</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">current_point</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">)</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">relative</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="s2">&quot;T </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;t </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">current_point</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">current_point</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">)</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">relative</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="s2">&quot;Q </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;q </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">-</span> <span class="n">current_point</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">current_point</span><span class="p">,</span>
                <span class="p">)</span></div></div>


<div class="viewcode-block" id="CubicBezier"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.CubicBezier">[docs]</a><span class="k">class</span> <span class="nc">CubicBezier</span><span class="p">(</span><span class="n">Curve</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents Cubic Bezier commands.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">control1</span><span class="p">,</span> <span class="n">control2</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Curve</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">control1</span><span class="p">)</span> <span class="k">if</span> <span class="n">control1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">control2</span><span class="p">)</span> <span class="k">if</span> <span class="n">control1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;CubicBezier(start=</span><span class="si">%s</span><span class="s2">, control1=</span><span class="si">%s</span><span class="s2">, control2=</span><span class="si">%s</span><span class="s2">, end=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control1</span><span class="p">),</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control2</span><span class="p">),</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">CubicBezier</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">control1</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">control2</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
            <span class="n">relative</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">,</span>
            <span class="n">smooth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">smooth</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CubicBezier</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">control1</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">control1</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">control2</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">control2</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CubicBezier</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">control1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">control1</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">control2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">control2</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">*=</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">4</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">control1</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">control2</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span>

<div class="viewcode-block" id="CubicBezier.reverse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.CubicBezier.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">PathSegment</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">c2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">control2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">control1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control1</span> <span class="o">=</span> <span class="n">c2</span></div>

<div class="viewcode-block" id="CubicBezier.npoint"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.CubicBezier.npoint">[docs]</a>    <span class="k">def</span> <span class="nf">npoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">positions</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculate the x,y position at a certain position of the path. `pos` may be a</span>
<span class="sd">        float or a NumPy array.&quot;&quot;&quot;</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">control1</span>
        <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">control2</span>
        <span class="n">x3</span><span class="p">,</span> <span class="n">y3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>

        <span class="k">def</span> <span class="nf">_compute_point</span><span class="p">(</span><span class="n">position</span><span class="p">):</span>
            <span class="c1"># compute factors</span>
            <span class="n">pos_3</span> <span class="o">=</span> <span class="n">position</span> <span class="o">**</span> <span class="mi">3</span>
            <span class="n">n_pos</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">position</span>
            <span class="n">n_pos_3</span> <span class="o">=</span> <span class="n">n_pos</span> <span class="o">**</span> <span class="mi">3</span>
            <span class="n">pos_2_n_pos</span> <span class="o">=</span> <span class="n">position</span> <span class="o">*</span> <span class="n">position</span> <span class="o">*</span> <span class="n">n_pos</span>
            <span class="n">n_pos_2_pos</span> <span class="o">=</span> <span class="n">n_pos</span> <span class="o">*</span> <span class="n">n_pos</span> <span class="o">*</span> <span class="n">position</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">n_pos_3</span> <span class="o">*</span> <span class="n">x0</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">n_pos_2_pos</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">pos_2_n_pos</span> <span class="o">*</span> <span class="n">x2</span><span class="p">)</span> <span class="o">+</span> <span class="n">pos_3</span> <span class="o">*</span> <span class="n">x3</span><span class="p">,</span>
                <span class="n">n_pos_3</span> <span class="o">*</span> <span class="n">y0</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">n_pos_2_pos</span> <span class="o">*</span> <span class="n">y1</span> <span class="o">+</span> <span class="n">pos_2_n_pos</span> <span class="o">*</span> <span class="n">y2</span><span class="p">)</span> <span class="o">+</span> <span class="n">pos_3</span> <span class="o">*</span> <span class="n">y3</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

            <span class="n">xy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">positions</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>
            <span class="n">xy</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">xy</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">_compute_point</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">positions</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">xy</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="o">*</span><span class="n">_compute_point</span><span class="p">(</span><span class="n">position</span><span class="p">))</span> <span class="k">for</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">positions</span><span class="p">]</span></div>

<div class="viewcode-block" id="CubicBezier.bbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.CubicBezier.bbox">[docs]</a>    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the tight fitting bounding box of the bezier curve.</span>
<span class="sd">        Code by:</span>
<span class="sd">        https://github.com/mathandy/svgpathtools</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_real_minmax</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_real_minmax</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span></div>

<div class="viewcode-block" id="CubicBezier._real_minmax"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.CubicBezier._real_minmax">[docs]</a>    <span class="k">def</span> <span class="nf">_real_minmax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the minimum and maximum for a real cubic bezier, with a non-zero denom</span>
<span class="sd">        Code by:</span>
<span class="sd">        https://github.com/mathandy/svgpathtools</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">local_extremizers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>
        <span class="n">denom</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">denom</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mf">1e-12</span><span class="p">:</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">delta</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># otherwise no local extrema</span>
                <span class="n">sqdelta</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
                <span class="n">tau</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="p">(</span><span class="n">tau</span> <span class="o">+</span> <span class="n">sqdelta</span><span class="p">)</span> <span class="o">/</span> <span class="n">denom</span>
                <span class="n">r2</span> <span class="o">=</span> <span class="p">(</span><span class="n">tau</span> <span class="o">-</span> <span class="n">sqdelta</span><span class="p">)</span> <span class="o">/</span> <span class="n">denom</span>
                <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">r1</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">local_extremizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span>
                <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">r2</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">local_extremizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">local_extremizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">local_extrema</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">t</span><span class="p">)[</span><span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">local_extremizers</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">local_extrema</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">local_extrema</span><span class="p">)</span></div>

<div class="viewcode-block" id="CubicBezier._length_scipy"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.CubicBezier._length_scipy">[docs]</a>    <span class="k">def</span> <span class="nf">_length_scipy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">ERROR</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">scipy.integrate</span> <span class="kn">import</span> <span class="n">quad</span>

        <span class="n">p0</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">control1</span><span class="p">)</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">control2</span><span class="p">)</span>
        <span class="n">p3</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">_abs_derivative</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span>
                <span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">p1</span> <span class="o">-</span> <span class="n">p0</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
                <span class="o">+</span> <span class="mi">6</span> <span class="o">*</span> <span class="p">(</span><span class="n">p2</span> <span class="o">-</span> <span class="n">p1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span> <span class="o">*</span> <span class="n">t</span>
                <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">p3</span> <span class="o">-</span> <span class="n">p2</span><span class="p">)</span> <span class="o">*</span> <span class="n">t</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">quad</span><span class="p">(</span><span class="n">_abs_derivative</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">epsabs</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1000</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="CubicBezier._length_default"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.CubicBezier._length_default">[docs]</a>    <span class="k">def</span> <span class="nf">_length_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="n">MIN_DEPTH</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_length</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">min_depth</span><span class="p">)</span></div>

<div class="viewcode-block" id="CubicBezier.length"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.CubicBezier.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="n">MIN_DEPTH</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculate the length of the path up to a certain position&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length_scipy</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>  <span class="c1"># Fallback on any failure</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length_default</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">min_depth</span><span class="p">)</span></div>

<div class="viewcode-block" id="CubicBezier.is_smooth_from"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.CubicBezier.is_smooth_from">[docs]</a>    <span class="k">def</span> <span class="nf">is_smooth_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">previous</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if this segment would be a smooth segment following the previous&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">previous</span><span class="p">,</span> <span class="n">CubicBezier</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">previous</span><span class="o">.</span><span class="n">end</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span>
                <span class="n">previous</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">previous</span><span class="o">.</span><span class="n">control2</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">control1</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span></div>

<div class="viewcode-block" id="CubicBezier.d"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.CubicBezier.d">[docs]</a>    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">smooth</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">smooth</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">smooth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">smooth</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">current_point</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">)</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">relative</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="s2">&quot;S </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;s </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">control2</span> <span class="o">-</span> <span class="n">current_point</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">current_point</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">current_point</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">)</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">relative</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="s2">&quot;C </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">control2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;c </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">control1</span> <span class="o">-</span> <span class="n">current_point</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">control2</span> <span class="o">-</span> <span class="n">current_point</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">current_point</span><span class="p">,</span>
                <span class="p">)</span></div></div>


<div class="viewcode-block" id="Arc"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc">[docs]</a><span class="k">class</span> <span class="nc">Arc</span><span class="p">(</span><span class="n">Curve</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Represents Arc commands.</span>

<span class="sd">        Arc objects can take different parameters to create arcs.</span>
<span class="sd">        Since we expect taking in SVG parameters. We accept SVG parameterization which is:</span>
<span class="sd">        start, rx, ry, rotation, arc_flag, sweep_flag, end.</span>

<span class="sd">        To do matrix transitions, the native parameterization is start, end, center, prx, pry, sweep</span>

<span class="sd">        &#39;start, end, center, prx, pry&#39; are points and sweep amount is a t value in tau radians.</span>
<span class="sd">        If points are modified by an affine transformation, the arc is transformed.</span>
<span class="sd">        There is a special case for when the scale factor inverts, it inverts the sweep.</span>

<span class="sd">        Note: t-values are not angles from center in elliptical arcs. These are the same thing in</span>
<span class="sd">        circular arcs. But, here t is a parameterization around the ellipse, as if it were a circle.</span>
<span class="sd">        The position on the arc is (a * cos(t), b * sin(t)). If r-major was 0 for example. The</span>
<span class="sd">        positions would all fall on the x-axis. And the angle from center would all be either 0 or</span>
<span class="sd">        tau/2. However, since t is the parameterization we can conceptualize it as a position on a</span>
<span class="sd">        circle which is then scaled and rotated by a matrix.</span>

<span class="sd">        prx is the point at t 0 in the ellipse.</span>
<span class="sd">        pry is the point at t tau/4 in the ellipse.</span>
<span class="sd">        prx -&gt; center -&gt; pry should form a right triangle.</span>

<span class="sd">        The rotation can be defined as the angle from center to prx. Since prx is located at</span>
<span class="sd">        t(0) its deviation can only be the result of a rotation.</span>

<span class="sd">        Sweep is a value in t.</span>
<span class="sd">        The sweep angle can be a value greater than tau and less than -tau.</span>
<span class="sd">        However if this is the case, conversion back to Path.d() is expected to fail.</span>
<span class="sd">        We can denote these arc events but not as a single command.</span>

<span class="sd">        start_t + sweep = end_t</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Curve</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">complex</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_svg_complex_parameterize</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span> <span class="ow">and</span> <span class="s2">&quot;rotation&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_svg_complex_parameterize</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
            <span class="c1"># This is an svg parameterized call.</span>
            <span class="c1"># A: rx ry x-axis-rotation large-arc-flag sweep-flag x y</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_svg_parameterize</span><span class="p">(</span>
                <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="s2">&quot;left&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span>
            <span class="ow">and</span> <span class="s2">&quot;right&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span>
            <span class="ow">and</span> <span class="s2">&quot;top&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span>
            <span class="ow">and</span> <span class="s2">&quot;bottom&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span>
        <span class="p">):</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">]</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;right&quot;</span><span class="p">]</span>
            <span class="n">top</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;top&quot;</span><span class="p">]</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;bottom&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="n">left</span> <span class="o">+</span> <span class="n">right</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="p">(</span><span class="n">top</span> <span class="o">+</span> <span class="n">bottom</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="p">(</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="n">ry</span> <span class="o">=</span> <span class="p">(</span><span class="n">bottom</span> <span class="o">-</span> <span class="n">top</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">rx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">ry</span><span class="p">)</span>
        <span class="n">len_args</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">len_args</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">len_args</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">len_args</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">len_args</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">len_args</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">len_args</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
            <span class="k">return</span>  <span class="c1"># The args gave us everything.</span>
        <span class="k">if</span> <span class="s2">&quot;start&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s2">&quot;end&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s2">&quot;center&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;center&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s2">&quot;prx&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;prx&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s2">&quot;pry&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;pry&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s2">&quot;sweep&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;sweep&quot;</span><span class="p">]</span>
        <span class="n">cw</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Clockwise default. (sometimes needed)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Start and end, but no center.</span>
            <span class="c1"># Solutions require a radius, a control point, or a bulge</span>
            <span class="n">control</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">sagitta</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="s2">&quot;bulge&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">bulge</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;bulge&quot;</span><span class="p">])</span>
                <span class="n">sagitta</span> <span class="o">=</span> <span class="n">bulge</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">distance_to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="k">elif</span> <span class="s2">&quot;sagitta&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">sagitta</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;sagitta&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">sagitta</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">Point</span><span class="o">.</span><span class="n">towards</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
                <span class="n">angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">angle_to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">polar_to</span><span class="p">(</span><span class="n">angle</span> <span class="o">-</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">4.0</span><span class="p">,</span> <span class="n">sagitta</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;control&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>  <span class="c1"># Control is any additional point on the arc.</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;control&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">delta_a</span> <span class="o">=</span> <span class="n">control</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
                <span class="n">delta_b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">control</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">delta_a</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-12</span><span class="p">:</span>
                    <span class="n">slope_a</span> <span class="o">=</span> <span class="n">delta_a</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="n">delta_a</span><span class="o">.</span><span class="n">x</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">slope_a</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">delta_b</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-12</span><span class="p">:</span>
                    <span class="n">slope_b</span> <span class="o">=</span> <span class="n">delta_b</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="n">delta_b</span><span class="o">.</span><span class="n">x</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">slope_b</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>
                <span class="n">ab_mid</span> <span class="o">=</span> <span class="n">Point</span><span class="o">.</span><span class="n">towards</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
                <span class="n">bc_mid</span> <span class="o">=</span> <span class="n">Point</span><span class="o">.</span><span class="n">towards</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">delta_a</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-12</span><span class="p">:</span>  <span class="c1"># slope_a == 0</span>
                    <span class="n">cx</span> <span class="o">=</span> <span class="n">ab_mid</span><span class="o">.</span><span class="n">x</span>
                    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">delta_b</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-12</span><span class="p">:</span>  <span class="c1"># slope_b == inf</span>
                        <span class="n">cy</span> <span class="o">=</span> <span class="n">bc_mid</span><span class="o">.</span><span class="n">y</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">cy</span> <span class="o">=</span> <span class="n">bc_mid</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="p">(</span><span class="n">bc_mid</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">cx</span><span class="p">)</span> <span class="o">/</span> <span class="n">slope_b</span>
                <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">delta_b</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-12</span><span class="p">:</span>  <span class="c1"># slope_b == 0</span>
                    <span class="n">cx</span> <span class="o">=</span> <span class="n">bc_mid</span><span class="o">.</span><span class="n">x</span>
                    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">delta_a</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-12</span><span class="p">:</span>  <span class="c1"># slope_a == inf</span>
                        <span class="n">cy</span> <span class="o">=</span> <span class="n">ab_mid</span><span class="o">.</span><span class="n">y</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">cy</span> <span class="o">=</span> <span class="n">ab_mid</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="p">(</span><span class="n">ab_mid</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">cx</span><span class="p">)</span> <span class="o">/</span> <span class="n">slope_a</span>
                <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">delta_a</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-12</span><span class="p">:</span>  <span class="c1"># slope_a == inf</span>
                    <span class="n">cy</span> <span class="o">=</span> <span class="n">ab_mid</span><span class="o">.</span><span class="n">y</span>
                    <span class="n">cx</span> <span class="o">=</span> <span class="n">slope_b</span> <span class="o">*</span> <span class="p">(</span><span class="n">bc_mid</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">cy</span><span class="p">)</span> <span class="o">+</span> <span class="n">bc_mid</span><span class="o">.</span><span class="n">x</span>
                <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">delta_b</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-12</span><span class="p">:</span>  <span class="c1"># slope_b == inf</span>
                    <span class="n">cy</span> <span class="o">=</span> <span class="n">bc_mid</span><span class="o">.</span><span class="n">y</span>
                    <span class="n">cx</span> <span class="o">=</span> <span class="n">slope_a</span> <span class="o">*</span> <span class="p">(</span><span class="n">ab_mid</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">cy</span><span class="p">)</span> <span class="o">+</span> <span class="n">ab_mid</span><span class="o">.</span><span class="n">x</span>
                <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">slope_a</span> <span class="o">-</span> <span class="n">slope_b</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-12</span><span class="p">:</span>
                    <span class="n">cx</span> <span class="o">=</span> <span class="n">ab_mid</span><span class="o">.</span><span class="n">x</span>
                    <span class="n">cy</span> <span class="o">=</span> <span class="n">ab_mid</span><span class="o">.</span><span class="n">y</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cx</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">slope_a</span> <span class="o">*</span> <span class="n">slope_b</span> <span class="o">*</span> <span class="p">(</span><span class="n">ab_mid</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">bc_mid</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                        <span class="o">-</span> <span class="n">slope_a</span> <span class="o">*</span> <span class="n">bc_mid</span><span class="o">.</span><span class="n">x</span>
                        <span class="o">+</span> <span class="n">slope_b</span> <span class="o">*</span> <span class="n">ab_mid</span><span class="o">.</span><span class="n">x</span>
                    <span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">slope_b</span> <span class="o">-</span> <span class="n">slope_a</span><span class="p">)</span>
                    <span class="n">cy</span> <span class="o">=</span> <span class="n">ab_mid</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="p">(</span><span class="n">cx</span> <span class="o">-</span> <span class="n">ab_mid</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="n">slope_a</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">)</span>
                <span class="n">cw</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">Point</span><span class="o">.</span><span class="n">orientation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;r&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;r&quot;</span><span class="p">]</span>
                <span class="n">mid</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span>
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
                <span class="p">)</span>
                <span class="n">q</span> <span class="o">=</span> <span class="n">Point</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
                <span class="n">hq</span> <span class="o">=</span> <span class="n">q</span> <span class="o">/</span> <span class="mf">2.0</span>
                <span class="k">if</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">hq</span><span class="p">:</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;r&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span> <span class="o">=</span> <span class="n">hq</span>  <span class="c1"># Correct potential math domain error.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span>
                    <span class="n">mid</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">r</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">hq</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="n">q</span><span class="p">,</span>
                    <span class="n">mid</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">r</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">hq</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="n">q</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">cw</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">Point</span><span class="o">.</span><span class="n">orientation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;ccw&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ccw&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">cw</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">cw</span><span class="p">:</span>
                    <span class="c1"># ccw arg exists, is true, and we found the cw center, or we didn&#39;t find</span>
                    <span class="c1"># the cw center.</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span>
                        <span class="n">mid</span><span class="o">.</span><span class="n">x</span>
                        <span class="o">-</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">r</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">hq</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="n">q</span><span class="p">,</span>
                        <span class="n">mid</span><span class="o">.</span><span class="n">y</span>
                        <span class="o">-</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">r</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">hq</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="n">q</span><span class="p">,</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;rx&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="s2">&quot;ry&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="c1"># This formulation will assume p1 and p2 are both axis aligned.</span>
                <span class="c1"># rx = kwargs[&quot;rx&quot;]</span>
                <span class="c1"># ry = kwargs[&quot;ry&quot;]</span>
                <span class="c1"># We will assume rx == abs(self.start.x - self.end.x)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">4.0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                <span class="n">cw</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">Point</span><span class="o">.</span><span class="n">orientation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;scooped&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;scooped&quot;</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sweep</span>
                    <span class="n">cw</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">cw</span>
                <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;ccw&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ccw&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">cw</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">cw</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Not enough values to solve for center.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;r&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;r&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">r</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;rx&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;rx&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;rotation&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">theta</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;rotation&quot;</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">=</span> <span class="n">Point</span><span class="o">.</span><span class="n">polar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">rx</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">rx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;ry&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">ry</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ry&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;rotation&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">theta</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;rotation&quot;</span><span class="p">]</span>
                    <span class="n">theta</span> <span class="o">+=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">4.0</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">=</span> <span class="n">Point</span><span class="o">.</span><span class="n">polar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">ry</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">ry</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">radius_s</span> <span class="o">=</span> <span class="n">Point</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">radius_s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">radius_s</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">radius_e</span> <span class="o">=</span> <span class="n">Point</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">radius_e</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">radius_e</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start_t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_start_t</span><span class="p">()</span>
            <span class="n">end_t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_end_t</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">=</span> <span class="n">end_t</span> <span class="o">-</span> <span class="n">start_t</span>
            <span class="k">if</span> <span class="s2">&quot;ccw&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">cw</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ccw&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">cw</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">+=</span> <span class="n">tau</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">cw</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">-=</span> <span class="n">tau</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start_t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_start_t</span><span class="p">()</span>
            <span class="n">end_t</span> <span class="o">=</span> <span class="n">start_t</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">end_t</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">end_t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_end_t</span><span class="p">()</span>
            <span class="n">start_t</span> <span class="o">=</span> <span class="n">end_t</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">start_t</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Arc(start=</span><span class="si">%s</span><span class="s2">, end=</span><span class="si">%s</span><span class="s2">, center=</span><span class="si">%s</span><span class="s2">, prx=</span><span class="si">%s</span><span class="s2">, pry=</span><span class="si">%s</span><span class="s2">, sweep=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">),</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">),</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prx</span><span class="p">),</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pry</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Arc</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prx</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pry</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span><span class="p">,</span>
            <span class="n">relative</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Arc</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">prx</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">pry</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">center</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">sweep</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Arc</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">value_scale_x</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sweep</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">value_scale_y</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sweep</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">5</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prx</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pry</span>
        <span class="k">raise</span> <span class="ne">IndexError</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">theta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;legacy property&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_start_t</span><span class="p">())</span><span class="o">.</span><span class="n">as_positive_degrees</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">delta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;legacy property&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sweep</span><span class="p">)</span><span class="o">.</span><span class="n">as_degrees</span>

<div class="viewcode-block" id="Arc.reverse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">PathSegment</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sweep</span></div>

<div class="viewcode-block" id="Arc.npoint"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.npoint">[docs]</a>    <span class="k">def</span> <span class="nf">npoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">positions</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_points_numpy</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">positions</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># This is equivalent of omitting the segment</span>
                <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">positions</span><span class="p">)</span>

            <span class="n">start_t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_start_t</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
                <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
                <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">start_t</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">*</span> <span class="n">pos</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">positions</span>
            <span class="p">]</span></div>

<div class="viewcode-block" id="Arc._points_numpy"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc._points_numpy">[docs]</a>    <span class="k">def</span> <span class="nf">_points_numpy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">positions</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Vectorized version of `point()`.</span>

<span class="sd">        :param positions: 1D numpy array of float in [0, 1]</span>
<span class="sd">        :return: 1D numpy array of complex</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

        <span class="n">xy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">positions</span><span class="p">),</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">xy</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">xy</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_start_t</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">*</span> <span class="n">positions</span>

            <span class="n">rotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">()</span>
            <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
            <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
            <span class="n">cx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span>
            <span class="n">cy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span>
            <span class="n">cos_rot</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
            <span class="n">sin_rot</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
            <span class="n">cos_t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="n">sin_t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="n">xy</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">+</span> <span class="n">a</span> <span class="o">*</span> <span class="n">cos_t</span> <span class="o">*</span> <span class="n">cos_rot</span> <span class="o">-</span> <span class="n">b</span> <span class="o">*</span> <span class="n">sin_t</span> <span class="o">*</span> <span class="n">sin_rot</span>
            <span class="n">xy</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">+</span> <span class="n">a</span> <span class="o">*</span> <span class="n">cos_t</span> <span class="o">*</span> <span class="n">sin_rot</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">sin_t</span> <span class="o">*</span> <span class="n">cos_rot</span>

            <span class="c1"># ensure clean endings</span>
            <span class="n">xy</span><span class="p">[</span><span class="n">positions</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
            <span class="n">xy</span><span class="p">[</span><span class="n">positions</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">xy</span></div>

<div class="viewcode-block" id="Arc._integral_length"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc._integral_length">[docs]</a>    <span class="k">def</span> <span class="nf">_integral_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">ellipse_part_integral</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">100000</span><span class="p">):</span>
            <span class="c1"># function to integrate</span>
            <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">a</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">b</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

            <span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
            <span class="n">seg_len</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t2</span><span class="p">)</span> <span class="o">/</span> <span class="n">n</span>
            <span class="k">return</span> <span class="n">b</span> <span class="o">*</span> <span class="nb">sum</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">seg_len</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">seg_len</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>

        <span class="n">start_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_start_t</span><span class="p">()</span>
        <span class="n">end_angle</span> <span class="o">=</span> <span class="n">start_angle</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span>
        <span class="k">return</span> <span class="n">ellipse_part_integral</span><span class="p">(</span><span class="n">start_angle</span><span class="p">,</span> <span class="n">end_angle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc._exact_length"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc._exact_length">[docs]</a>    <span class="k">def</span> <span class="nf">_exact_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;scipy is not a dependency. However, if scipy exists this function will find the</span>
<span class="sd">        exact arc length. By default .length() delegates to here and on failure uses the</span>
<span class="sd">        fallback method.&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">scipy.special</span> <span class="kn">import</span> <span class="n">ellipeinc</span>

        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
        <span class="n">phi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_start_t</span><span class="p">()</span>
        <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
        <span class="n">d1</span> <span class="o">=</span> <span class="n">ellipeinc</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
        <span class="n">phi</span> <span class="o">=</span> <span class="n">phi</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span>
        <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="n">ellipeinc</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">b</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.length"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="n">MIN_DEPTH</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The length of an elliptical arc segment requires numerical</span>
<span class="sd">        integration, and in that case it&#39;s simpler to just do a geometric</span>
<span class="sd">        approximation, as for cubic bezier curves.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># This is equivalent of omitting the segment</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">ERROR</span><span class="p">:</span>  <span class="c1"># This is a circle.</span>
            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exact_length</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>  <span class="c1"># Fallback on any failure</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_length</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">min_depth</span><span class="o">=</span><span class="n">min_depth</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc._svg_complex_parameterize"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc._svg_complex_parameterize">[docs]</a>    <span class="k">def</span> <span class="nf">_svg_complex_parameterize</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">arc_flag</span><span class="p">,</span> <span class="n">sweep_flag</span><span class="p">,</span> <span class="n">end</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parameterization with complex radius and having rotation factors.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_svg_parameterize</span><span class="p">(</span>
            <span class="n">Point</span><span class="p">(</span><span class="n">start</span><span class="p">),</span>
            <span class="n">radius</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
            <span class="n">radius</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
            <span class="n">rotation</span><span class="p">,</span>
            <span class="n">arc_flag</span><span class="p">,</span>
            <span class="n">sweep_flag</span><span class="p">,</span>
            <span class="n">Point</span><span class="p">(</span><span class="n">end</span><span class="p">),</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Arc._svg_parameterize"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc._svg_parameterize">[docs]</a>    <span class="k">def</span> <span class="nf">_svg_parameterize</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">large_arc_flag</span><span class="p">,</span> <span class="n">sweep_flag</span><span class="p">,</span> <span class="n">end</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Conversion from svg parameterization, our chosen native native form.</span>
<span class="sd">        http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes&quot;&quot;&quot;</span>

        <span class="n">large_arc_flag</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">large_arc_flag</span><span class="p">)</span>
        <span class="n">sweep_flag</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">sweep_flag</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">end</span>
        <span class="k">if</span> <span class="n">start</span> <span class="o">==</span> <span class="n">end</span> <span class="ow">or</span> <span class="n">rx</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">ry</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># If start is equal to end, there are infinite number of circles so these void out.</span>
            <span class="c1"># We still permit this kind of arc, but SVG parameterization cannot be</span>
            <span class="c1"># used to achieve it.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">cosr</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">rotation</span><span class="p">))</span>
        <span class="n">sinr</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">rotation</span><span class="p">))</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">real</span> <span class="o">-</span> <span class="n">end</span><span class="o">.</span><span class="n">real</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">imag</span> <span class="o">-</span> <span class="n">end</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">x1prim</span> <span class="o">=</span> <span class="n">cosr</span> <span class="o">*</span> <span class="n">dx</span> <span class="o">+</span> <span class="n">sinr</span> <span class="o">*</span> <span class="n">dy</span>
        <span class="n">x1prim_sq</span> <span class="o">=</span> <span class="n">x1prim</span> <span class="o">*</span> <span class="n">x1prim</span>
        <span class="n">y1prim</span> <span class="o">=</span> <span class="o">-</span><span class="n">sinr</span> <span class="o">*</span> <span class="n">dx</span> <span class="o">+</span> <span class="n">cosr</span> <span class="o">*</span> <span class="n">dy</span>
        <span class="n">y1prim_sq</span> <span class="o">=</span> <span class="n">y1prim</span> <span class="o">*</span> <span class="n">y1prim</span>

        <span class="n">rx_sq</span> <span class="o">=</span> <span class="n">rx</span> <span class="o">*</span> <span class="n">rx</span>
        <span class="n">ry_sq</span> <span class="o">=</span> <span class="n">ry</span> <span class="o">*</span> <span class="n">ry</span>

        <span class="c1"># Correct out of range radii</span>
        <span class="n">radius_check</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1prim_sq</span> <span class="o">/</span> <span class="n">rx_sq</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">y1prim_sq</span> <span class="o">/</span> <span class="n">ry_sq</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">radius_check</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">rx</span> <span class="o">*=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">radius_check</span><span class="p">)</span>
            <span class="n">ry</span> <span class="o">*=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">radius_check</span><span class="p">)</span>
            <span class="n">rx_sq</span> <span class="o">=</span> <span class="n">rx</span> <span class="o">*</span> <span class="n">rx</span>
            <span class="n">ry_sq</span> <span class="o">=</span> <span class="n">ry</span> <span class="o">*</span> <span class="n">ry</span>

        <span class="n">t1</span> <span class="o">=</span> <span class="n">rx_sq</span> <span class="o">*</span> <span class="n">y1prim_sq</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">ry_sq</span> <span class="o">*</span> <span class="n">x1prim_sq</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="nb">abs</span><span class="p">((</span><span class="n">rx_sq</span> <span class="o">*</span> <span class="n">ry_sq</span> <span class="o">-</span> <span class="n">t1</span> <span class="o">-</span> <span class="n">t2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">t1</span> <span class="o">+</span> <span class="n">t2</span><span class="p">)))</span>

        <span class="k">if</span> <span class="n">large_arc_flag</span> <span class="o">==</span> <span class="n">sweep_flag</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="n">c</span>
        <span class="n">cxprim</span> <span class="o">=</span> <span class="n">c</span> <span class="o">*</span> <span class="n">rx</span> <span class="o">*</span> <span class="n">y1prim</span> <span class="o">/</span> <span class="n">ry</span>
        <span class="n">cyprim</span> <span class="o">=</span> <span class="o">-</span><span class="n">c</span> <span class="o">*</span> <span class="n">ry</span> <span class="o">*</span> <span class="n">x1prim</span> <span class="o">/</span> <span class="n">rx</span>

        <span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span>
            <span class="p">(</span><span class="n">cosr</span> <span class="o">*</span> <span class="n">cxprim</span> <span class="o">-</span> <span class="n">sinr</span> <span class="o">*</span> <span class="n">cyprim</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="n">start</span><span class="o">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">end</span><span class="o">.</span><span class="n">real</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
            <span class="p">(</span><span class="n">sinr</span> <span class="o">*</span> <span class="n">cxprim</span> <span class="o">+</span> <span class="n">cosr</span> <span class="o">*</span> <span class="n">cyprim</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="n">start</span><span class="o">.</span><span class="n">imag</span> <span class="o">+</span> <span class="n">end</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">ux</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1prim</span> <span class="o">-</span> <span class="n">cxprim</span><span class="p">)</span> <span class="o">/</span> <span class="n">rx</span>
        <span class="n">uy</span> <span class="o">=</span> <span class="p">(</span><span class="n">y1prim</span> <span class="o">-</span> <span class="n">cyprim</span><span class="p">)</span> <span class="o">/</span> <span class="n">ry</span>
        <span class="n">vx</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">x1prim</span> <span class="o">-</span> <span class="n">cxprim</span><span class="p">)</span> <span class="o">/</span> <span class="n">rx</span>
        <span class="n">vy</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">y1prim</span> <span class="o">-</span> <span class="n">cyprim</span><span class="p">)</span> <span class="o">/</span> <span class="n">ry</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">ux</span> <span class="o">*</span> <span class="n">ux</span> <span class="o">+</span> <span class="n">uy</span> <span class="o">*</span> <span class="n">uy</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">ux</span>
        <span class="c1"># theta = degrees(acos(p / n))</span>
        <span class="c1"># if uy &lt; 0:</span>
        <span class="c1">#     theta = -theta</span>
        <span class="c1"># theta = theta % 360</span>

        <span class="n">n</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">((</span><span class="n">ux</span> <span class="o">*</span> <span class="n">ux</span> <span class="o">+</span> <span class="n">uy</span> <span class="o">*</span> <span class="n">uy</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">vx</span> <span class="o">*</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="n">vy</span><span class="p">))</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">ux</span> <span class="o">*</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">uy</span> <span class="o">*</span> <span class="n">vy</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">p</span> <span class="o">/</span> <span class="n">n</span>
        <span class="c1"># In certain cases the above calculation can through inaccuracies</span>
        <span class="c1"># become just slightly out of range, f ex -1.0000000000000002.</span>
        <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">elif</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">degrees</span><span class="p">(</span><span class="n">acos</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ux</span> <span class="o">*</span> <span class="n">vy</span> <span class="o">-</span> <span class="n">uy</span> <span class="o">*</span> <span class="n">vx</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="o">-</span><span class="n">delta</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="o">%</span> <span class="mi">360</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sweep_flag</span><span class="p">:</span>
            <span class="n">delta</span> <span class="o">-=</span> <span class="mi">360</span>
        <span class="c1"># built parameters, delta, theta, center</span>

        <span class="n">rotate_matrix</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">()</span>
        <span class="n">rotate_matrix</span><span class="o">.</span><span class="n">post_rotate</span><span class="p">(</span>
            <span class="n">Angle</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span><span class="o">.</span><span class="n">as_radians</span><span class="p">,</span> <span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">center</span><span class="o">.</span><span class="n">y</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">center</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prx</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">center</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">rx</span><span class="p">,</span> <span class="n">center</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pry</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">center</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">ry</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">prx</span><span class="o">.</span><span class="n">matrix_transform</span><span class="p">(</span><span class="n">rotate_matrix</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pry</span><span class="o">.</span><span class="n">matrix_transform</span><span class="p">(</span><span class="n">rotate_matrix</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span><span class="o">.</span><span class="n">as_radians</span></div>

<div class="viewcode-block" id="Arc.as_quad_curves"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.as_quad_curves">[docs]</a>    <span class="k">def</span> <span class="nf">as_quad_curves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arc_required</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">arc_required</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sweep_limit</span> <span class="o">=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">12.0</span>
            <span class="n">arc_required</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sweep</span><span class="p">)</span> <span class="o">/</span> <span class="n">sweep_limit</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">arc_required</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">t_slice</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">arc_required</span><span class="p">)</span>

        <span class="n">current_t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_start_t</span><span class="p">()</span>
        <span class="n">p_start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>

        <span class="n">theta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">()</span>
        <span class="n">cos_theta</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="n">sin_theta</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
        <span class="n">cx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span>
        <span class="n">cy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">arc_required</span><span class="p">):</span>
            <span class="n">next_t</span> <span class="o">=</span> <span class="n">current_t</span> <span class="o">+</span> <span class="n">t_slice</span>
            <span class="n">mid_t</span> <span class="o">=</span> <span class="p">(</span><span class="n">next_t</span> <span class="o">+</span> <span class="n">current_t</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">p_end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">next_t</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">arc_required</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">p_end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
            <span class="n">cos_mid_t</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">mid_t</span><span class="p">)</span>
            <span class="n">sin_mid_t</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">mid_t</span><span class="p">)</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="p">(</span><span class="mf">4.0</span> <span class="o">-</span> <span class="n">cos</span><span class="p">(</span><span class="n">t_slice</span><span class="p">))</span> <span class="o">/</span> <span class="mf">3.0</span>
            <span class="n">px</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">+</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">cos_mid_t</span> <span class="o">*</span> <span class="n">cos_theta</span> <span class="o">-</span> <span class="n">b</span> <span class="o">*</span> <span class="n">sin_mid_t</span> <span class="o">*</span> <span class="n">sin_theta</span><span class="p">)</span>
            <span class="n">py</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">+</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">cos_mid_t</span> <span class="o">*</span> <span class="n">sin_theta</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">sin_mid_t</span> <span class="o">*</span> <span class="n">cos_theta</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">QuadraticBezier</span><span class="p">(</span><span class="n">p_start</span><span class="p">,</span> <span class="p">(</span><span class="n">px</span><span class="p">,</span> <span class="n">py</span><span class="p">),</span> <span class="n">p_end</span><span class="p">)</span>
            <span class="n">p_start</span> <span class="o">=</span> <span class="n">p_end</span>
            <span class="n">current_t</span> <span class="o">=</span> <span class="n">next_t</span></div>

<div class="viewcode-block" id="Arc.as_cubic_curves"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.as_cubic_curves">[docs]</a>    <span class="k">def</span> <span class="nf">as_cubic_curves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arc_required</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">arc_required</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sweep_limit</span> <span class="o">=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">12.0</span>
            <span class="n">arc_required</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sweep</span><span class="p">)</span> <span class="o">/</span> <span class="n">sweep_limit</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">arc_required</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">t_slice</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">arc_required</span><span class="p">)</span>

        <span class="n">theta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">()</span>
        <span class="n">rx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="n">ry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
        <span class="n">p_start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="n">current_t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_start_t</span><span class="p">()</span>
        <span class="n">x0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span>
        <span class="n">y0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span>
        <span class="n">cos_theta</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="n">sin_theta</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">arc_required</span><span class="p">):</span>
            <span class="n">next_t</span> <span class="o">=</span> <span class="n">current_t</span> <span class="o">+</span> <span class="n">t_slice</span>

            <span class="n">alpha</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">t_slice</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="n">tan</span><span class="p">(</span><span class="n">t_slice</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.0</span>

            <span class="n">cos_start_t</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">current_t</span><span class="p">)</span>
            <span class="n">sin_start_t</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">current_t</span><span class="p">)</span>

            <span class="n">ePrimen1x</span> <span class="o">=</span> <span class="o">-</span><span class="n">rx</span> <span class="o">*</span> <span class="n">cos_theta</span> <span class="o">*</span> <span class="n">sin_start_t</span> <span class="o">-</span> <span class="n">ry</span> <span class="o">*</span> <span class="n">sin_theta</span> <span class="o">*</span> <span class="n">cos_start_t</span>
            <span class="n">ePrimen1y</span> <span class="o">=</span> <span class="o">-</span><span class="n">rx</span> <span class="o">*</span> <span class="n">sin_theta</span> <span class="o">*</span> <span class="n">sin_start_t</span> <span class="o">+</span> <span class="n">ry</span> <span class="o">*</span> <span class="n">cos_theta</span> <span class="o">*</span> <span class="n">cos_start_t</span>

            <span class="n">cos_end_t</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">next_t</span><span class="p">)</span>
            <span class="n">sin_end_t</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">next_t</span><span class="p">)</span>

            <span class="n">p2En2x</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">rx</span> <span class="o">*</span> <span class="n">cos_end_t</span> <span class="o">*</span> <span class="n">cos_theta</span> <span class="o">-</span> <span class="n">ry</span> <span class="o">*</span> <span class="n">sin_end_t</span> <span class="o">*</span> <span class="n">sin_theta</span>
            <span class="n">p2En2y</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">rx</span> <span class="o">*</span> <span class="n">cos_end_t</span> <span class="o">*</span> <span class="n">sin_theta</span> <span class="o">+</span> <span class="n">ry</span> <span class="o">*</span> <span class="n">sin_end_t</span> <span class="o">*</span> <span class="n">cos_theta</span>
            <span class="n">p_end</span> <span class="o">=</span> <span class="p">(</span><span class="n">p2En2x</span><span class="p">,</span> <span class="n">p2En2y</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">arc_required</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">p_end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>

            <span class="n">ePrimen2x</span> <span class="o">=</span> <span class="o">-</span><span class="n">rx</span> <span class="o">*</span> <span class="n">cos_theta</span> <span class="o">*</span> <span class="n">sin_end_t</span> <span class="o">-</span> <span class="n">ry</span> <span class="o">*</span> <span class="n">sin_theta</span> <span class="o">*</span> <span class="n">cos_end_t</span>
            <span class="n">ePrimen2y</span> <span class="o">=</span> <span class="o">-</span><span class="n">rx</span> <span class="o">*</span> <span class="n">sin_theta</span> <span class="o">*</span> <span class="n">sin_end_t</span> <span class="o">+</span> <span class="n">ry</span> <span class="o">*</span> <span class="n">cos_theta</span> <span class="o">*</span> <span class="n">cos_end_t</span>

            <span class="n">p_c1</span> <span class="o">=</span> <span class="p">(</span><span class="n">p_start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">ePrimen1x</span><span class="p">,</span> <span class="n">p_start</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">ePrimen1y</span><span class="p">)</span>
            <span class="n">p_c2</span> <span class="o">=</span> <span class="p">(</span><span class="n">p_end</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">ePrimen2x</span><span class="p">,</span> <span class="n">p_end</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">ePrimen2y</span><span class="p">)</span>

            <span class="k">yield</span> <span class="n">CubicBezier</span><span class="p">(</span><span class="n">p_start</span><span class="p">,</span> <span class="n">p_c1</span><span class="p">,</span> <span class="n">p_c2</span><span class="p">,</span> <span class="n">p_end</span><span class="p">)</span>
            <span class="n">p_start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">p_end</span><span class="p">)</span>
            <span class="n">current_t</span> <span class="o">=</span> <span class="n">next_t</span></div>

<div class="viewcode-block" id="Arc.is_circular"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.is_circular">[docs]</a>    <span class="k">def</span> <span class="nf">is_circular</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">radius</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Legacy complex radius property</span>

<span class="sd">        Point will work like a complex for legacy reasons.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Point</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prx</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Point</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pry</span><span class="p">)</span>

<div class="viewcode-block" id="Arc.get_rotation"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.get_rotation">[docs]</a>    <span class="k">def</span> <span class="nf">get_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Point</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prx</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.get_start_angle"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.get_start_angle">[docs]</a>    <span class="k">def</span> <span class="nf">get_start_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Angle from the center point to start point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle_at_point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.get_end_angle"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.get_end_angle">[docs]</a>    <span class="k">def</span> <span class="nf">get_end_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Angle from the center point to end point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle_at_point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.get_start_t"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.get_start_t">[docs]</a>    <span class="k">def</span> <span class="nf">get_start_t</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        start t value in the ellipse.</span>

<span class="sd">        :return: t parameter of start point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_at_point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point_at_angle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_start_angle</span><span class="p">()))</span></div>

<div class="viewcode-block" id="Arc.get_end_t"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.get_end_t">[docs]</a>    <span class="k">def</span> <span class="nf">get_end_t</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        end t value in the ellipse.</span>

<span class="sd">        :return: t parameter of start point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_at_point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point_at_angle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_end_angle</span><span class="p">()))</span></div>

<div class="viewcode-block" id="Arc.point_at_angle"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.point_at_angle">[docs]</a>    <span class="k">def</span> <span class="nf">point_at_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        find the point on the ellipse from the center at the given angle.</span>
<span class="sd">        Note: For non-circular arcs this is different than point(t).</span>

<span class="sd">        :param angle: angle from center to find point</span>
<span class="sd">        :return: point found</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">angle</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">()</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">atan2</span><span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">tan</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">tau_1_4</span> <span class="o">=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">4.0</span>
        <span class="n">tau_3_4</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">tau_1_4</span>
        <span class="k">if</span> <span class="n">tau_3_4</span> <span class="o">&gt;=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">%</span> <span class="n">tau</span> <span class="o">&gt;</span> <span class="n">tau_1_4</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">+=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">t</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.angle_at_point"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.angle_at_point">[docs]</a>    <span class="k">def</span> <span class="nf">angle_at_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        find the angle to the point.</span>

<span class="sd">        :param p: point</span>
<span class="sd">        :return: angle to given point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">angle_to</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.t_at_point"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.t_at_point">[docs]</a>    <span class="k">def</span> <span class="nf">t_at_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        find the t parameter to at the point.</span>

<span class="sd">        :param p: point</span>
<span class="sd">        :return: t parameter to the given point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle_at_point</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">angle</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">()</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">atan2</span><span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">tan</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">tau_1_4</span> <span class="o">=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">4.0</span>
        <span class="n">tau_3_4</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">tau_1_4</span>
        <span class="k">if</span> <span class="n">tau_3_4</span> <span class="o">&gt;=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">%</span> <span class="n">tau</span> <span class="o">&gt;</span> <span class="n">tau_1_4</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">+=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="k">return</span> <span class="n">t</span></div>

<div class="viewcode-block" id="Arc.point_at_t"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.point_at_t">[docs]</a>    <span class="k">def</span> <span class="nf">point_at_t</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        find the point that corresponds to given value t.</span>
<span class="sd">        Where t=0 is the first point and t=tau is the final point.</span>

<span class="sd">        In the case of a circle: t = angle.</span>

<span class="sd">        :param t:</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">()</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
        <span class="n">cx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span>
        <span class="n">cy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span>
        <span class="n">cos_rot</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
        <span class="n">sin_rot</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
        <span class="n">cos_t</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="n">sin_t</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="n">px</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">+</span> <span class="n">a</span> <span class="o">*</span> <span class="n">cos_t</span> <span class="o">*</span> <span class="n">cos_rot</span> <span class="o">-</span> <span class="n">b</span> <span class="o">*</span> <span class="n">sin_t</span> <span class="o">*</span> <span class="n">sin_rot</span>
        <span class="n">py</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">+</span> <span class="n">a</span> <span class="o">*</span> <span class="n">cos_t</span> <span class="o">*</span> <span class="n">sin_rot</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">sin_t</span> <span class="o">*</span> <span class="n">cos_rot</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">px</span><span class="p">,</span> <span class="n">py</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.get_ellipse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.get_ellipse">[docs]</a>    <span class="k">def</span> <span class="nf">get_ellipse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Ellipse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">())</span></div>

<div class="viewcode-block" id="Arc.bbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.bbox">[docs]</a>    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Find the bounding box of a arc.</span>
<span class="sd">        Code from: https://github.com/mathandy/svgpathtools</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">y</span>
        <span class="n">phi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">()</span><span class="o">.</span><span class="n">as_radians</span>
        <span class="k">if</span> <span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">atan_x</span> <span class="o">=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">4.0</span>
            <span class="n">atan_y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">atan_x</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">atan_y</span> <span class="o">=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">4.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
            <span class="n">atan_x</span> <span class="o">=</span> <span class="n">atan</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">ry</span> <span class="o">/</span> <span class="n">rx</span><span class="p">)</span> <span class="o">*</span> <span class="n">tan</span><span class="p">(</span><span class="n">phi</span><span class="p">))</span>
            <span class="n">atan_y</span> <span class="o">=</span> <span class="n">atan</span><span class="p">((</span><span class="n">ry</span> <span class="o">/</span> <span class="n">rx</span><span class="p">)</span> <span class="o">/</span> <span class="n">tan</span><span class="p">(</span><span class="n">phi</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">angle_inv</span><span class="p">(</span><span class="n">ang</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>  <span class="c1"># inverse of angle from Arc.derivative()</span>
            <span class="k">return</span> <span class="p">((</span><span class="n">ang</span> <span class="o">+</span> <span class="p">(</span><span class="n">tau</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">k</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">360</span> <span class="o">/</span> <span class="n">tau</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta</span>

        <span class="n">xtrema</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">]</span>
        <span class="n">ytrema</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
            <span class="n">tx</span> <span class="o">=</span> <span class="n">angle_inv</span><span class="p">(</span><span class="n">atan_x</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
            <span class="n">ty</span> <span class="o">=</span> <span class="n">angle_inv</span><span class="p">(</span><span class="n">atan_y</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">tx</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">xtrema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">ty</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">ytrema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">ty</span><span class="p">)</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xtrema</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">ytrema</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xtrema</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ytrema</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.d"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Arc.d">[docs]</a>    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">current_point</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">relative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">relative</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;A </span><span class="si">%G</span><span class="s2">,</span><span class="si">%G</span><span class="s2"> </span><span class="si">%G</span><span class="s2"> </span><span class="si">%d</span><span class="s2">,</span><span class="si">%d</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">()</span><span class="o">.</span><span class="n">as_degrees</span><span class="p">,</span>
                <span class="nb">int</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sweep</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">tau</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)),</span>
                <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;a </span><span class="si">%G</span><span class="s2">,</span><span class="si">%G</span><span class="s2"> </span><span class="si">%G</span><span class="s2"> </span><span class="si">%d</span><span class="s2">,</span><span class="si">%d</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">()</span><span class="o">.</span><span class="n">as_degrees</span><span class="p">,</span>
                <span class="nb">int</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sweep</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">tau</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)),</span>
                <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sweep</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">current_point</span><span class="p">,</span>
            <span class="p">)</span></div></div>


<div class="viewcode-block" id="Path"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path">[docs]</a><span class="k">class</span> <span class="nc">Path</span><span class="p">(</span><span class="n">Shape</span><span class="p">,</span> <span class="n">MutableSequence</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Path is a Mutable sequence of path segments</span>

<span class="sd">    It is a generalized shape which can map out all the other shapes.</span>

<span class="sd">    Each PathSegment object maps a particular command. Each one exists only once in each path and every point contained</span>
<span class="sd">    within the object is also unique. We attempt to internally maintain some validity. Each end point should link</span>
<span class="sd">    to the following segments start point. And each close point should connect from the preceding segments endpoint to</span>
<span class="sd">    the last Move command.</span>

<span class="sd">    These are soft checks made only at the time of addition and some manipulations. Modifying the points of the segments</span>
<span class="sd">    can and will cause path invalidity. Some SVG invalid operations are permitted such as arcs longer than tau radians</span>
<span class="sd">    or beginning sequences without a move. The expectation is that these will eventually be used as part of a valid path</span>
<span class="sd">    so these fragment paths are permitted. In some cases these invalid paths will still have consistent path_d values,</span>
<span class="sd">    in other cases, there will be no valid methods to reproduce these.</span>

<span class="sd">    Instantiation formats:</span>

<span class="sd">    Path(&quot;d-string&quot;, keywords)</span>
<span class="sd">    Path(pathsegment1,...)</span>
<span class="sd">    Path(d=&quot;d-string&quot;, other keywords)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Shape</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lengths</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">PathSegment</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s2">&quot;Object not PathSegment when instantiating a Path: </span><span class="si">%s</span><span class="s2">&quot;</span>
                        <span class="o">%</span> <span class="n">segment</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
                    <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Subpath</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">segments</span><span class="p">(</span><span class="n">transformed</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
                <span class="n">Shape</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">_path</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Shape</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">segments</span><span class="p">(</span><span class="n">transformed</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="c1"># We have no guarantee of the validity of the source data</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">validate_connections</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="c1"># We have no guarantee of the validity of the source data</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">validate_connections</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">PathSegment</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">SVG_ATTR_DATA</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="c1"># Not sure what the purpose of pathd_loaded is.</span>
            <span class="c1"># It is only set and checked here and you cannot have &quot;d&quot; attribute more</span>
            <span class="c1"># than once anyway</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pathd_loaded&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_DATA</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;pathd_loaded&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">segs</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">_segments</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">segs</span><span class="p">)):</span>
            <span class="n">segs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">segs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">path</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

<div class="viewcode-block" id="Path._validate_subpath"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path._validate_subpath">[docs]</a>    <span class="k">def</span> <span class="nf">_validate_subpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;ensure the subpath containing this index is valid.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">):</span>
            <span class="k">return</span>  <span class="c1"># This connection doesn&#39;t exist.</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">)):</span>
            <span class="n">close_search</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">close_search</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
                <span class="k">return</span>  <span class="c1"># Not a closed path, subpath is valid.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">close_search</span><span class="p">,</span> <span class="n">Close</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                    <span class="n">move_search</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">move_search</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">move_search</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
                        <span class="k">return</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
                <span class="k">return</span></div>

<div class="viewcode-block" id="Path._validate_move"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path._validate_move">[docs]</a>    <span class="k">def</span> <span class="nf">_validate_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;ensure the next closed point from this index points to a valid location.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">)):</span>
            <span class="n">segment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
                <span class="k">return</span>  <span class="c1"># Not a closed path, the move is valid.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">Close</span><span class="p">):</span>
                <span class="n">segment</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
                <span class="k">return</span></div>

<div class="viewcode-block" id="Path._validate_close"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path._validate_close">[docs]</a>    <span class="k">def</span> <span class="nf">_validate_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;ensure the close element at this position correctly links to the previous move&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">segment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span></div>
        <span class="c1"># If move is never found, just the end point of the first element. Unless</span>
        <span class="c1"># that&#39;s not a thing.</span>

<div class="viewcode-block" id="Path._validate_connection"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path._validate_connection">[docs]</a>    <span class="k">def</span> <span class="nf">_validate_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">prefer_second</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validates the connection at the index.</span>
<span class="sd">        Connection 0 is the connection between getitem(0) and getitem(1)</span>

<span class="sd">        prefer_second is for those cases where failing the connection requires replacing</span>
<span class="sd">        a existing value. It will prefer the authority of right side, second value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">):</span>
            <span class="k">return</span>  <span class="c1"># This connection doesn&#39;t exist.</span>
        <span class="n">first</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="n">second</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">first</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">second</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">second</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">first</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">first</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">second</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">first</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">second</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">first</span><span class="o">.</span><span class="n">end</span> <span class="o">!=</span> <span class="n">second</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
            <span class="c1"># The two values exist but are not equal. One must replace the other.</span>
            <span class="k">if</span> <span class="n">prefer_second</span><span class="p">:</span>
                <span class="n">first</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">second</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">second</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">first</span><span class="o">.</span><span class="n">end</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">new_element</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_element</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">new_element</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">new_element</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_element</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">new_element</span> <span class="o">=</span> <span class="n">new_element</span><span class="o">.</span><span class="n">segments</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_element</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="c1"># Cannot insert multiple items into a single space. Requires slice.</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span>
                <span class="n">new_element</span> <span class="o">=</span> <span class="n">new_element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lengths</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_connections</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_connection</span><span class="p">(</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_connection</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_element</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_validate_move</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_element</span><span class="p">,</span> <span class="n">Close</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_validate_close</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">original_element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_connections</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_connection</span><span class="p">(</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">original_element</span><span class="p">,</span> <span class="p">(</span><span class="n">Close</span><span class="p">,</span> <span class="n">Move</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_validate_subpath</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">Path</span><span class="p">,</span> <span class="n">Subpath</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Shape</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">d</span><span class="p">())</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PathSegment</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Subpath</span><span class="p">,</span> <span class="n">Shape</span><span class="p">,</span> <span class="n">PathSegment</span><span class="p">)):</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="n">n</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="n">path</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">path</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PathSegment</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_repr_shape</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">p</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">q</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">q</span><span class="o">.</span><span class="n">_segments</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">_segments</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span> <span class="o">==</span> <span class="n">o</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">!=</span> <span class="n">q</span><span class="o">.</span><span class="n">stroke_width</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

<div class="viewcode-block" id="Path.parse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pathdef</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parses the SVG path.&quot;&quot;&quot;</span>
        <span class="n">tokens</span> <span class="o">=</span> <span class="n">SVGLexicalParser</span><span class="p">()</span>
        <span class="n">tokens</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pathdef</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.validate_connections"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.validate_connections">[docs]</a>    <span class="k">def</span> <span class="nf">validate_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Force validate all connections.</span>

<span class="sd">        This will scan path connections and link any adjacent elements together by replacing any None points or causing</span>
<span class="sd">        the start position of the next element to equal the end position of the previous. This should only be needed</span>
<span class="sd">        when combining paths and elements together. Close elements are always connected to the last Move element or to</span>
<span class="sd">        the end position of the first element in the list. The start element of the first segment may or may not be</span>
<span class="sd">        None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">zpoint</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">last_segment</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">zpoint</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
                <span class="n">zpoint</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">end</span>
            <span class="k">if</span> <span class="n">last_segment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">segment</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">last_segment</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">segment</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">last_segment</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">last_segment</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">segment</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">last_segment</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">last_segment</span><span class="o">.</span><span class="n">end</span> <span class="o">!=</span> <span class="n">segment</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
                    <span class="n">segment</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">last_segment</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">Close</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">zpoint</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="n">segment</span><span class="o">.</span><span class="n">end</span> <span class="o">!=</span> <span class="n">zpoint</span>
            <span class="p">):</span>
                <span class="n">segment</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">zpoint</span><span class="p">)</span>
            <span class="n">last_segment</span> <span class="o">=</span> <span class="n">segment</span></div>

<div class="viewcode-block" id="Path._is_valid"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path._is_valid">[docs]</a>    <span class="k">def</span> <span class="nf">_is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks validation of all connections.</span>

<span class="sd">        Paths are valid if all end points match the start of the next point and all close</span>
<span class="sd">        commands return to the last valid move command.</span>

<span class="sd">        This does not check for incongruent path validity. Path fragments without initial moves</span>
<span class="sd">        double closed paths, may all pass this check.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">zpoint</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">last_segment</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">zpoint</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
                <span class="n">zpoint</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">end</span>
            <span class="k">if</span> <span class="n">last_segment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">segment</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="k">elif</span> <span class="n">last_segment</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="k">elif</span> <span class="n">last_segment</span><span class="o">.</span><span class="n">end</span> <span class="o">!=</span> <span class="n">segment</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">Close</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">zpoint</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="n">segment</span><span class="o">.</span><span class="n">end</span> <span class="o">!=</span> <span class="n">zpoint</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">last_segment</span> <span class="o">=</span> <span class="n">segment</span>
        <span class="k">return</span> <span class="kc">True</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">first_point</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;First point along the Path. This is the start point of the first segment unless it starts</span>
<span class="sd">        with a Move command with a None start in which case first point is that Move&#39;s destination.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_point</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">z_point</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Z is the destination of the last Move. It can mean, but doesn&#39;t necessarily mean the first_point in the path.</span>
<span class="sd">        This behavior of Z is defined in svg spec:</span>
<span class="sd">        http://www.w3.org/TR/SVG/paths.html#PathDataClosePathCommand</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">end_pos</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
                <span class="n">end_pos</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">end</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">end_pos</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">end_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># entire path is &quot;z&quot;.</span>
        <span class="k">return</span> <span class="n">end_pos</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">smooth_point</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the smoothing control point for the smooth commands.</span>
<span class="sd">        With regards to the SVG standard if the last command was a curve the smooth</span>
<span class="sd">        control point is the reflection of the previous control point.</span>

<span class="sd">        If the last command was not a curve, the smooth_point is coincident with the current.</span>
<span class="sd">        https://www.w3.org/TR/SVG/paths.html#PathDataCubicBezierCommands</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">start_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
        <span class="n">last_segment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">last_segment</span><span class="p">,</span> <span class="n">QuadraticBezier</span><span class="p">):</span>
            <span class="n">previous_control</span> <span class="o">=</span> <span class="n">last_segment</span><span class="o">.</span><span class="n">control</span>
            <span class="k">return</span> <span class="n">previous_control</span><span class="o">.</span><span class="n">reflected_across</span><span class="p">(</span><span class="n">start_pos</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">last_segment</span><span class="p">,</span> <span class="n">CubicBezier</span><span class="p">):</span>
            <span class="n">previous_control</span> <span class="o">=</span> <span class="n">last_segment</span><span class="o">.</span><span class="n">control2</span>
            <span class="k">return</span> <span class="n">previous_control</span><span class="o">.</span><span class="n">reflected_across</span><span class="p">(</span><span class="n">start_pos</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">start_pos</span>

<div class="viewcode-block" id="Path.start"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.start">[docs]</a>    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Path.end"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.end">[docs]</a>    <span class="k">def</span> <span class="nf">end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Path.move"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.move">[docs]</a>    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">relative</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;relative&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="n">start_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
        <span class="n">end_pos</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">end_pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">):</span>
            <span class="n">end_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_point</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">Move</span><span class="p">(</span><span class="n">start_pos</span><span class="p">,</span> <span class="n">end_pos</span><span class="p">)</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="n">relative</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="o">*</span><span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">relative</span><span class="o">=</span><span class="n">relative</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.line"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.line">[docs]</a>    <span class="k">def</span> <span class="nf">line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">relative</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;relative&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="n">start_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
        <span class="n">end_pos</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">end_pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">):</span>
            <span class="n">end_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_point</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">start_pos</span><span class="p">,</span> <span class="n">end_pos</span><span class="p">)</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="n">relative</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="o">*</span><span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.vertical"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.vertical">[docs]</a>    <span class="k">def</span> <span class="nf">vertical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">y_points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">relative</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;relative&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="n">start_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
        <span class="k">if</span> <span class="n">relative</span><span class="p">:</span>
            <span class="n">segment</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">start_pos</span><span class="p">,</span> <span class="n">Point</span><span class="p">(</span><span class="n">start_pos</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">start_pos</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">y_points</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">segment</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">start_pos</span><span class="p">,</span> <span class="n">Point</span><span class="p">(</span><span class="n">start_pos</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y_points</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="n">relative</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">y_points</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vertical</span><span class="p">(</span><span class="o">*</span><span class="n">y_points</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">relative</span><span class="o">=</span><span class="n">relative</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.horizontal"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.horizontal">[docs]</a>    <span class="k">def</span> <span class="nf">horizontal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">x_points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">relative</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;relative&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="n">start_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
        <span class="k">if</span> <span class="n">relative</span><span class="p">:</span>
            <span class="n">segment</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">start_pos</span><span class="p">,</span> <span class="n">Point</span><span class="p">(</span><span class="n">start_pos</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">x_points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">start_pos</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
            <span class="n">segment</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="n">relative</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">segment</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">start_pos</span><span class="p">,</span> <span class="n">Point</span><span class="p">(</span><span class="n">x_points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">start_pos</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
            <span class="n">segment</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="n">relative</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x_points</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">horizontal</span><span class="p">(</span><span class="o">*</span><span class="n">x_points</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">relative</span><span class="o">=</span><span class="n">relative</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.smooth_quad"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.smooth_quad">[docs]</a>    <span class="k">def</span> <span class="nf">smooth_quad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Smooth curve. First control point is the &quot;reflection&quot; of</span>
<span class="sd">        the second control point in the previous path.&quot;&quot;&quot;</span>
        <span class="n">relative</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;relative&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="n">start_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
        <span class="n">control1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">smooth_point</span>
        <span class="n">end_pos</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">end_pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">):</span>
            <span class="n">end_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_point</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">QuadraticBezier</span><span class="p">(</span><span class="n">start_pos</span><span class="p">,</span> <span class="n">control1</span><span class="p">,</span> <span class="n">end_pos</span><span class="p">)</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="n">relative</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">smooth</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">smooth_quad</span><span class="p">(</span><span class="o">*</span><span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.quad"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.quad">[docs]</a>    <span class="k">def</span> <span class="nf">quad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">relative</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;relative&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="n">start_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
        <span class="n">control</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">control</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">):</span>
            <span class="n">control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_point</span>
        <span class="n">end_pos</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">end_pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">):</span>
            <span class="n">end_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_point</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">QuadraticBezier</span><span class="p">(</span><span class="n">start_pos</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">end_pos</span><span class="p">)</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="n">relative</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">smooth</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">quad</span><span class="p">(</span><span class="o">*</span><span class="n">points</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.smooth_cubic"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.smooth_cubic">[docs]</a>    <span class="k">def</span> <span class="nf">smooth_cubic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Smooth curve. First control point is the &quot;reflection&quot; of</span>
<span class="sd">        the second control point in the previous path.&quot;&quot;&quot;</span>
        <span class="n">relative</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;relative&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="n">start_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
        <span class="n">control1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">smooth_point</span>
        <span class="n">control2</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">control2</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">):</span>
            <span class="n">control2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_point</span>
        <span class="n">end_pos</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">end_pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">):</span>
            <span class="n">end_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_point</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">CubicBezier</span><span class="p">(</span><span class="n">start_pos</span><span class="p">,</span> <span class="n">control1</span><span class="p">,</span> <span class="n">control2</span><span class="p">,</span> <span class="n">end_pos</span><span class="p">)</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="n">relative</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">smooth</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">smooth_cubic</span><span class="p">(</span><span class="o">*</span><span class="n">points</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.cubic"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.cubic">[docs]</a>    <span class="k">def</span> <span class="nf">cubic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">relative</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;relative&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="n">start_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
        <span class="n">control1</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">control1</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">):</span>
            <span class="n">control1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_point</span>
        <span class="n">control2</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">control2</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">):</span>
            <span class="n">control2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_point</span>
        <span class="n">end_pos</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">end_pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">):</span>
            <span class="n">end_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_point</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">CubicBezier</span><span class="p">(</span><span class="n">start_pos</span><span class="p">,</span> <span class="n">control1</span><span class="p">,</span> <span class="n">control2</span><span class="p">,</span> <span class="n">end_pos</span><span class="p">)</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="n">relative</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">smooth</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cubic</span><span class="p">(</span><span class="o">*</span><span class="n">points</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.arc"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.arc">[docs]</a>    <span class="k">def</span> <span class="nf">arc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">arc_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">relative</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;relative&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="n">start_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
        <span class="n">rx</span> <span class="o">=</span> <span class="n">arc_args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">ry</span> <span class="o">=</span> <span class="n">arc_args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">rx</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">rx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ry</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ry</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ry</span><span class="p">)</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="n">arc_args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">arc</span> <span class="o">=</span> <span class="n">arc_args</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">sweep</span> <span class="o">=</span> <span class="n">arc_args</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">end_pos</span> <span class="o">=</span> <span class="n">arc_args</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">end_pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">):</span>
            <span class="n">end_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_point</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">Arc</span><span class="p">(</span><span class="n">start_pos</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">arc</span><span class="p">,</span> <span class="n">sweep</span><span class="p">,</span> <span class="n">end_pos</span><span class="p">)</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="n">relative</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arc_args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span><span class="o">*</span><span class="n">arc_args</span><span class="p">[</span><span class="mi">6</span><span class="p">:])</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.closed"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.closed">[docs]</a>    <span class="k">def</span> <span class="nf">closed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">start_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
        <span class="n">end_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_point</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">Close</span><span class="p">(</span><span class="n">start_pos</span><span class="p">,</span> <span class="n">end_pos</span><span class="p">)</span>
        <span class="n">segment</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="n">relative</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.append"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_connection</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Close</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_close</span><span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.insert"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.insert">[docs]</a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_connection</span><span class="p">(</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_connection</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_move</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Close</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_close</span><span class="p">(</span><span class="n">index</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.extend"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.extend">[docs]</a>    <span class="k">def</span> <span class="nf">extend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">iterable</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_connection</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_subpath</span><span class="p">(</span><span class="n">index</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.direct_close"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.direct_close">[docs]</a>    <span class="k">def</span> <span class="nf">direct_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Forces close operations to be zero length by introducing a direct</span>
<span class="sd">        line to operation just before any non-zero length close.</span>

<span class="sd">        This is helpful because for some operations like reverse() because the</span>
<span class="sd">        close must located at the very end of the path sequence. But, if it&#39;s</span>
<span class="sd">        in effect a line-to and close, the line-to would need to start the sequence.</span>

<span class="sd">        But, for some operations this won&#39;t matter since it will still result in</span>
<span class="sd">        a closed shape with reversed ordering. But, if the final point in the</span>
<span class="sd">        sequence must exactly switch with the first point in the sequence. The</span>
<span class="sd">        close segments must be direct and zero length.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">segment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">Close</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">segment</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
                    <span class="n">segment</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.reverse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">prepoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="p">()</span>
        <span class="n">subpaths</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">as_subpaths</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">subpath</span> <span class="ow">in</span> <span class="n">subpaths</span><span class="p">:</span>
            <span class="n">subpath</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">subpath</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">subpaths</span><span class="p">):</span>
            <span class="n">p</span> <span class="o">+=</span> <span class="n">subpath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">_segments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">prepoint</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.subpath"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.subpath">[docs]</a>    <span class="k">def</span> <span class="nf">subpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">subpaths</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">as_subpaths</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">subpaths</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="Path.count_subpaths"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.count_subpaths">[docs]</a>    <span class="k">def</span> <span class="nf">count_subpaths</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">subpaths</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">as_subpaths</span><span class="p">())</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">subpaths</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.as_subpaths"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.as_subpaths">[docs]</a>    <span class="k">def</span> <span class="nf">as_subpaths</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">last</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">current</span><span class="p">,</span> <span class="n">seg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">current</span> <span class="o">!=</span> <span class="n">last</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">seg</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">Subpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last</span><span class="p">,</span> <span class="n">current</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">last</span> <span class="o">=</span> <span class="n">current</span>
        <span class="k">yield</span> <span class="n">Subpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.as_points"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.as_points">[docs]</a>    <span class="k">def</span> <span class="nf">as_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the list of defining points within path&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">seg</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Point</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">Point</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">p</span></div>

<div class="viewcode-block" id="Path.reify"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.reify">[docs]</a>    <span class="k">def</span> <span class="nf">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Realizes the transform to the shape properties.</span>

<span class="sd">        Path objects reify perfectly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">:</span>
                <span class="n">e</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Path.svg_d"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.svg_d">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">svg_d</span><span class="p">(</span><span class="n">segments</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">previous_segment</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">smooth</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">override_smooth</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">smooth_set_value</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">override_smooth</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">smooth_set_value</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">smooth</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">relative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="p">(</span><span class="n">Move</span><span class="p">,</span> <span class="n">Line</span><span class="p">,</span> <span class="n">Arc</span><span class="p">,</span> <span class="n">Close</span><span class="p">)):</span>
                    <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">d</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="n">relative</span><span class="p">))</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="p">(</span><span class="n">CubicBezier</span><span class="p">,</span> <span class="n">QuadraticBezier</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">override_smooth</span> <span class="ow">and</span> <span class="n">smooth_set_value</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                        <span class="ow">not</span> <span class="n">override_smooth</span> <span class="ow">and</span> <span class="n">segment</span><span class="o">.</span><span class="n">smooth</span>
                    <span class="p">):</span>
                        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="n">segment</span><span class="o">.</span><span class="n">d</span><span class="p">(</span>
                                <span class="n">p</span><span class="p">,</span>
                                <span class="n">relative</span><span class="o">=</span><span class="n">relative</span><span class="p">,</span>
                                <span class="n">smooth</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">is_smooth_from</span><span class="p">(</span><span class="n">previous_segment</span><span class="p">),</span>
                            <span class="p">)</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">d</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="n">relative</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
                <span class="n">previous_segment</span> <span class="o">=</span> <span class="n">segment</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">previous_segment</span><span class="o">.</span><span class="n">end</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="p">(</span><span class="n">Move</span><span class="p">,</span> <span class="n">Line</span><span class="p">,</span> <span class="n">Arc</span><span class="p">,</span> <span class="n">Close</span><span class="p">)):</span>
                    <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">d</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">relative</span><span class="p">))</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="p">(</span><span class="n">CubicBezier</span><span class="p">,</span> <span class="n">QuadraticBezier</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">override_smooth</span> <span class="ow">and</span> <span class="n">smooth_set_value</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                        <span class="ow">not</span> <span class="n">override_smooth</span> <span class="ow">and</span> <span class="n">segment</span><span class="o">.</span><span class="n">smooth</span>
                    <span class="p">):</span>
                        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="n">segment</span><span class="o">.</span><span class="n">d</span><span class="p">(</span>
                                <span class="n">p</span><span class="p">,</span>
                                <span class="n">relative</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">relative</span><span class="p">,</span>
                                <span class="n">smooth</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">is_smooth_from</span><span class="p">(</span><span class="n">previous_segment</span><span class="p">),</span>
                            <span class="p">)</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="n">segment</span><span class="o">.</span><span class="n">d</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">relative</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                        <span class="p">)</span>
                <span class="n">previous_segment</span> <span class="o">=</span> <span class="n">segment</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">previous_segment</span><span class="o">.</span><span class="n">end</span>
        <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.d"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.d">[docs]</a>    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="n">transformed</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Path</span><span class="o">.</span><span class="n">svg_d</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">_segments</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="n">relative</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="n">smooth</span><span class="p">)</span></div>

<div class="viewcode-block" id="Path.segments"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.segments">[docs]</a>    <span class="k">def</span> <span class="nf">segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">transformed</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">is_identity</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">s</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segments</span></div>

<div class="viewcode-block" id="Path.approximate_arcs_with_cubics"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.approximate_arcs_with_cubics">[docs]</a>    <span class="k">def</span> <span class="nf">approximate_arcs_with_cubics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through this path and replaces any Arcs with cubic bezier curves.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sweep_limit</span> <span class="o">=</span> <span class="n">tau</span> <span class="o">*</span> <span class="n">error</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">segment</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">Arc</span><span class="p">):</span>
                <span class="n">arc_required</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">sweep</span><span class="p">)</span> <span class="o">/</span> <span class="n">sweep_limit</span><span class="p">))</span>
                <span class="bp">self</span><span class="p">[</span><span class="n">s</span><span class="p">:</span> <span class="n">s</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">as_cubic_curves</span><span class="p">(</span><span class="n">arc_required</span><span class="p">))</span></div>

<div class="viewcode-block" id="Path.approximate_arcs_with_quads"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Path.approximate_arcs_with_quads">[docs]</a>    <span class="k">def</span> <span class="nf">approximate_arcs_with_quads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through this path and replaces any Arcs with quadratic bezier curves.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sweep_limit</span> <span class="o">=</span> <span class="n">tau</span> <span class="o">*</span> <span class="n">error</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">segment</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">Arc</span><span class="p">):</span>
                <span class="n">arc_required</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">sweep</span><span class="p">)</span> <span class="o">/</span> <span class="n">sweep_limit</span><span class="p">))</span>
                <span class="bp">self</span><span class="p">[</span><span class="n">s</span><span class="p">:</span> <span class="n">s</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">as_quad_curves</span><span class="p">(</span><span class="n">arc_required</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="Rect"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Rect">[docs]</a><span class="k">class</span> <span class="nc">Rect</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SVG Rect shapes are defined in SVG2 10.2</span>
<span class="sd">    https://www.w3.org/TR/SVG2/shapes.html#RectElement</span>

<span class="sd">    These have geometric properties x, y, width, height, rx, ry</span>
<span class="sd">    Geometric properties can be Length values.</span>

<span class="sd">    Rect(x, y, width, height)</span>
<span class="sd">    Rect(x, y, width, height, rx, ry)</span>
<span class="sd">    Rect(x, y, width, height, rx, ry, matrix)</span>
<span class="sd">    Rect(x, y, width, height, rx, ry, matrix, stroke, fill)</span>

<span class="sd">    Rect(dict): dictionary values read from svg.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">Shape</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_rect</span><span class="p">()</span>

<div class="viewcode-block" id="Rect.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Rect.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">Shape</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">rx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">ry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_rect</span><span class="p">()</span></div>

<div class="viewcode-block" id="Rect.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Rect.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">Shape</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_X</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_Y</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_WIDTH</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_HEIGHT</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_RADIUS_X</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_RADIUS_Y</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span></div>

<div class="viewcode-block" id="Rect.property_by_args"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Rect.property_by_args">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">arg_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">6</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">7</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_init_shape</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">6</span><span class="p">:])</span></div>

<div class="viewcode-block" id="Rect._validate_rect"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Rect._validate_rect">[docs]</a>    <span class="k">def</span> <span class="nf">_validate_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;None is &#39;auto&#39; for values.&quot;&quot;&quot;</span>
        <span class="n">rx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="n">ry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
        <span class="k">if</span> <span class="n">rx</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">ry</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">rx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">rx</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
            <span class="n">ry</span> <span class="o">=</span> <span class="n">rx</span>
        <span class="k">elif</span> <span class="n">ry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">rx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ry</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">ry</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">ry</span>
        <span class="k">elif</span> <span class="n">rx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">rx</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
            <span class="n">ry</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">ry</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rx</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">ry</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">ry</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rx</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">rx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
                <span class="n">ry</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># If width is in inches and rx is in units, this is unsolvable without knowing the ppi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="n">rx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="n">ry</span></div>

<div class="viewcode-block" id="Rect._attrs"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Rect._attrs">[docs]</a>    <span class="k">def</span> <span class="nf">_attrs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_X</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_Y</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_WIDTH</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_HEIGHT</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_RADIUS_X</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_RADIUS_Y</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="p">)))</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attrs</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_repr_shape</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Rect(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">params</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attrs</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_str_shape</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Rect(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">params</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Rect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">point</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">point</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">origin</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">origin</span><span class="o">.</span><span class="n">distance_to</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">origin</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">origin</span><span class="o">.</span><span class="n">distance_to</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_rx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">origin</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">origin</span><span class="o">.</span><span class="n">distance_to</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_ry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">origin</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">origin</span><span class="o">.</span><span class="n">distance_to</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<div class="viewcode-block" id="Rect.segments"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Rect.segments">[docs]</a>    <span class="k">def</span> <span class="nf">segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rect decomposition is given in SVG 2.0 10.2</span>

<span class="sd">        Rect:</span>
<span class="sd">        * perform an absolute moveto operation to location (x,y);</span>
<span class="sd">        * perform an absolute horizontal lineto with parameter x+width;</span>
<span class="sd">        * perform an absolute vertical lineto parameter y+height;</span>
<span class="sd">        * perform an absolute horizontal lineto parameter x;</span>
<span class="sd">        * ( close the path)</span>

<span class="sd">        Rounded Rect:</span>
<span class="sd">        rx and ry are used as the equivalent parameters to the elliptical arc command,</span>
<span class="sd">        the x-axis-rotation and large-arc-flag are set to zero, the sweep-flag is set to one</span>

<span class="sd">        * perform an absolute moveto operation to location (x+rx,y);</span>
<span class="sd">        * perform an absolute horizontal lineto with parameter x+width-rx;</span>
<span class="sd">        * perform an absolute elliptical arc operation to coordinate (x+width,y+ry)</span>
<span class="sd">        * perform an absolute vertical lineto parameter y+height-ry;</span>
<span class="sd">        * perform an absolute elliptical arc operation to coordinate (x+width-rx,y+height)</span>
<span class="sd">        * perform an absolute horizontal lineto parameter x+rx;</span>
<span class="sd">        * perform an absolute elliptical arc operation to coordinate (x,y+height-ry)</span>
<span class="sd">        * perform an absolute vertical lineto parameter y+ry</span>
<span class="sd">        * perform an absolute elliptical arc operation with a segment-completing close path operation</span>

<span class="sd">        :param transformed: provide the reified version.</span>
<span class="sd">        :return: path_d of shape.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">scooped</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_degenerate</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">()</span>  <span class="c1"># a computed value of zero for either dimension disables rendering.</span>
        <span class="n">rx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="n">ry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_strict</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rx</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">width</span> <span class="ow">and</span> <span class="n">ry</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">:</span>
                <span class="n">scooped</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">rx</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">rx</span><span class="p">)</span>
                <span class="n">ry</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ry</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rx</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">width</span> <span class="ow">or</span> <span class="n">ry</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">:</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ry</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">rx</span> <span class="o">==</span> <span class="n">ry</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">segments</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">Move</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)),</span>
                <span class="n">Line</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">y</span><span class="p">)),</span>
                <span class="n">Line</span><span class="p">((</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span><span class="p">)),</span>
                <span class="n">Line</span><span class="p">((</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span><span class="p">)),</span>
                <span class="n">Close</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)),</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">segments</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">Move</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">rx</span><span class="p">,</span> <span class="n">y</span><span class="p">)),</span>
                <span class="n">Line</span><span class="p">((</span><span class="n">x</span> <span class="o">+</span> <span class="n">rx</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span> <span class="o">-</span> <span class="n">rx</span><span class="p">,</span> <span class="n">y</span><span class="p">)),</span>
                <span class="n">Arc</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span> <span class="o">-</span> <span class="n">rx</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span>
                    <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">ry</span><span class="p">),</span>
                    <span class="n">rx</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span>
                    <span class="n">ry</span><span class="o">=</span><span class="n">ry</span><span class="p">,</span>
                    <span class="n">scooped</span><span class="o">=</span><span class="n">scooped</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">Line</span><span class="p">((</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">ry</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span> <span class="o">-</span> <span class="n">ry</span><span class="p">)),</span>
                <span class="n">Arc</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span> <span class="o">-</span> <span class="n">ry</span><span class="p">),</span>
                    <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span> <span class="o">-</span> <span class="n">rx</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span><span class="p">),</span>
                    <span class="n">rx</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span>
                    <span class="n">ry</span><span class="o">=</span><span class="n">ry</span><span class="p">,</span>
                    <span class="n">scooped</span><span class="o">=</span><span class="n">scooped</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">Line</span><span class="p">((</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span> <span class="o">-</span> <span class="n">rx</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">rx</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span><span class="p">)),</span>
                <span class="n">Arc</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">rx</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span><span class="p">),</span>
                    <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span> <span class="o">-</span> <span class="n">ry</span><span class="p">),</span>
                    <span class="n">rx</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span>
                    <span class="n">ry</span><span class="o">=</span><span class="n">ry</span><span class="p">,</span>
                    <span class="n">scooped</span><span class="o">=</span><span class="n">scooped</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">Line</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span> <span class="o">-</span> <span class="n">ry</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">ry</span><span class="p">)),</span>
                <span class="n">Arc</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">ry</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">rx</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">rx</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="o">=</span><span class="n">ry</span><span class="p">,</span> <span class="n">scooped</span><span class="o">=</span><span class="n">scooped</span><span class="p">),</span>
                <span class="n">Close</span><span class="p">((</span><span class="n">x</span> <span class="o">+</span> <span class="n">rx</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">rx</span><span class="p">,</span> <span class="n">y</span><span class="p">)),</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">transformed</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">is_identity</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">segments</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">s</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">]</span></div>

<div class="viewcode-block" id="Rect.reify"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Rect.reify">[docs]</a>    <span class="k">def</span> <span class="nf">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Realizes the transform to the shape properties.</span>

<span class="sd">        If the realized shape can be properly represented as a rectangle with an identity matrix</span>
<span class="sd">        it will be, otherwise the properties will approximate the implied values.</span>

<span class="sd">        Skewed and Rotated rectangles cannot be reified.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">scale_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_scale_x</span><span class="p">()</span>
        <span class="n">scale_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_scale_y</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">scale_x</span> <span class="o">*</span> <span class="n">scale_y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>  <span class="c1"># No reification of negative values, gives negative dims.</span>
        <span class="n">translate_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_trans_x</span><span class="p">()</span>
        <span class="n">translate_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_trans_y</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_skew_x</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_skew_y</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="n">scale_x</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="n">scale_y</span> <span class="o">!=</span> <span class="mi">0</span>
        <span class="p">):</span>
            <span class="n">GraphicObject</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">Transformable</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*=</span> <span class="n">scale_x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*=</span> <span class="n">scale_y</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">translate_x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">translate_y</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">*=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="o">-</span><span class="n">translate_x</span><span class="p">,</span> <span class="o">-</span><span class="n">translate_y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="n">scale_x</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="n">scale_y</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">scale_x</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">scale_y</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">*=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">scale_x</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">scale_y</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Rect.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Rect.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Shape</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative_length&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Rect.is_degenerate"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Rect.is_degenerate">[docs]</a>    <span class="k">def</span> <span class="nf">is_degenerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">)</span></div></div>


<div class="viewcode-block" id="_RoundShape"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape">[docs]</a><span class="k">class</span> <span class="nc">_RoundShape</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">Shape</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="_RoundShape.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">Shape</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">cx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">cy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">rx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">ry</span></div>

<div class="viewcode-block" id="_RoundShape.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">Shape</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_CENTER_X</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_CENTER_Y</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_RADIUS_X</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_RADIUS_Y</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_RADIUS</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="n">r</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="n">r</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">center</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">center</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="_RoundShape.property_by_args"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.property_by_args">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">arg_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_init_shape</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">4</span><span class="p">:])</span></div>

<div class="viewcode-block" id="_RoundShape._attrs"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape._attrs">[docs]</a>    <span class="k">def</span> <span class="nf">_attrs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_CENTER_X</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_CENTER_Y</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_RADIUS</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_RADIUS_X</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">)))</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_RADIUS_Y</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="p">)))</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attrs</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_repr_shape</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attrs</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_str_shape</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_rx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
        <span class="n">prx</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">prx</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">origin</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">origin</span><span class="o">.</span><span class="n">distance_to</span><span class="p">(</span><span class="n">prx</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_ry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
        <span class="n">pry</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="p">)</span>
        <span class="n">pry</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">origin</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">origin</span><span class="o">.</span><span class="n">distance_to</span><span class="p">(</span><span class="n">pry</span><span class="p">)</span>

    <span class="n">implicit_r</span> <span class="o">=</span> <span class="n">implicit_rx</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_center</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">center</span>
        <span class="n">center</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">center</span>

<div class="viewcode-block" id="_RoundShape.segments"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.segments">[docs]</a>    <span class="k">def</span> <span class="nf">segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        SVG path decomposition is given in SVG 2.0 10.3, 10.4.</span>

<span class="sd">        A move-to command to the point cx+rx,cy;</span>
<span class="sd">        arc to cx,cy+ry;</span>
<span class="sd">        arc to cx-rx,cy;</span>
<span class="sd">        arc to cx,cy-ry;</span>
<span class="sd">        arc with a segment-completing close path operation.</span>

<span class="sd">        Converts the parameters from an ellipse or a circle to a string for a</span>
<span class="sd">        Path object d-attribute&quot;&quot;&quot;</span>
        <span class="n">original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span> <span class="o">=</span> <span class="n">transformed</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">()</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">step_size</span> <span class="o">=</span> <span class="n">tau</span> <span class="o">/</span> <span class="n">steps</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">transformed</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_scale_x</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_scale_y</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span>
        <span class="p">):</span>
            <span class="n">step_size</span> <span class="o">=</span> <span class="o">-</span><span class="n">step_size</span>
        <span class="n">t_start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">t_end</span> <span class="o">=</span> <span class="n">step_size</span>
        <span class="c1"># zero for either dimension, or a computed value of auto for both</span>
        <span class="c1"># dimensions, disables rendering of the element.</span>
        <span class="n">rx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_rx</span>
        <span class="n">ry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_ry</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_degenerate</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">()</span>
        <span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_center</span>
        <span class="n">path</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">steps</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">+=</span> <span class="n">Arc</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">t_start</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">t_end</span><span class="p">),</span>
                <span class="n">center</span><span class="p">,</span>
                <span class="n">rx</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span>
                <span class="n">ry</span><span class="o">=</span><span class="n">ry</span><span class="p">,</span>
                <span class="n">rotation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rotation</span><span class="p">,</span>
                <span class="n">sweep</span><span class="o">=</span><span class="n">step_size</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">t_start</span> <span class="o">=</span> <span class="n">t_end</span>
            <span class="n">t_end</span> <span class="o">+=</span> <span class="n">step_size</span>
        <span class="n">path</span><span class="o">.</span><span class="n">closed</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply</span> <span class="o">=</span> <span class="n">original</span>
        <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">segments</span><span class="p">(</span><span class="n">transformed</span><span class="p">)</span></div>

<div class="viewcode-block" id="_RoundShape.reify"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.reify">[docs]</a>    <span class="k">def</span> <span class="nf">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Realizes the transform to the shape properties.</span>

<span class="sd">        Skewed and Rotated roundshapes cannot be reified.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">scale_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_scale_x</span><span class="p">()</span>
        <span class="n">scale_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_scale_y</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">scale_y</span> <span class="o">*</span> <span class="n">scale_x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>  <span class="c1"># No reification of flipped values.</span>
        <span class="n">translate_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_trans_x</span><span class="p">()</span>
        <span class="n">translate_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_trans_y</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_skew_x</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">value_skew_y</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="n">scale_x</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="n">scale_y</span> <span class="o">!=</span> <span class="mi">0</span>
        <span class="p">):</span>
            <span class="n">GraphicObject</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">Transformable</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">*=</span> <span class="n">scale_x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">*=</span> <span class="n">scale_y</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">+=</span> <span class="n">translate_x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">+=</span> <span class="n">translate_y</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">*=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="o">-</span><span class="n">translate_x</span><span class="p">,</span> <span class="o">-</span><span class="n">translate_y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="n">scale_x</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="n">scale_y</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">*=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">scale_x</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">scale_y</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="_RoundShape.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Shape</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative_length&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rx</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ry</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="_RoundShape.is_degenerate"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.is_degenerate">[docs]</a>    <span class="k">def</span> <span class="nf">is_degenerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">rx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_rx</span>
        <span class="n">ry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_ry</span>
        <span class="k">return</span> <span class="n">rx</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">ry</span> <span class="o">==</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="_RoundShape.unit_matrix"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.unit_matrix">[docs]</a>    <span class="k">def</span> <span class="nf">unit_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return the unit matrix which could would transform the unit circle into this ellipse.</span>

<span class="sd">        One of the valid parameterizations for ellipses is that they are all affine transforms of the unit circle.</span>
<span class="sd">        This provides exactly such a matrix.</span>

<span class="sd">        :return: matrix</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">()</span>
        <span class="n">m</span><span class="o">.</span><span class="n">post_scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">implicit_rx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_ry</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">post_rotate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rotation</span><span class="p">)</span>
        <span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_center</span>
        <span class="n">m</span><span class="o">.</span><span class="n">post_translate</span><span class="p">(</span><span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">center</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span></div>

<div class="viewcode-block" id="_RoundShape.arc_t"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.arc_t">[docs]</a>    <span class="k">def</span> <span class="nf">arc_t</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t0</span><span class="p">,</span> <span class="n">t1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return the arc found between the given values of t on the ellipse.</span>

<span class="sd">        :param t0: t start</span>
<span class="sd">        :param t1: t end</span>
<span class="sd">        :return: arc</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Arc</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">t0</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">implicit_center</span><span class="p">,</span>
            <span class="n">rx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">implicit_rx</span><span class="p">,</span>
            <span class="n">ry</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">implicit_ry</span><span class="p">,</span>
            <span class="n">rotation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rotation</span><span class="p">,</span>
            <span class="n">sweep</span><span class="o">=</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="_RoundShape.arc_angle"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.arc_angle">[docs]</a>    <span class="k">def</span> <span class="nf">arc_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">ccw</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return the arc found between the given angles on the ellipse.</span>

<span class="sd">        :param a0: start angle</span>
<span class="sd">        :param a1: end angle</span>
<span class="sd">        :param ccw: optional flag to force clockwise or counter-clockwise arc-angles, default is smaller angle</span>
<span class="sd">        :return: arc</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">ccw</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ccw</span> <span class="o">=</span> <span class="n">a0</span> <span class="o">&gt;</span> <span class="n">a1</span>
        <span class="k">return</span> <span class="n">Arc</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">point_at_angle</span><span class="p">(</span><span class="n">a0</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">point_at_angle</span><span class="p">(</span><span class="n">a1</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">implicit_center</span><span class="p">,</span>
            <span class="n">rx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">implicit_rx</span><span class="p">,</span>
            <span class="n">ry</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">implicit_ry</span><span class="p">,</span>
            <span class="n">rotation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rotation</span><span class="p">,</span>
            <span class="n">ccw</span><span class="o">=</span><span class="n">ccw</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="_RoundShape.point_at_angle"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.point_at_angle">[docs]</a>    <span class="k">def</span> <span class="nf">point_at_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        find the point on the ellipse from the center at the given angle.</span>
<span class="sd">        Note: For non-circular arcs this is different than point(t).</span>

<span class="sd">        :param angle: angle from center to find point</span>
<span class="sd">        :return: point found</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_rx</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_ry</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="n">angle</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">atan2</span><span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">tan</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">tau_1_4</span> <span class="o">=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">4.0</span>
        <span class="n">tau_3_4</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">tau_1_4</span>
        <span class="k">if</span> <span class="n">tau_3_4</span> <span class="o">&gt;=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">%</span> <span class="n">tau</span> <span class="o">&gt;</span> <span class="n">tau_1_4</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">+=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">t</span><span class="p">)</span></div>

<div class="viewcode-block" id="_RoundShape.angle_at_point"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.angle_at_point">[docs]</a>    <span class="k">def</span> <span class="nf">angle_at_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        find the angle to the point.</span>

<span class="sd">        :param p: point</span>
<span class="sd">        :return: angle to given point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">is_identity</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_center</span><span class="o">.</span><span class="n">angle_to</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">center</span><span class="o">.</span><span class="n">angle_to</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></div>

<div class="viewcode-block" id="_RoundShape.t_at_point"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.t_at_point">[docs]</a>    <span class="k">def</span> <span class="nf">t_at_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        find the t parameter to at the point.</span>

<span class="sd">        :param p: point</span>
<span class="sd">        :return: t parameter to the given point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle_at_point</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">angle</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_rx</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_ry</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">atan2</span><span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">tan</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">tau_1_4</span> <span class="o">=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">4.0</span>
        <span class="n">tau_3_4</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">tau_1_4</span>
        <span class="k">if</span> <span class="n">tau_3_4</span> <span class="o">&gt;=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">%</span> <span class="n">tau</span> <span class="o">&gt;</span> <span class="n">tau_1_4</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">+=</span> <span class="n">tau</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="k">return</span> <span class="n">t</span></div>

<div class="viewcode-block" id="_RoundShape.point_at_t"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.point_at_t">[docs]</a>    <span class="k">def</span> <span class="nf">point_at_t</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        find the point that corresponds to given value t.</span>
<span class="sd">        Where t=0 is the first point and t=tau is the final point.</span>

<span class="sd">        In the case of a circle: t = angle.</span>

<span class="sd">        :param t:</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_rx</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_ry</span>
        <span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_center</span>
        <span class="n">cx</span> <span class="o">=</span> <span class="n">center</span><span class="o">.</span><span class="n">x</span>
        <span class="n">cy</span> <span class="o">=</span> <span class="n">center</span><span class="o">.</span><span class="n">y</span>
        <span class="n">cos_theta</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
        <span class="n">sin_theta</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
        <span class="n">cos_t</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="n">sin_t</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="n">px</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">+</span> <span class="n">a</span> <span class="o">*</span> <span class="n">cos_t</span> <span class="o">*</span> <span class="n">cos_theta</span> <span class="o">-</span> <span class="n">b</span> <span class="o">*</span> <span class="n">sin_t</span> <span class="o">*</span> <span class="n">sin_theta</span>
        <span class="n">py</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">+</span> <span class="n">a</span> <span class="o">*</span> <span class="n">cos_t</span> <span class="o">*</span> <span class="n">sin_theta</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">sin_t</span> <span class="o">*</span> <span class="n">cos_theta</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">px</span><span class="p">,</span> <span class="n">py</span><span class="p">)</span></div>

<div class="viewcode-block" id="_RoundShape.point"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape.point">[docs]</a>    <span class="k">def</span> <span class="nf">point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">ERROR</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        find the point that corresponds to given value [0,1].</span>
<span class="sd">        Where t=0 is the first point and t=1 is the final point.</span>

<span class="sd">        :param position: position value between 0,1 where value equals the amount through the shape</span>
<span class="sd">        :param error: error permitted in determining point value (unused for this shape)</span>
<span class="sd">        :return: point at t</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_at_t</span><span class="p">(</span><span class="n">tau</span> <span class="o">*</span> <span class="n">position</span><span class="p">)</span></div>

<div class="viewcode-block" id="_RoundShape._ramanujan_length"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._RoundShape._ramanujan_length">[docs]</a>    <span class="k">def</span> <span class="nf">_ramanujan_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_rx</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_ry</span>
        <span class="k">if</span> <span class="n">b</span> <span class="o">&gt;</span> <span class="n">a</span><span class="p">:</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span>
        <span class="n">h</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">h</span> <span class="o">/</span> <span class="p">(</span><span class="mi">10</span> <span class="o">+</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span> <span class="o">-</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">h</span><span class="p">))))</span></div></div>


<div class="viewcode-block" id="Ellipse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Ellipse">[docs]</a><span class="k">class</span> <span class="nc">Ellipse</span><span class="p">(</span><span class="n">_RoundShape</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SVG Ellipse shapes are defined in SVG2 10.4</span>
<span class="sd">    https://www.w3.org/TR/SVG2/shapes.html#EllipseElement</span>

<span class="sd">    These have geometric properties cx, cy, rx, ry</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">_RoundShape</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Ellipse</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Ellipse._name"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Ellipse._name">[docs]</a>    <span class="k">def</span> <span class="nf">_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span></div></div>


<div class="viewcode-block" id="Circle"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Circle">[docs]</a><span class="k">class</span> <span class="nc">Circle</span><span class="p">(</span><span class="n">_RoundShape</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SVG Circle shapes are defined in SVG2 10.3</span>
<span class="sd">    https://www.w3.org/TR/SVG2/shapes.html#CircleElement</span>

<span class="sd">    These have geometric properties cx, cy, r</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">_RoundShape</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Circle</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Circle._name"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Circle._name">[docs]</a>    <span class="k">def</span> <span class="nf">_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span></div></div>


<div class="viewcode-block" id="SimpleLine"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SimpleLine">[docs]</a><span class="k">class</span> <span class="nc">SimpleLine</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SVG Line shapes are defined in SVG2 10.5</span>
<span class="sd">    https://www.w3.org/TR/SVG2/shapes.html#LineElement</span>

<span class="sd">    These have geometric properties x1, y1, x2, y2</span>

<span class="sd">    These are called Line in SVG but that name is already used for Line(PathSegment)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x1</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x2</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">Shape</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="SimpleLine.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SimpleLine.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">Shape</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x1</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">x1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">y1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x2</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">x2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">y2</span></div>

<div class="viewcode-block" id="SimpleLine.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SimpleLine.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">Shape</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x1</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_X1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_Y1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x2</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_X2</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_Y2</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span></div>

<div class="viewcode-block" id="SimpleLine.property_by_args"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SimpleLine.property_by_args">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">arg_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x1</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y1</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x2</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">arg_length</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y2</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_shape</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">4</span><span class="p">:])</span></div>

<div class="viewcode-block" id="SimpleLine._attrs"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SimpleLine._attrs">[docs]</a>    <span class="k">def</span> <span class="nf">_attrs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_X1</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_Y1</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y1</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_X2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x2</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_Y2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y2</span><span class="p">)))</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attrs</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_repr_shape</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;SimpleLine(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">params</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attrs</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_str_shape</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;SimpleLine(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">params</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">SimpleLine</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_x1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y1</span><span class="p">)</span>
        <span class="n">point</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">point</span><span class="o">.</span><span class="n">x</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_y1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y1</span><span class="p">)</span>
        <span class="n">point</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_x2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y2</span><span class="p">)</span>
        <span class="n">point</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">point</span><span class="o">.</span><span class="n">x</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_y2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y2</span><span class="p">)</span>
        <span class="n">point</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span>

<div class="viewcode-block" id="SimpleLine.segments"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SimpleLine.segments">[docs]</a>    <span class="k">def</span> <span class="nf">segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        SVG path decomposition is given in SVG 2.0 10.5.</span>

<span class="sd">        perform an absolute moveto operation to absolute location (x1,y1)</span>
<span class="sd">        perform an absolute lineto operation to absolute location (x2,y2)</span>

<span class="sd">        :returns Path_d path for line.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y1</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">transformed</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
            <span class="n">end</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">Move</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">start</span><span class="p">),</span> <span class="n">Line</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span></div>

<div class="viewcode-block" id="SimpleLine.reify"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SimpleLine.reify">[docs]</a>    <span class="k">def</span> <span class="nf">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Realizes the transform to the shape properties.</span>

<span class="sd">        SimpleLines are perfectly reified.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y1</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">*=</span> <span class="n">matrix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x1</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y2</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">*=</span> <span class="n">matrix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x2</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span>

        <span class="n">matrix</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="SimpleLine.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SimpleLine.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Shape</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative_length&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x1</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y1</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y1</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x2</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x2</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y2</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y2</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div></div>


<div class="viewcode-block" id="_Polyshape"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._Polyshape">[docs]</a><span class="k">class</span> <span class="nc">_Polyshape</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base form of Polygon and Polyline since the objects are nearly the same.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">Shape</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="_Polyshape.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._Polyshape.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">Shape</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_points</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">points</span><span class="p">)</span></div>

<div class="viewcode-block" id="_Polyshape.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._Polyshape.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">Shape</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_points</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></div>

<div class="viewcode-block" id="_Polyshape.property_by_args"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._Polyshape.property_by_args">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_points</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="_Polyshape._init_points"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._Polyshape._init_points">[docs]</a>    <span class="k">def</span> <span class="nf">_init_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">points</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">SVG_ATTR_POINTS</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
                <span class="n">points</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">SVG_ATTR_POINTS</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
                <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">points</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">findall</span> <span class="o">=</span> <span class="n">REGEX_COORD_PAIR</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">j</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">findall</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">first_point</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first_point</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">Point</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="nb">iter</span><span class="p">(</span><span class="n">points</span><span class="p">)]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)))</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first_point</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Point</span><span class="p">)):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">Point</span><span class="p">,</span> <span class="n">points</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">))</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_POINTS</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_repr_shape</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">))</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_POINTS</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_str_shape</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>

<div class="viewcode-block" id="_Polyshape.segments"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._Polyshape.segments">[docs]</a>    <span class="k">def</span> <span class="nf">segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Polyline and Polygon decomposition is given in SVG2. 10.6 and 10.7</span>

<span class="sd">        * perform an absolute moveto operation to the first coordinate pair in the list of points</span>
<span class="sd">        * for each subsequent coordinate pair, perform an absolute lineto operation to that coordinate pair.</span>
<span class="sd">        * (Polygon-only) perform a closepath command</span>

<span class="sd">        Note:  For a polygon/polyline made from n points, the resulting path will</span>
<span class="sd">        be composed of n lines (even if some of these lines have length zero).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">is_identity</span><span class="p">()</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">transformed</span><span class="p">:</span>
            <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">point_in_matrix_space</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_degenerate</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="n">segments</span> <span class="o">=</span> <span class="p">[</span><span class="n">Move</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
        <span class="n">last</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)):</span>
            <span class="n">current</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">segments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Line</span><span class="p">(</span><span class="n">last</span><span class="p">,</span> <span class="n">current</span><span class="p">))</span>
            <span class="n">last</span> <span class="o">=</span> <span class="n">current</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Polygon</span><span class="p">):</span>
            <span class="n">segments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Close</span><span class="p">(</span><span class="n">last</span><span class="p">,</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">segments</span></div>

<div class="viewcode-block" id="_Polyshape.reify"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._Polyshape.reify">[docs]</a>    <span class="k">def</span> <span class="nf">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Realizes the transform to the shape properties.</span>

<span class="sd">        Polyshapes are perfectly reified.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">*=</span> <span class="n">matrix</span>
        <span class="n">matrix</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="_Polyshape.is_degenerate"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements._Polyshape.is_degenerate">[docs]</a>    <span class="k">def</span> <span class="nf">is_degenerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span></div></div>


<div class="viewcode-block" id="Polyline"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Polyline">[docs]</a><span class="k">class</span> <span class="nc">Polyline</span><span class="p">(</span><span class="n">_Polyshape</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SVG Polyline shapes are defined in SVG2 10.6</span>
<span class="sd">    https://www.w3.org/TR/SVG2/shapes.html#PolylineElement</span>

<span class="sd">    These have geometric properties points</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">_Polyshape</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Polyline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Polyline._name"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Polyline._name">[docs]</a>    <span class="k">def</span> <span class="nf">_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span></div></div>


<div class="viewcode-block" id="Polygon"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Polygon">[docs]</a><span class="k">class</span> <span class="nc">Polygon</span><span class="p">(</span><span class="n">_Polyshape</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SVG Polygon shapes are defined in SVG2 10.7</span>
<span class="sd">    https://www.w3.org/TR/SVG2/shapes.html#PolygonElement</span>

<span class="sd">    These have geometric properties points</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">_Polyshape</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Polygon._name"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Polygon._name">[docs]</a>    <span class="k">def</span> <span class="nf">_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span></div></div>


<div class="viewcode-block" id="Subpath"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Subpath">[docs]</a><span class="k">class</span> <span class="nc">Subpath</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Subpath is a Path-backed window implementation. It does not store a list of segments but rather</span>
<span class="sd">    stores a Path, start position, end position. When a function is called on a subpath, the result of</span>
<span class="sd">    those events is performed on the backing Path. When the backing Path is modified the behavior is</span>
<span class="sd">    undefined.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_start</span> <span class="o">=</span> <span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">=</span> <span class="n">end</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Subpath</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index_to_path_index</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index_to_path_index</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index_to_path_index</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_end</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_end</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PathSegment</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_end</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">PathSegment</span><span class="p">)):</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="n">n</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="n">path</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">path</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PathSegment</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">e</span> <span class="o">*=</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">Matrix</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="n">n</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="fm">__rmul__</span> <span class="o">=</span> <span class="fm">__mul__</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">Iterator</span><span class="p">:</span>
            <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subpath</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">subpath</span><span class="o">.</span><span class="n">_start</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">subpath</span> <span class="o">=</span> <span class="n">subpath</span>

            <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">subpath</span><span class="o">.</span><span class="n">_end</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">StopIteration</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">subpath</span><span class="o">.</span><span class="n">_path</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">StopIteration</span>

            <span class="nb">next</span> <span class="o">=</span> <span class="fm">__next__</span>

        <span class="k">return</span> <span class="n">Iterator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Path(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">Path</span><span class="p">,</span> <span class="n">Subpath</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span> <span class="o">==</span> <span class="n">o</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">Path</span><span class="p">,</span> <span class="n">Subpath</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

<div class="viewcode-block" id="Subpath.segments"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Subpath.segments">[docs]</a>    <span class="k">def</span> <span class="nf">segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>
        <span class="k">if</span> <span class="n">transformed</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="n">s</span> <span class="o">*</span> <span class="n">path</span><span class="o">.</span><span class="n">transform</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_start</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="p">]</span>
        <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_start</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="Subpath._numeric_index"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Subpath._numeric_index">[docs]</a>    <span class="k">def</span> <span class="nf">_numeric_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">+</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start</span> <span class="o">+</span> <span class="n">index</span></div>

<div class="viewcode-block" id="Subpath.index_to_path_index"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Subpath.index_to_path_index">[docs]</a>    <span class="k">def</span> <span class="nf">index_to_path_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">start</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">stop</span>
            <span class="n">step</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">step</span>
            <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numeric_index</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stop</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numeric_index</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">slice</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numeric_index</span><span class="p">(</span><span class="n">index</span><span class="p">)</span></div>

<div class="viewcode-block" id="Subpath.bbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Subpath.bbox">[docs]</a>    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns a bounding box for the input Path&quot;&quot;&quot;</span>
        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_start</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">bbs</span> <span class="o">=</span> <span class="p">[</span><span class="n">seg</span><span class="o">.</span><span class="n">bbox</span><span class="p">()</span> <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="n">segments</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">Close</span><span class="p">,</span> <span class="n">Move</span><span class="p">)]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">xmins</span><span class="p">,</span> <span class="n">ymins</span><span class="p">,</span> <span class="n">xmaxs</span><span class="p">,</span> <span class="n">ymaxs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">bbs</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># No bounding box items existed. So no bounding box.</span>
        <span class="n">xmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmins</span><span class="p">)</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmaxs</span><span class="p">)</span>
        <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymins</span><span class="p">)</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymaxs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span></div>

<div class="viewcode-block" id="Subpath.d"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Subpath.d">[docs]</a>    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">.</span><span class="n">_segments</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_start</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Path</span><span class="o">.</span><span class="n">svg_d</span><span class="p">(</span><span class="n">segments</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="n">relative</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="Subpath._reverse_segments"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Subpath._reverse_segments">[docs]</a>    <span class="k">def</span> <span class="nf">_reverse_segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reverses segments between the given indexes in the subpath space.&quot;&quot;&quot;</span>
        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">.</span><span class="n">_segments</span>  <span class="c1"># must avoid path validation.</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_to_path_index</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_to_path_index</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">s</span> <span class="o">&lt;=</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">start_segment</span> <span class="o">=</span> <span class="n">segments</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>
            <span class="n">end_segment</span> <span class="o">=</span> <span class="n">segments</span><span class="p">[</span><span class="n">e</span><span class="p">]</span>
            <span class="n">start_segment</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">start_segment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">end_segment</span><span class="p">:</span>
                <span class="n">end_segment</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
                <span class="n">segments</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">end_segment</span>
                <span class="n">segments</span><span class="p">[</span><span class="n">e</span><span class="p">]</span> <span class="o">=</span> <span class="n">start_segment</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">e</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_to_path_index</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_to_path_index</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">.</span><span class="n">_validate_connection</span><span class="p">(</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">prefer_second</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">.</span><span class="n">_validate_connection</span><span class="p">(</span><span class="n">end</span><span class="p">)</span></div>

<div class="viewcode-block" id="Subpath.reverse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Subpath.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">size</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">Close</span><span class="p">):</span>
            <span class="n">end</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Move</span>
        <span class="p">):</span>  <span class="c1"># Move remains in place but references next element.</span>
            <span class="n">start</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_segments</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Move</span><span class="p">):</span>
                <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="n">last</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">last</span><span class="p">,</span> <span class="n">Close</span><span class="p">):</span>
            <span class="n">last</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">last</span><span class="o">.</span><span class="n">start</span> <span class="o">!=</span> <span class="bp">self</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
                <span class="n">last</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">last</span><span class="o">.</span><span class="n">end</span> <span class="o">!=</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
                <span class="n">last</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div></div>


<div class="viewcode-block" id="Group"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Group">[docs]</a><span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">SVGElement</span><span class="p">,</span> <span class="n">Transformable</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Group Container element can have children.</span>
<span class="sd">    SVG 2.0 &lt;g&gt; are defined in:</span>
<span class="sd">    5.2. Grouping: the g element</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">list</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Group</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="n">s</span><span class="p">)))</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">e</span> <span class="o">*=</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span>

<div class="viewcode-block" id="Group.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Group.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Group</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Group.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Group.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span></div>

<div class="viewcode-block" id="Group.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Group.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span></div>

<div class="viewcode-block" id="Group.select"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Group.select">[docs]</a>    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditional</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finds all flattened subobjects of this group for which the conditional returns</span>
<span class="sd">        true.</span>

<span class="sd">        :param conditional: function taking element and returns True to include or False if exclude</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">conditional</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">subitem</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">subitem</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subitem</span><span class="p">,</span> <span class="n">Group</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">subitem</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">conditional</span><span class="p">):</span>
                        <span class="k">yield</span> <span class="n">s</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">subitem</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">conditional</span><span class="p">(</span><span class="n">subitem</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">subitem</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subitem</span><span class="p">,</span> <span class="n">Group</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">subitem</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">conditional</span><span class="p">):</span>
                        <span class="k">yield</span> <span class="n">s</span></div>

<div class="viewcode-block" id="Group.reify"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Group.reify">[docs]</a>    <span class="k">def</span> <span class="nf">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Group.union_bbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Group.union_bbox">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">union_bbox</span><span class="p">(</span><span class="n">elements</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_stroke</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the union of the bounding boxes for the elements within the iterator.</span>

<span class="sd">        :param transformed: Should the children of this object be properly transformed.</span>
<span class="sd">        :param with_stroke: should the stroke-width be included in the bounds of the elements</span>
<span class="sd">        :return: union of all bounding boxes of elements within the iterable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">boundary_points</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;bbox&quot;</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">box</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">transformed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">with_stroke</span><span class="o">=</span><span class="n">with_stroke</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">box</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">top_left</span> <span class="o">=</span> <span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">box</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">top_right</span> <span class="o">=</span> <span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">box</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">bottom_left</span> <span class="o">=</span> <span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">box</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">bottom_right</span> <span class="o">=</span> <span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">box</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">transformed</span><span class="p">:</span>
                <span class="n">top_left</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">point_in_matrix_space</span><span class="p">(</span><span class="n">top_left</span><span class="p">)</span>
                <span class="n">top_right</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">point_in_matrix_space</span><span class="p">(</span><span class="n">top_right</span><span class="p">)</span>
                <span class="n">bottom_left</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">point_in_matrix_space</span><span class="p">(</span><span class="n">bottom_left</span><span class="p">)</span>
                <span class="n">bottom_right</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">point_in_matrix_space</span><span class="p">(</span><span class="n">bottom_right</span><span class="p">)</span>
            <span class="n">boundary_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">top_left</span><span class="p">)</span>
            <span class="n">boundary_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">top_right</span><span class="p">)</span>
            <span class="n">boundary_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bottom_left</span><span class="p">)</span>
            <span class="n">boundary_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bottom_right</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">boundary_points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">xmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">boundary_points</span><span class="p">])</span>
        <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">boundary_points</span><span class="p">])</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">boundary_points</span><span class="p">])</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">boundary_points</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span></div>

<div class="viewcode-block" id="Group.bbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Group.bbox">[docs]</a>    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_stroke</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the bounding box of the given object.</span>

<span class="sd">        In the case of groups this is the union of all the bounding boxes of all bound children.</span>

<span class="sd">        Setting transformed to false, may yield unexpected results if subitems are transformed in non-uniform</span>
<span class="sd">        ways.</span>

<span class="sd">        :param transformed: bounding box of the properly transformed children.</span>
<span class="sd">        :param with_stroke: should the stroke-width be included in the bounds.</span>
<span class="sd">        :return: bounding box of the given element</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Group</span><span class="o">.</span><span class="n">union_bbox</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(),</span>
            <span class="n">transformed</span><span class="o">=</span><span class="n">transformed</span><span class="p">,</span>
            <span class="n">with_stroke</span><span class="o">=</span><span class="n">with_stroke</span><span class="p">,</span>
        <span class="p">)</span></div></div>


<div class="viewcode-block" id="ClipPath"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.ClipPath">[docs]</a><span class="k">class</span> <span class="nc">ClipPath</span><span class="p">(</span><span class="n">SVGElement</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    clipPath elements are defined in svg 14.3.5</span>
<span class="sd">    https://www.w3.org/TR/SVG11/masking.html#ClipPathElement</span>

<span class="sd">    Clip paths conceptually define a 1 bit mask for images these are usually defined within</span>
<span class="sd">    def blocks and do not render themselves but rather are attached by IRI references to the</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">list</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit_type</span> <span class="o">=</span> <span class="n">SVG_UNIT_TYPE_USERSPACEONUSE</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="ClipPath.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.ClipPath.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit_type</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unit_type</span></div>

<div class="viewcode-block" id="ClipPath.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.ClipPath.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">SVG_ATTR_CLIP_UNIT_TYPE</span><span class="p">,</span> <span class="n">SVG_UNIT_TYPE_USERSPACEONUSE</span>
        <span class="p">)</span></div></div>


<div class="viewcode-block" id="Pattern"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Pattern">[docs]</a><span class="k">class</span> <span class="nc">Pattern</span><span class="p">(</span><span class="n">SVGElement</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">href</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pattern_content_units</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># UserSpaceOnUse default</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pattern_transform</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pattern_units</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__int__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">viewbox_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Pattern.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Pattern.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">viewbox</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">href</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">href</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pattern_content_units</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">pattern_contents_units</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pattern_transform</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">Matrix</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">pattern_transform</span><span class="p">)</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">pattern_transform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pattern_units</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">pattern_units</span></div>

<div class="viewcode-block" id="Pattern.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Pattern.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">XLINK_HREF</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">href</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">XLINK_HREF</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">SVG_HREF</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">href</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_HREF</span><span class="p">]</span>
        <span class="n">viewbox</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_VIEWBOX</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">viewbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="o">=</span> <span class="n">Viewbox</span><span class="p">(</span><span class="n">viewbox</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_X</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_Y</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_WIDTH</span><span class="p">,</span> <span class="s2">&quot;100%&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_HEIGHT</span><span class="p">,</span> <span class="s2">&quot;100%&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">SVG_ATTR_PATTERN_CONTENT_UNITS</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pattern_content_units</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_PATTERN_CONTENT_UNITS</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">SVG_ATTR_PATTERN_TRANSFORM</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pattern_transform</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_PATTERN_TRANSFORM</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">SVG_ATTR_PATTERN_UNITS</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pattern_units</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_PATTERN_UNITS</span><span class="p">]</span></div>

<div class="viewcode-block" id="Pattern.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Pattern.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern_transform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pattern_transform</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative_length&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div></div>


<div class="viewcode-block" id="Text"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Text">[docs]</a><span class="k">class</span> <span class="nc">Text</span><span class="p">(</span><span class="n">SVGElement</span><span class="p">,</span> <span class="n">GraphicObject</span><span class="p">,</span> <span class="n">Transformable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SVG Text are defined in SVG 2.0 Chapter 11</span>

<span class="sd">    No methods are implemented to perform a text to path conversion.</span>

<span class="sd">    However, if such a method exists the assumption is that the results will be</span>
<span class="sd">    placed in the .path attribute, and functions like bbox() will check if such</span>
<span class="sd">    a value exists.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="o">=</span> <span class="s2">&quot;start&quot;</span>  <span class="c1"># start, middle, end.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_family</span> <span class="o">=</span> <span class="s2">&quot;san-serif&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_size</span> <span class="o">=</span> <span class="mf">16.0</span>  <span class="c1"># 16 point font &#39;normal&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_weight</span> <span class="o">=</span> <span class="mf">400.0</span>  <span class="c1"># Thin=100, Normal=400, Bold=700</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_face</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_FONT_FAMILY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_family</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_face</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_FONT_FACE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_face</span><span class="p">))</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_FONT_SIZE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_size</span><span class="p">))</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_FONT_WEIGHT</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_weight</span><span class="p">)))</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_TEXT_ANCHOR</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_X</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_Y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dx</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_DX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dx</span><span class="p">))</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_DY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dy</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_STROKE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_FILL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_STROKE_WIDTH</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span><span class="p">)))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">is_identity</span><span class="p">():</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_ID</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
        <span class="k">return</span> <span class="s2">&quot;Text(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Cannot use SVG_ATTR_FONT_* or SVG_ATTR_TEXT_ANCHOR for repr because they contain hyphens</span>
        <span class="n">values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;font_family=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_family</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_face</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;font_face=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_face</span><span class="p">)</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;font_size=</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_size</span><span class="p">)</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;font_weight=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_weight</span><span class="p">))</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;text_anchor=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_X</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_Y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dx</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_DX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dx</span><span class="p">))</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_DY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dy</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_STROKE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_FILL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;stroke_width=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span><span class="p">)</span>
            <span class="p">)</span>  <span class="c1"># Cannot use SVG_ATTR_STROKE_WIDTH for repr because it contains a hyphen</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">is_identity</span><span class="p">():</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_ID</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
        <span class="k">return</span> <span class="s2">&quot;Text(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Text</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">width</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">height</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dx</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">dx</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">dy</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">anchor</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_family</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">font_family</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_size</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">font_size</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_weight</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">font_weight</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_face</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">font_face</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Text</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

<div class="viewcode-block" id="Text.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Text.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">dy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">anchor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_family</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">font_family</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_size</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">font_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_weight</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">font_weight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_face</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">font_face</span></div>

<div class="viewcode-block" id="Text.parse_font"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Text.parse_font">[docs]</a>    <span class="k">def</span> <span class="nf">parse_font</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        CSS Fonts 3 has a shorthand font property which serves to provide a single location to define:</span>
<span class="sd">        `font-style`, `font-variant`, `font-weight`, `font-stretch`, `font-size`, `line-height`, and `font-family`</span>

<span class="sd">        font-style: normal | italic | oblique</span>
<span class="sd">        font-variant: normal | small-caps</span>
<span class="sd">        font-weight: normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900</span>
<span class="sd">        font-stretch: normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded</span>
<span class="sd">        font-size: &lt;absolute-size&gt; | &lt;relative-size&gt; | &lt;length-percentage&gt;</span>
<span class="sd">        line-height: &#39;/&#39; &lt;`line-height`&gt;</span>
<span class="sd">        font-family: [ &lt;family-name&gt; | &lt;generic-family&gt; ] #</span>
<span class="sd">        generic-family:  `serif`, `sans-serif`, `cursive`, `fantasy`, and `monospace`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># https://www.w3.org/TR/css-fonts-3/#font-prop</span>
        <span class="n">font_elements</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="o">*</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">REGEX_CSS_FONT</span><span class="p">,</span> <span class="n">font</span><span class="p">))</span>

        <span class="n">font_style</span> <span class="o">=</span> <span class="n">font_elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">font_variant</span> <span class="o">=</span> <span class="n">font_elements</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">font_weight</span> <span class="o">=</span> <span class="n">font_elements</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">font_stretch</span> <span class="o">=</span> <span class="n">font_elements</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">font_size</span> <span class="o">=</span> <span class="n">font_elements</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">line_height</span> <span class="o">=</span> <span class="n">font_elements</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">font_face</span> <span class="o">=</span> <span class="n">font_elements</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">font_family</span> <span class="o">=</span> <span class="n">font_elements</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">font_weight</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">font_weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_font_weight</span><span class="p">(</span><span class="n">font_weight</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">font_size</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">font_size</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">font_size</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">font_face</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">font_face</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">):</span>
                <span class="n">font_face</span> <span class="o">=</span> <span class="n">font_face</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">font_face</span> <span class="o">=</span> <span class="n">font_face</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">font_family</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">font_family</span> <span class="o">=</span> <span class="n">font_family</span></div>

<div class="viewcode-block" id="Text.parse_font_weight"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Text.parse_font_weight">[docs]</a>    <span class="k">def</span> <span class="nf">parse_font_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weight</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">weight</span> <span class="o">==</span> <span class="s2">&quot;bold&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">700</span>
        <span class="k">if</span> <span class="n">weight</span> <span class="o">==</span> <span class="s2">&quot;normal&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">400</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">400</span></div>

<div class="viewcode-block" id="Text.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Text.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_TEXT_ANCHOR</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_face</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;font_face&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_face</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_FONT_FACE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_face</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_family</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;font_family&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_family</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_family</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_FONT_FAMILY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_family</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_size</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;font_size&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_size</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_size</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_FONT_SIZE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_size</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_weight</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;font_weight&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_weight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_weight</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_FONT_WEIGHT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_weight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_font_weight</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_weight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;text_anchor&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_TEXT_ANCHOR</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="p">)</span>
        <span class="n">font</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_FONT</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">font</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse_font</span><span class="p">(</span><span class="n">font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_TAG_TEXT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_X</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_Y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_DX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dx</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_DY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dy</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.reify"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Text.reify">[docs]</a>    <span class="k">def</span> <span class="nf">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">reify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Text.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative_length&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dx</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dx</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dy</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dy</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Text.bbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Text.bbox">[docs]</a>    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_stroke</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the bounding box for the given text object.</span>

<span class="sd">        :param transformed: whether this is the transformed bounds or default.</span>
<span class="sd">        :param with_stroke: should the stroke-width be included in the bounds.</span>
<span class="sd">        :return: bounding box of the given element</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">)</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span>
                <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">with_stroke</span><span class="o">=</span><span class="n">with_stroke</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="n">xmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="n">ymin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">height</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;anchor&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="o">==</span> <span class="s2">&quot;start&quot;</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="o">==</span> <span class="s2">&quot;middle&quot;</span><span class="p">:</span>
            <span class="n">xmin</span> <span class="o">-=</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">xmax</span> <span class="o">-=</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="o">==</span> <span class="s2">&quot;end&quot;</span><span class="p">:</span>
            <span class="n">xmin</span> <span class="o">-=</span> <span class="n">width</span>
            <span class="n">xmax</span> <span class="o">-=</span> <span class="n">width</span>
        <span class="k">if</span> <span class="n">transformed</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">transform_point</span><span class="p">([</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">])</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">transform_point</span><span class="p">([</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">])</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">transform_point</span><span class="p">([</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">])</span>
            <span class="n">p3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">transform_point</span><span class="p">([</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">])</span>
            <span class="n">xmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">p0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">p0</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p3</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">xmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">p0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">p0</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p3</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">with_stroke</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">transformed</span><span class="p">:</span>
                <span class="n">delta</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">implicit_stroke_width</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">delta</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke_width</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="n">xmin</span> <span class="o">-</span> <span class="n">delta</span><span class="p">,</span>
            <span class="n">ymin</span> <span class="o">-</span> <span class="n">delta</span><span class="p">,</span>
            <span class="n">xmax</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span>
            <span class="n">ymax</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span>
        <span class="p">)</span></div></div>


<span class="n">SVGText</span> <span class="o">=</span> <span class="n">Text</span>


<div class="viewcode-block" id="Image"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Image">[docs]</a><span class="k">class</span> <span class="nc">Image</span><span class="p">(</span><span class="n">SVGElement</span><span class="p">,</span> <span class="n">GraphicObject</span><span class="p">,</span> <span class="n">Transformable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SVG Images are defined in SVG 2.0 12.3</span>

<span class="sd">    This class is called SVG Image rather than image as a guard against many Image objects</span>
<span class="sd">    which are quite useful and would be ideal for reading the linked or contained data.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_width</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_height</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>  <span class="c1"># Dataurl requires this be processed first.</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;data:image/&quot;</span><span class="p">):</span>
                <span class="c1"># Data URL</span>
                <span class="kn">from</span> <span class="nn">base64</span> <span class="kn">import</span> <span class="n">b64decode</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;data:image/png;base64,&quot;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">b64decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">[</span><span class="mi">22</span><span class="p">:])</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;data:image/jpg;base64,&quot;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">b64decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">[</span><span class="mi">22</span><span class="p">:])</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;data:image/jpeg;base64,&quot;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">b64decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">[</span><span class="mi">23</span><span class="p">:])</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;data:image/svg+xml;base64,&quot;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">b64decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">[</span><span class="mi">26</span><span class="p">:])</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_X</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_Y</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">!=</span> <span class="s2">&quot;100%&quot;</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_WIDTH</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">!=</span> <span class="s2">&quot;100%&quot;</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_HEIGHT</span><span class="p">,</span> <span class="n">Length</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_ATTR_VIEWBOX</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SVG_HREF</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">is_identity</span><span class="p">():</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;transform=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">))</span>
        <span class="n">params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Image(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">params</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Image</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">width</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">height</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">image</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">viewbox</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Image</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

<div class="viewcode-block" id="Image.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Image.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">viewbox</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">height</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_width</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">image_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_height</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">image_height</span></div>

<div class="viewcode-block" id="Image.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Image.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">XLINK_HREF</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">XLINK_HREF</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">SVG_HREF</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_HREF</span><span class="p">]</span>
        <span class="n">viewbox</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_VIEWBOX</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">viewbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="o">=</span> <span class="n">Viewbox</span><span class="p">(</span><span class="n">viewbox</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span><span class="p">]</span> <span class="o">==</span> <span class="n">SVG_VALUE_NONE</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_X</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_Y</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_WIDTH</span><span class="p">,</span> <span class="s2">&quot;100%&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_HEIGHT</span><span class="p">,</span> <span class="s2">&quot;100%&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;image&quot;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">size</span></div>

<div class="viewcode-block" id="Image.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Image.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">GraphicObject</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">Transformable</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative_length&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">Length</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Image.__copy__"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Image.__copy__">[docs]</a>    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Copy of Image. This will not copy the .image subobject in a deep manner</span>
<span class="sd">        since it&#39;s optional that that object will exist or not. As such if using PIL it would</span>
<span class="sd">        be required to either say self.image = self.image.copy() or call .load() again.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Image</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">viewbox_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Image.load"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Image.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span> <span class="k">as</span> <span class="n">PILImage</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_values_by_image</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="Image.load_data"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Image.load_data">[docs]</a>    <span class="k">def</span> <span class="nf">load_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># This code will not activate without PIL/Pillow installed.</span>
            <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span> <span class="k">as</span> <span class="n">PILImage</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">PILImage</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="c1"># PIL/Pillow not found, decoding data is most we can do.</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="Image.load_file"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Image.load_file">[docs]</a>    <span class="k">def</span> <span class="nf">load_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># This code will not activate without PIL/Pillow installed.</span>
            <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span> <span class="k">as</span> <span class="n">PILImage</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">PILImage</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">directory</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span>

                            <span class="n">relpath</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">PILImage</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">relpath</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
                        <span class="k">return</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="c1"># PIL/Pillow not found, decoding data is most we can do.</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="Image.set_values_by_image"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Image.set_values_by_image">[docs]</a>    <span class="k">def</span> <span class="nf">set_values_by_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>  <span class="c1"># No image to set values by.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="o">=</span> <span class="n">Viewbox</span><span class="p">(</span>
            <span class="s2">&quot;0 0 </span><span class="si">%d</span><span class="s2"> </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_height</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preserve_aspect_ratio</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image_width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image_height</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewbox_transform</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span></div>

<div class="viewcode-block" id="Image.bbox"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Image.bbox">[docs]</a>    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_stroke</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the bounding box for the given image object</span>

<span class="sd">        :param transformed: whether this is the transformed bounds or default.</span>
<span class="sd">        :param with_stroke: There is no stroke for an image so with_stroke is ignored</span>
<span class="sd">        :return: bounding box of the given element</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_width</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">p</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
            <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span>
        <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_width</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_height</span>

        <span class="k">if</span> <span class="n">transformed</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">,</span>
                <span class="n">Point</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">,</span>
                <span class="n">Point</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">,</span>
                <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
        <span class="n">x_vals</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">x</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">y_vals</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">y</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">min_x</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x_vals</span><span class="p">)</span>
        <span class="n">min_y</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_vals</span><span class="p">)</span>
        <span class="n">max_x</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">x_vals</span><span class="p">)</span>
        <span class="n">max_y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">y_vals</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span></div></div>


<span class="n">SVGImage</span> <span class="o">=</span> <span class="n">Image</span>


<div class="viewcode-block" id="Desc"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Desc">[docs]</a><span class="k">class</span> <span class="nc">Desc</span><span class="p">(</span><span class="n">SVGElement</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">values</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">desc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">values</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Desc</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">desc</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc</span><span class="p">)</span>

<div class="viewcode-block" id="Desc.property_by_args"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Desc.property_by_args">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">desc</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Desc.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Desc.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">desc</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">desc</span></div>

<div class="viewcode-block" id="Desc.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Desc.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">SVG_TAG_DESC</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">desc</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_TAG_DESC</span><span class="p">]</span></div></div>


<span class="n">SVGDesc</span> <span class="o">=</span> <span class="n">Desc</span>


<div class="viewcode-block" id="Title"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Title">[docs]</a><span class="k">class</span> <span class="nc">Title</span><span class="p">(</span><span class="n">SVGElement</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">values</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">values</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Title</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">title</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>

<div class="viewcode-block" id="Title.property_by_args"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Title.property_by_args">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Title.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Title.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">title</span></div>

<div class="viewcode-block" id="Title.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.Title.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">SVGElement</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">SVG_TAG_TITLE</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_TAG_TITLE</span><span class="p">]</span></div></div>


<div class="viewcode-block" id="SVG"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVG">[docs]</a><span class="k">class</span> <span class="nc">SVG</span><span class="p">(</span><span class="n">Group</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SVG Document and Parsing.</span>

<span class="sd">    SVG is the SVG main object and also the embedded SVGs within it. It&#39;s a subtype of Group. The SVG has a viewbox,</span>
<span class="sd">    and parsing methods which can be used if given a stream, path, or svg string.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objects</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">Group</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">point</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">point</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">origin</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">origin</span><span class="o">.</span><span class="n">distance_to</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implicit_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">origin</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span>
        <span class="k">return</span> <span class="n">origin</span><span class="o">.</span><span class="n">distance_to</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<div class="viewcode-block" id="SVG.property_by_object"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVG.property_by_object">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">Group</span><span class="o">.</span><span class="n">property_by_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="o">=</span> <span class="n">Viewbox</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">viewbox</span><span class="p">)</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">viewbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="SVG.property_by_values"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVG.property_by_values">[docs]</a>    <span class="k">def</span> <span class="nf">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">Group</span><span class="o">.</span><span class="n">property_by_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_X</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_Y</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_WIDTH</span><span class="p">,</span> <span class="s2">&quot;100%&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_HEIGHT</span><span class="p">,</span> <span class="s2">&quot;100%&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="n">viewbox</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_VIEWBOX</span><span class="p">)</span>
        <span class="n">par</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="o">=</span> <span class="n">Viewbox</span><span class="p">(</span><span class="n">viewbox</span><span class="p">,</span> <span class="n">par</span><span class="p">)</span> <span class="k">if</span> <span class="n">viewbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="SVG.get_element_by_id"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVG.get_element_by_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_element_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></div>

<div class="viewcode-block" id="SVG.get_element_by_url"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVG.get_element_by_url">[docs]</a>    <span class="k">def</span> <span class="nf">get_element_by_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">_id</span> <span class="ow">in</span> <span class="n">REGEX_IRI</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_by_id</span><span class="p">(</span><span class="n">_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="SVG.render"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVG.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Group</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;relative_length&quot;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;relative_length&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">relative_length</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="SVG.elements"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVG.elements">[docs]</a>    <span class="k">def</span> <span class="nf">elements</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditional</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">conditional</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">conditional</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">yield</span> <span class="bp">self</span>
        <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">conditional</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">q</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">viewbox_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewbox</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="SVG._shadow_iter"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVG._shadow_iter">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_shadow_iter</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">children</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">tag</span><span class="p">,</span> <span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">elem</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">t</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">children</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">shadow_tag</span><span class="p">,</span> <span class="n">shadow_event</span><span class="p">,</span> <span class="n">shadow_elem</span> <span class="ow">in</span> <span class="n">SVG</span><span class="o">.</span><span class="n">_shadow_iter</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">shadow_tag</span><span class="p">,</span> <span class="n">shadow_event</span><span class="p">,</span> <span class="n">shadow_elem</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Strictly speaking it is possible to reference use from other use objects. If this is an infinite loop</span>
<span class="sd">            we should not block the rendering. Just say we finished. See: W3C, struct-use-12-f</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">pass</span>
        <span class="k">yield</span> <span class="n">tag</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">elem</span></div>

<div class="viewcode-block" id="SVG._use_structure_parse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVG._use_structure_parse">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_use_structure_parse</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        SVG structure pass: parses the svg file such that it creates the structure implied by reused objects in a</span>
<span class="sd">        generalized context. Objects ids are read and put into an unparsed shadow tree. &lt;use&gt; objects seamlessly contain</span>
<span class="sd">        their definitions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">defs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Define Root Node.</span>
        <span class="n">children</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">event</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">iterparse</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="s2">&quot;start-ns&quot;</span><span class="p">)):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span>
                <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;{http://www.w3.org/2000/svg&quot;</span><span class="p">):</span>
                    <span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span><span class="p">[</span><span class="mi">28</span><span class="p">:]</span>  <span class="c1"># Removing namespace. http://www.w3.org/2000/svg:</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">yield</span> <span class="kc">None</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">elem</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;start&quot;</span><span class="p">:</span>
                <span class="n">attributes</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span>
                <span class="c1"># Create new node.</span>
                <span class="n">siblings</span> <span class="o">=</span> <span class="n">children</span>  <span class="c1"># Parent&#39;s children are now my siblings.</span>
                <span class="n">parent</span> <span class="o">=</span> <span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">children</span><span class="p">)</span>  <span class="c1"># parent is now previous node context</span>
                <span class="n">children</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>  <span class="c1"># new node has no children.</span>
                <span class="n">node</span> <span class="o">=</span> <span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">children</span><span class="p">)</span>  <span class="c1"># define this node.</span>
                <span class="n">siblings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>  <span class="c1"># siblings now includes this node.</span>

                <span class="k">if</span> <span class="n">SVG_TAG_USE</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                    <span class="n">url</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">if</span> <span class="n">XLINK_HREF</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                        <span class="n">url</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">[</span><span class="n">XLINK_HREF</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">SVG_HREF</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                        <span class="n">url</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_HREF</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">transform</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">x</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_X</span><span class="p">]</span>
                            <span class="k">del</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_X</span><span class="p">]</span>
                            <span class="n">transform</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                            <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">y</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_Y</span><span class="p">]</span>
                            <span class="k">del</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_Y</span><span class="p">]</span>
                            <span class="n">transform</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                            <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
                        <span class="k">if</span> <span class="n">transform</span><span class="p">:</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">attributes</span><span class="p">[</span>
                                    <span class="n">SVG_ATTR_TRANSFORM</span>
                                <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> translate(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
                                    <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">],</span>
                                    <span class="n">x</span><span class="p">,</span>
                                    <span class="n">y</span><span class="p">,</span>
                                <span class="p">)</span>
                            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                                <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;translate(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
                                    <span class="n">x</span><span class="p">,</span>
                                    <span class="n">y</span><span class="p">,</span>
                                <span class="p">)</span>
                        <span class="k">yield</span> <span class="n">tag</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">elem</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">shadow_node</span> <span class="o">=</span> <span class="n">defs</span><span class="p">[</span><span class="n">url</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>
                            <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                <span class="n">shadow_node</span>
                            <span class="p">)</span>  <span class="c1"># Shadow children are children of the use.</span>
                            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">SVG</span><span class="o">.</span><span class="n">_shadow_iter</span><span class="p">(</span><span class="o">*</span><span class="n">shadow_node</span><span class="p">):</span>
                                <span class="k">yield</span> <span class="n">n</span>
                        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                            <span class="k">pass</span>  <span class="c1"># Failed to find link.</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">tag</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">elem</span>
                <span class="k">if</span> <span class="n">SVG_ATTR_ID</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>  <span class="c1"># If we have an ID, we save the node.</span>
                    <span class="n">defs</span><span class="p">[</span><span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_ID</span><span class="p">]]</span> <span class="o">=</span> <span class="n">node</span>  <span class="c1"># store node value in defs.</span>
            <span class="k">elif</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;end&quot;</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">tag</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">elem</span>
                <span class="c1"># event is &#39;end&#39;, pop values.</span>
                <span class="n">parent</span><span class="p">,</span> <span class="n">children</span> <span class="o">=</span> <span class="n">parent</span>  <span class="c1"># Parent is now node.</span></div>

<div class="viewcode-block" id="SVG.parse"><a class="viewcode-back" href="../../../../modules/python_modules/python_modules.python_utils.svgelements.svgelements.html#python_modules.python_utils.svgelements.svgelements.SVG.parse">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span>
        <span class="n">source</span><span class="p">,</span>
        <span class="n">reify</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">ppi</span><span class="o">=</span><span class="n">DEFAULT_PPI</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the SVG file. All attributes are things which the SVG document itself could not be aware of, such as</span>
<span class="sd">        the real size of pixels and the size of the viewport (as opposed to the viewbox).</span>

<span class="sd">        :param source: Source svg file or stream.</span>
<span class="sd">        :param reify: Should the Geometry sized or have lazy matrices.</span>
<span class="sd">        :param ppi: How many physical pixels per inch are there in this view.</span>
<span class="sd">        :param width: The physical width of the viewport</span>
<span class="sd">        :param height: The physical height of the viewport</span>
<span class="sd">        :param color: the `currentColor` value from outside the current scope.</span>
<span class="sd">        :param transform: Any required transformations to be pre-applied to this document</span>
<span class="sd">        :param context: Any existing document context.</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">clip</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">context</span>
        <span class="n">styles</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">values</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">SVG_ATTR_COLOR</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span>
            <span class="n">SVG_ATTR_FILL</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
            <span class="n">SVG_ATTR_STROKE</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">transform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">]</span> <span class="o">=</span> <span class="n">transform</span>

        <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">SVG</span><span class="o">.</span><span class="n">_use_structure_parse</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            SVG element parsing parses the job compiling any parsed elements into their compiled object forms.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;start&quot;</span><span class="p">:</span>
                <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">context</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">SVG_ATTR_DISPLAY</span> <span class="ow">in</span> <span class="n">values</span>
                    <span class="ow">and</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_DISPLAY</span><span class="p">]</span> <span class="o">==</span> <span class="n">SVG_VALUE_NONE</span>
                <span class="p">):</span>
                    <span class="k">continue</span>  <span class="c1"># Values has a display=none. Do not render anything. No Shadow Dom.</span>
                <span class="n">current_values</span> <span class="o">=</span> <span class="n">values</span>
                <span class="n">values</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">values</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">current_values</span><span class="p">)</span>  <span class="c1"># copy of dictionary</span>

                <span class="c1"># Non-propagating values.</span>
                <span class="k">if</span> <span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_PRESERVEASPECTRATIO</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">SVG_ATTR_VIEWBOX</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_VIEWBOX</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">SVG_ATTR_ID</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_ID</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">SVG_ATTR_CLIP_PATH</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_CLIP_PATH</span><span class="p">]</span>

                <span class="n">attributes</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span>  <span class="c1"># priority; lowest</span>
                <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag</span>

                <span class="c1"># Split any Style block elements into parts; priority medium</span>
                <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">if</span> <span class="s2">&quot;*&quot;</span> <span class="ow">in</span> <span class="n">styles</span><span class="p">:</span>  <span class="c1"># Select all.</span>
                    <span class="n">style</span> <span class="o">+=</span> <span class="n">styles</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">styles</span><span class="p">:</span>  <span class="c1"># selector type</span>
                    <span class="n">style</span> <span class="o">+=</span> <span class="n">styles</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">SVG_ATTR_ID</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>  <span class="c1"># Selector id #id</span>
                    <span class="n">svg_id</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_ID</span><span class="p">]</span>
                    <span class="n">css_tag</span> <span class="o">=</span> <span class="s2">&quot;#</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">svg_id</span>
                    <span class="k">if</span> <span class="n">css_tag</span> <span class="ow">in</span> <span class="n">styles</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">style</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">style</span> <span class="o">+=</span> <span class="s2">&quot;;&quot;</span>
                        <span class="n">style</span> <span class="o">+=</span> <span class="n">styles</span><span class="p">[</span><span class="n">css_tag</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">SVG_ATTR_CLASS</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>  <span class="c1"># Selector class .class</span>
                    <span class="k">for</span> <span class="n">svg_class</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_CLASS</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">):</span>
                        <span class="n">css_tag</span> <span class="o">=</span> <span class="s2">&quot;.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">svg_class</span>
                        <span class="k">if</span> <span class="n">css_tag</span> <span class="ow">in</span> <span class="n">styles</span><span class="p">:</span>
                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">style</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">style</span> <span class="o">+=</span> <span class="s2">&quot;;&quot;</span>
                            <span class="n">style</span> <span class="o">+=</span> <span class="n">styles</span><span class="p">[</span><span class="n">css_tag</span><span class="p">]</span>
                        <span class="n">css_tag</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">tag</span><span class="p">,</span>
                            <span class="n">svg_class</span><span class="p">,</span>
                        <span class="p">)</span>  <span class="c1"># Selector type/class type.class</span>
                        <span class="k">if</span> <span class="n">css_tag</span> <span class="ow">in</span> <span class="n">styles</span><span class="p">:</span>
                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">style</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">style</span> <span class="o">+=</span> <span class="s2">&quot;;&quot;</span>
                            <span class="n">style</span> <span class="o">+=</span> <span class="n">styles</span><span class="p">[</span><span class="n">css_tag</span><span class="p">]</span>
                <span class="c1"># Split style element into parts; priority highest</span>
                <span class="k">if</span> <span class="n">SVG_ATTR_STYLE</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                    <span class="n">style</span> <span class="o">+=</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_STYLE</span><span class="p">]</span>

                <span class="c1"># Process style tag left to right.</span>
                <span class="k">for</span> <span class="n">equate</span> <span class="ow">in</span> <span class="n">style</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">):</span>
                    <span class="n">equal_item</span> <span class="o">=</span> <span class="n">equate</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">equal_item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">equal_item</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">equal_item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="n">attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">SVG_ATTR_FILL</span> <span class="ow">in</span> <span class="n">attributes</span>
                    <span class="ow">and</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_FILL</span><span class="p">]</span> <span class="o">==</span> <span class="n">SVG_VALUE_CURRENT_COLOR</span>
                <span class="p">):</span>
                    <span class="k">if</span> <span class="n">SVG_ATTR_COLOR</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                        <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_FILL</span><span class="p">]</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_COLOR</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_FILL</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_COLOR</span><span class="p">]</span>

                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">SVG_ATTR_STROKE</span> <span class="ow">in</span> <span class="n">attributes</span>
                    <span class="ow">and</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_STROKE</span><span class="p">]</span> <span class="o">==</span> <span class="n">SVG_VALUE_CURRENT_COLOR</span>
                <span class="p">):</span>
                    <span class="k">if</span> <span class="n">SVG_ATTR_COLOR</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                        <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_STROKE</span><span class="p">]</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_COLOR</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_STROKE</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_COLOR</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">SVG_ATTR_TRANSFORM</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                    <span class="c1"># If transform is already in values, append the new value.</span>
                    <span class="k">if</span> <span class="n">SVG_ATTR_TRANSFORM</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                        <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">]</span>
                            <span class="o">+</span> <span class="s2">&quot; &quot;</span>
                            <span class="o">+</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">]</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">]</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">]</span>

                <span class="c1"># All class and attribute properties are compiled.</span>

                <span class="n">values</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span>
                <span class="n">values</span><span class="p">[</span><span class="n">SVG_STRUCT_ATTRIB</span><span class="p">]</span> <span class="o">=</span> <span class="n">attributes</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">SVG_ATTR_DISPLAY</span> <span class="ow">in</span> <span class="n">values</span>
                    <span class="ow">and</span> <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_DISPLAY</span><span class="p">]</span> <span class="o">==</span> <span class="n">SVG_VALUE_NONE</span>
                <span class="p">):</span>
                    <span class="k">continue</span>  <span class="c1"># If the attributes flags our values to display=none, stop rendering.</span>
                <span class="k">if</span> <span class="n">SVG_NAME_TAG</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                    <span class="c1"># The ordering for transformations on the SVG object are:</span>
                    <span class="c1"># explicit transform, parent transforms, attribute transforms, viewport</span>
                    <span class="c1"># transforms</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">SVG</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
                    <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">height</span>
                    <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">viewbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">height</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">s</span><span class="o">.</span><span class="n">width</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="k">return</span> <span class="n">s</span>
                            <span class="n">viewport_transform</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">viewbox_transform</span>
                        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
                            <span class="c1"># The width or height was zero.</span>
                            <span class="c1"># https://www.w3.org/TR/SVG11/struct.html#SVGElementWidthAttribute</span>
                            <span class="c1"># &quot;A value of zero disables rendering of the element.&quot;</span>
                            <span class="k">return</span> <span class="n">s</span>  <span class="c1"># No more parsing will be done.</span>

                        <span class="k">if</span> <span class="n">SVG_ATTR_TRANSFORM</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                            <span class="c1"># transform on SVG element applied as if svg had parent with transform.</span>
                            <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">viewport_transform</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">values</span><span class="p">[</span><span class="n">SVG_ATTR_TRANSFORM</span><span class="p">]</span> <span class="o">=</span> <span class="n">viewport_transform</span>
                        <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">viewbox</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">viewbox</span><span class="o">.</span><span class="n">height</span>
                    <span class="k">if</span> <span class="n">context</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                    <span class="n">context</span> <span class="o">=</span> <span class="n">s</span>
                    <span class="k">if</span> <span class="n">root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">root</span> <span class="o">=</span> <span class="n">s</span>
                <span class="k">elif</span> <span class="n">SVG_TAG_GROUP</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">Group</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                    <span class="n">context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                    <span class="n">context</span> <span class="o">=</span> <span class="n">s</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">SVG_TAG_DEFS</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">Group</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                    <span class="n">context</span> <span class="o">=</span> <span class="n">s</span>  <span class="c1"># Non-Rendered</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">SVG_TAG_CLIPPATH</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">ClipPath</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                    <span class="n">context</span> <span class="o">=</span> <span class="n">s</span>  <span class="c1"># Non-Rendered</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
                    <span class="n">clip</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="n">SVG_TAG_PATTERN</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">Pattern</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                    <span class="n">context</span> <span class="o">=</span> <span class="n">s</span>  <span class="c1"># Non-rendered</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">tag</span> <span class="ow">in</span> <span class="p">(</span>
                    <span class="n">SVG_TAG_PATH</span><span class="p">,</span>
                    <span class="n">SVG_TAG_CIRCLE</span><span class="p">,</span>
                    <span class="n">SVG_TAG_ELLIPSE</span><span class="p">,</span>
                    <span class="n">SVG_TAG_LINE</span><span class="p">,</span>  <span class="c1"># Shapes</span>
                    <span class="n">SVG_TAG_POLYLINE</span><span class="p">,</span>
                    <span class="n">SVG_TAG_POLYGON</span><span class="p">,</span>
                    <span class="n">SVG_TAG_RECT</span><span class="p">,</span>
                    <span class="n">SVG_TAG_IMAGE</span><span class="p">,</span>
                <span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">SVG_TAG_PATH</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                            <span class="n">s</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">SVG_TAG_CIRCLE</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                            <span class="n">s</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">SVG_TAG_ELLIPSE</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                            <span class="n">s</span> <span class="o">=</span> <span class="n">Ellipse</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">SVG_TAG_LINE</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                            <span class="n">s</span> <span class="o">=</span> <span class="n">SimpleLine</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">SVG_TAG_POLYLINE</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                            <span class="n">s</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">SVG_TAG_POLYGON</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                            <span class="n">s</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">SVG_TAG_RECT</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                            <span class="n">s</span> <span class="o">=</span> <span class="n">Rect</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>  <span class="c1"># SVG_TAG_IMAGE == tag:</span>
                            <span class="n">s</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">reify</span><span class="p">:</span>
                        <span class="n">s</span><span class="o">.</span><span class="n">reify</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">is_degenerate</span><span class="p">():</span>
                        <span class="k">continue</span>
                    <span class="n">context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">tag</span> <span class="ow">in</span> <span class="p">(</span>
                    <span class="n">SVG_TAG_STYLE</span><span class="p">,</span>
                    <span class="n">SVG_TAG_TEXT</span><span class="p">,</span>
                    <span class="n">SVG_TAG_DESC</span><span class="p">,</span>
                    <span class="n">SVG_TAG_TITLE</span><span class="p">,</span>
                    <span class="n">SVG_TAG_TSPAN</span><span class="p">,</span>
                <span class="p">):</span>
                    <span class="c1"># &lt;style&gt;, &lt;text&gt;, &lt;desc&gt;, &lt;title&gt;</span>
                    <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">SVGElement</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>  <span class="c1"># SVG Unknown object return as element.</span>
                    <span class="n">context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

                <span class="c1"># Assign optional linked properties.</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">clip_path_url</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_CLIP_PATH</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">clip_path_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">clip_path</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">get_element_by_url</span><span class="p">(</span><span class="n">clip_path_url</span><span class="p">)</span>
                        <span class="n">s</span><span class="o">.</span><span class="n">clip_path</span> <span class="o">=</span> <span class="n">clip_path</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">if</span> <span class="n">clip</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">clip_rule</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_CLIP_RULE</span><span class="p">,</span> <span class="n">SVG_RULE_NONZERO</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">clip_rule</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">s</span><span class="o">.</span><span class="n">clip_rule</span> <span class="o">=</span> <span class="n">clip_rule</span>
                    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                        <span class="k">pass</span>
                <span class="k">if</span> <span class="n">SVG_ATTR_ID</span> <span class="ow">in</span> <span class="n">attributes</span> <span class="ow">and</span> <span class="n">root</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">root</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_ID</span><span class="p">]]</span> <span class="o">=</span> <span class="n">s</span>
            <span class="k">elif</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;end&quot;</span><span class="p">:</span>  <span class="c1"># End event.</span>
                <span class="c1"># The iterparse spec makes it clear that internal text data is undefined</span>
                <span class="c1"># except at the end.</span>
                <span class="n">s</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">tag</span> <span class="ow">in</span> <span class="p">(</span>
                    <span class="n">SVG_TAG_TEXT</span><span class="p">,</span>
                    <span class="n">SVG_TAG_TSPAN</span><span class="p">,</span>
                    <span class="n">SVG_TAG_DESC</span><span class="p">,</span>
                    <span class="n">SVG_TAG_TITLE</span><span class="p">,</span>
                    <span class="n">SVG_TAG_STYLE</span><span class="p">,</span>
                <span class="p">):</span>
                    <span class="n">attributes</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span>
                    <span class="k">if</span> <span class="n">SVG_ATTR_ID</span> <span class="ow">in</span> <span class="n">attributes</span> <span class="ow">and</span> <span class="n">root</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">root</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="n">attributes</span><span class="p">[</span><span class="n">SVG_ATTR_ID</span><span class="p">]]</span> <span class="o">=</span> <span class="n">s</span>
                <span class="k">if</span> <span class="n">tag</span> <span class="ow">in</span> <span class="p">(</span><span class="n">SVG_TAG_TEXT</span><span class="p">,</span> <span class="n">SVG_TAG_TSPAN</span><span class="p">):</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">ppi</span><span class="o">=</span><span class="n">ppi</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">reify</span><span class="p">:</span>
                        <span class="n">s</span><span class="o">.</span><span class="n">reify</span><span class="p">()</span>
                    <span class="n">context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">SVG_TAG_DESC</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">Desc</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="n">context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">SVG_TAG_TITLE</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">Title</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="n">context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">SVG_TAG_STYLE</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                    <span class="n">assignments</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">REGEX_CSS_STYLE</span><span class="p">,</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">assignments</span><span class="p">:</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="k">for</span> <span class="n">selector</span> <span class="ow">in</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">):</span>  <span class="c1"># Can comma select subitems.</span>
                            <span class="n">sel</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                            <span class="k">if</span> <span class="n">sel</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">styles</span><span class="p">:</span>
                                <span class="n">styles</span><span class="p">[</span><span class="n">sel</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">styles</span><span class="p">[</span><span class="n">sel</span><span class="p">]</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">):</span>
                                    <span class="n">styles</span><span class="p">[</span><span class="n">sel</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">&quot;;&quot;</span>
                                <span class="n">styles</span><span class="p">[</span><span class="n">sel</span><span class="p">]</span> <span class="o">+=</span> <span class="n">value</span>
                <span class="k">elif</span> <span class="n">SVG_TAG_CLIPPATH</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                    <span class="n">clip</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># Assign optional linked properties.</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">clip_path_url</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SVG_ATTR_CLIP_PATH</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">clip_path_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">clip_path</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">get_element_by_url</span><span class="p">(</span><span class="n">clip_path_url</span><span class="p">)</span>
                            <span class="n">s</span><span class="o">.</span><span class="n">clip_path</span> <span class="o">=</span> <span class="n">clip_path</span>
                    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                        <span class="k">pass</span>
                    <span class="k">if</span> <span class="n">clip</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">clip_rule</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                                <span class="n">SVG_ATTR_CLIP_RULE</span><span class="p">,</span> <span class="n">SVG_RULE_NONZERO</span>
                            <span class="p">)</span>
                            <span class="k">if</span> <span class="n">clip_rule</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">s</span><span class="o">.</span><span class="n">clip_rule</span> <span class="o">=</span> <span class="n">clip_rule</span>
                        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                            <span class="k">pass</span>

                <span class="n">context</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;start-ns&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">SVG_ATTR_DATA</span><span class="p">:</span>
                    <span class="n">values</span><span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">elem</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">root</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2021, Odyseus.

    </p>
  </div>
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a modified version of <a href="https://github.com/rtfd/sphinx_rtd_theme">sphinx-rtd-theme</a>. 

</footer>

        </div>
      </div>

      <a id="to-top-of-page" href="#top">
        <i class="fa fa-chevron-circle-up"></i>
      </a>

    </section>

  </div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>